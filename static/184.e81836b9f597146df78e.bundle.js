/*! For license information please see 184.e81836b9f597146df78e.bundle.js.LICENSE.txt */
"use strict";(this.webpackChunkBV=this.webpackChunkBV||[]).push([[184],{28613:function(e,n,t){t.d(n,{c:function(){return o}});const o=(0,t(8051).createContext)({})},31646:function(e,n,t){var o=t(66656),l=t(8051),a=t(1811),r=t(56898),d=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,n,t)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const g="addon_modal";n.Z=()=>{const e=(0,o.o)();return{open:({Addon:n,Description:t,showOnlyInfo:o,unavailable:d,internalBookingId:p})=>{var f;e.openModal((f=((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&v(e,t,n[t]);if(u)for(var t of u(n))m.call(n,t)&&v(e,t,n[t]);return e})({modalId:g,children:l.createElement(a.V,{internalBookingId:p,Addon:n,Description:t,showOnlyInfo:o,unavailable:d}),centered:1===e.modals.length},r.$),i(f,c({onClick:()=>e.closeModal(g)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(g)}catch(e){}}),[])}}},55166:function(e,n,t){var o=t(66656),l=t(8051),a=t(639),r=t(56898),d=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,n,t)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const g="available_addons_modal";n.Z=()=>{const e=(0,o.o)();return{open:({internalBookingId:n})=>{var t;e.openModal((t=((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&v(e,t,n[t]);if(u)for(var t of u(n))m.call(n,t)&&v(e,t,n[t]);return e})({modalId:g,children:l.createElement(a.I,{internalBookingId:n}),centered:!1},r.$),i(t,c({onClick:()=>e.closeModal(g)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(g)}catch(e){}}),[])}}},80790:function(e,n,t){var o=t(8051),l=t(66656),a=t(84404),r=t(56898),d=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,n,t)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const g="edit_room_modal";n.Z=()=>{const e=(0,l.o)();return{open:({room:n})=>{return e.openModal((t=((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&v(e,t,n[t]);if(u)for(var t of u(n))m.call(n,t)&&v(e,t,n[t]);return e})({modalId:g,children:o.createElement(a.Z,{room:n}),centered:!1},r.$),i(t,c({onClick:()=>e.closeModal(g)}))));var t},close:(0,o.useCallback)((()=>{try{e.closeModal(g)}catch(e){}}),[])}}},25581:function(e,n,t){var o=t(66656),l=t(8051),a=t(88087),r=t(56898),d=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,n,t)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const g="mandatory_addon_packages";n.Z=()=>{const e=(0,o.o)();return{open:({internalRoomBookingId:n})=>{var t;e.openModal((t=((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&v(e,t,n[t]);if(u)for(var t of u(n))m.call(n,t)&&v(e,t,n[t]);return e})({modalId:g,children:l.createElement(a.Z,{internalRoomBookingId:n}),centered:!1},r.$),i(t,c({onClick:()=>e.closeModal(g)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(g)}catch(e){}}),[])}}},31796:function(e,n,t){var o=t(66656),l=t(8051),a=t(18360),r=t(56898),d=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,n,t)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const g="mandatory_addon_timeslots";n.Z=()=>{const e=(0,o.o)();return{open:({internalRoomIds:n})=>{var t;e.openModal((t=((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&v(e,t,n[t]);if(u)for(var t of u(n))m.call(n,t)&&v(e,t,n[t]);return e})({modalId:g,children:l.createElement(a.Z,{internalRoomIds:n}),centered:1===e.modals.length},r.$),i(t,c({onClick:()=>e.closeModal(g)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(g)}catch(e){}}),[])}}},69082:function(e,n,t){var o=t(66656),l=t(8051),a=t(26176),r=t(17204),d=t(56898),i=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,g=(e,n,t)=>n in e?i(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const p="reconfigure_booking";n.Z=()=>{const e=(0,o.o)();return{open:({internalRoomBookingId:n,removedAddOnPackages:t,removedAddOns:o,affectedInternalRoomIds:i,hasToSelectNewRoomType:f})=>{const I=(0,r.Cf)();var y;e.openModal((y=((e,n)=>{for(var t in n||(n={}))m.call(n,t)&&g(e,t,n[t]);if(s)for(var t of s(n))v.call(n,t)&&g(e,t,n[t]);return e})({modalId:p,children:l.createElement(a.Z,{removedAddOnPackages:t,removedAddOns:o,internalRoomBookingId:n,affectedInternalRoomIds:i,hasToSelectNewRoomType:f,uniqueModalId:I}),centered:!1},d.$),c(y,u({onClick:()=>e.closeModal(p)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(p)}catch(e){}}),[])}}},69314:function(e,n,t){var o=t(66656),l=t(8051),a=t(2557),r=t(56898),d=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,n,t)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const g="room_info";n.Z=()=>{const e=(0,o.o)();return{open:n=>{var t;e.openModal((t=((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&v(e,t,n[t]);if(u)for(var t of u(n))m.call(n,t)&&v(e,t,n[t]);return e})({modalId:g,children:l.createElement(a.J,{roomId:n}),centered:!0},r.$),i(t,c({onClick:()=>e.closeModal(g)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(g)}catch(e){}}),[])}}},98960:function(e,n,t){var o=t(66656),l=t(8051),a=t(59062),r=t(56898),d=Object.defineProperty,i=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,s=(e,n,t)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const m="upgrade_room";n.Z=()=>{const e=(0,o.o)();return{open:({upSell:n,overrideOnBack:t,targetRoomToUpdate:o})=>{e.openModal(((e,n)=>{for(var t in n||(n={}))c.call(n,t)&&s(e,t,n[t]);if(i)for(var t of i(n))u.call(n,t)&&s(e,t,n[t]);return e})({modalId:m,children:l.createElement(a.Z,{upSell:n,targetRoomToUpdate:o,overrideOnBack:t}),centered:!1},r.$))},close:(0,l.useCallback)((()=>{try{e.closeModal(m)}catch(e){}}),[])}}},30686:function(e,n,t){t.d(n,{H:function(){return a}});var o=t(20399),l=t(41347);const a=(e,n)=>{const t=(0,l.g)();return(0,o.useQuery)(["available_addons",e],(()=>t.APIClient.bookingsAvailableAddonsV1(e,!1,!0,void 0,+t.languageId,t.channelId)),{staleTime:1/0,refetchOnWindowFocus:!1,suspense:!0,enabled:Boolean(e)&&!1!==n})}},46651:function(e,n,t){t.d(n,{g:function(){return r}});var o=t(59888),l=t(63339),a=t.n(l);const r=e=>{var n,t;const l=null!=(t=null==(n=null==e?void 0:e.connectedAddOns)?void 0:n.flatMap((e=>{var n,t;return null!=(t=null==(n=e.addOnPriceInfo)?void 0:n.map((e=>e.price)))?t:[]})))?t:[],r=l.reduce(((e,n)=>e+n),0),d=a()(l,(e=>e));return(null==e?void 0:e.chargeUnit)===o.nO.OnePerRoom||!1===e.dynamic?r:d[0]}},56512:function(e,n,t){t.d(n,{v:function(){return l}});var o=t(59888);const l=e=>{var n,t;const l=null!=(t=null==(n=null==e?void 0:e.addOnPriceInfo)?void 0:n.map((e=>e.price)))?t:[],a=l.reduce(((e,n)=>e+n),0);return(null==e?void 0:e.addOnChargeUnit)===o.nO.OnePerRoom?a:l[0]}},40820:function(e,n,t){t.d(n,{p:function(){return o}});const o=(e,n)=>{var t,o,l;let a=null==(t=null==n?void 0:n.rooms)?void 0:t.find((n=>n.internalBookingId===e)),r=null==(l=null==(o=null==a?void 0:a.mandatoryAddOns)?void 0:o.filter((e=>void 0!==e.timeSlotInfo&&null!==e.timeSlotInfo)))?void 0:l.length;return void 0!==r&&r>0}},77938:function(e,n,t){t.d(n,{Q:function(){return o}});const o=(e,n)=>{var t,o,l;let a=null==(t=null==n?void 0:n.rooms)?void 0:t.find((n=>n.internalBookingId===e)),r=null==(l=null==(o=null==a?void 0:a.mandatoryAddOnPackages)?void 0:o.filter((e=>e.dynamic)))?void 0:l.length;return void 0!==r&&r>0}},77949:function(e,n,t){t.d(n,{L:function(){return l}});var o=t(59888);const l=(e,n,t,l)=>{if(e&&e.length>0||n&&n.length>0){let a=!0,r=!0;return e.forEach((e=>{var n,r;let d=null==(n=null==t?void 0:t.optionalAddOns)?void 0:n.some((n=>n.addOnId===e&&(n.internalRoomBookingId===l||void 0===n.internalRoomBookingId)&&n.status!==o.Ms.Removed)),i=null==(r=null==t?void 0:t.rooms)?void 0:r.some((n=>{var t;return n.internalBookingId===l&&n.status!==o.Ms.Removed&&(null==(t=n.mandatoryAddOns)?void 0:t.some((n=>n.addOnId===e&&n.internalRoomBookingId===l&&n.status!==o.Ms.Removed)))}));d||i||(a=!1)})),n.forEach((e=>{var n,a;let d=null==(n=null==t?void 0:t.optionalAddOnPackages)?void 0:n.some((n=>n.addOnPackageId===e&&(n.internalRoomId===l||void 0===n.internalRoomId)&&n.status!==o.Ms.Removed)),i=null==(a=null==t?void 0:t.rooms)?void 0:a.some((n=>{var t;return n.internalBookingId===l&&n.status!==o.Ms.Removed&&(null==(t=n.mandatoryAddOnPackages)?void 0:t.some((n=>n.addOnPackageId===e&&(n.internalRoomId===l||void 0===n.internalRoomId)&&n.status!==o.Ms.Removed)))}));d||i||(r=!1)})),!a||!r}return!1}},98196:function(e,n,t){t.d(n,{K:function(){return o}});const o=(e,n,t,o)=>{return l=void 0,a=null,r=function*(){var l,a;const r=null!=(a=null==(l=t.addOnPriceInfo)?void 0:l.map((e=>new Date(e.date))))?a:[],d=["optionaladdontimeslots",t.addOnId,1,JSON.stringify(r)];if(!o.getQueryData(d)){let l=yield null==e?void 0:e.basketsOptionalAddonTimeslotsV1(t.addOnId,1,r,n);o.setQueryData(d,l)}},new Promise(((e,n)=>{var t=e=>{try{d(r.next(e))}catch(e){n(e)}},o=e=>{try{d(r.throw(e))}catch(e){n(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(t,o);d((r=r.apply(l,a)).next())}));var l,a,r}},25240:function(e,n,t){var o=t(8051),l=t(12263),a=t(24972),r=t(4386),d=t(39641),i=t(25140),c=t(97101),u=t(51527),s=t(41237),m=t(47833),v=t(45937),g=t(9088),p=t(35262),f=t(26251),I=t(40387),y=t(87262),h=t(32326);n.Z=({roomId:e,addOnPackageId:n,headLine:t,connectedAddOns:k,addonInfo:E})=>{var A,O,b,P,C;const x=(0,a.sJ)(g.Q),w=(0,a.sJ)(p.u),{data:R}=(0,y.K)(),B=(0,I.H)(),{updateBasket:S}=(0,h.c)(),D=(0,l.Fg)(),[T,$]=(0,o.useState)(),G=e=>{return n=void 0,t=null,o=function*(){var n,t,o,l;if(!Boolean(T))try{$(JSON.stringify(e)),yield S.mutateAsync({request:{bookingCode:null==(n=null==R?void 0:R.booking)?void 0:n.bookingCode,updateMandatoryDynamicAddOnPackages:{bookingKeys:[e]}},pixelData:{content_name:null!=(t=E.name)?t:"N/A",value:null!=(l=null==(o=e.gtaPrice)?void 0:o.toString())?l:"N/A"},waitForNewBasket:!0})}finally{$(void 0)}},new Promise(((e,l)=>{var a=e=>{try{d(o.next(e))}catch(e){l(e)}},r=e=>{try{d(o.throw(e))}catch(e){l(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((o=o.apply(n,t)).next())}));var n,t,o},H=null==(P=null==(b=null==(O=null==(A=null==R?void 0:R.booking)?void 0:A.bookingData)?void 0:O.rooms)?void 0:b.find((n=>n.internalBookingId===e)))?void 0:P.mandatoryAddOnPackages,M=null==(C=null==H?void 0:H.find((e=>e.addOnPackageId===n)))?void 0:C.basketAddOnPriceInfos;return o.createElement(u.uS,{style:{marginBottom:0}},o.createElement("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"18px"}},o.createElement(s.SK,{bold:!0,muted:!0,style:{whiteSpace:"nowrap"}},o.createElement(m.G,{icon:v.fT,style:{marginRight:"8px"}}),t),o.createElement("hr",{style:{margin:"0",height:D.css.dividerBorderWidth,border:0,width:"100%",background:D.css.cardDividerColor}})),o.createElement(r.K,{align:"center",justify:"center",spacing:3,style:{width:"100%"}},k.map((t=>{const l={addOnId:t.addOnId,addOnPackageId:n,internalRoomId:e,nrUnits:t.requiredAmountForRoomConfig,price:t.price,gtaPrice:t.priceDisplay},a=JSON.stringify(l),r=T===a,u=`bv-connectedAddon-addonpackageid-${t.addOnId}-roomid-${e}`,s=t.available,m=!T&&-1!==(null==M?void 0:M.findIndex((e=>e.addOnId===t.addOnId))),v=0===t.priceDisplay?o.createElement("span",{style:{opacity:.7,color:r?"transparent":m?D.css.selectedDarkFontColor:D.css.cardColor}},B("EA4H.General.IncludedInPrice")):o.createElement("b",{style:{color:r?"transparent":m?D.css.selectedDarkFontColor:D.css.cardColor}},`+${null==x?void 0:x.format(t.priceDisplay)} ${null==w?void 0:w.currency}`);return o.createElement(c.ne,{key:u,onClick:()=>{s&&G(l)},$selected:m||r,$available:s},o.createElement(d.Z,{spacing:0,position:"center",style:{alignItems:"stretch",justifyContent:"stretch",height:"100%",flexWrap:"nowrap",width:"100%"}},r&&o.createElement("div",{style:{position:"absolute",inset:0,display:"grid",placeContent:"center"}},o.createElement(f.Z,{color:D.css.selectedDarkFontColor})),!r&&o.createElement(i.Y,{name:u,readOnly:!0,value:t.addOnId,checked:m,styles:()=>({root:{width:"50px",flexShrink:0,minHeight:"50px",backgroundColor:D.css.darkAccentColor,display:"flex",flexDirection:"column",alignItems:"center"},body:{marginTop:"auto",marginBottom:"auto"},inner:{marginLeft:"auto",marginRight:"auto"},radio:{background:D.css.cardBackground,border:`${D.css.buttonBorderWidth} solid ${D.css.cardBackground}`,":checked":{background:D.css.cardBackground,border:`${D.css.buttonBorderWidth} solid ${D.css.cardBackground}`}},icon:{borderRadius:"50%",color:D.css.darkAccentColor}})}),o.createElement(c.c7,{$available:s},o.createElement(c.Xg,{$isLoading:r,$selected:m},o.createElement("b",null,t.addOnName)),s?v:o.createElement("span",{style:{color:D.css.offerColorDark}},B("EA4H.General.FullyBooked")))))}))))}},10335:function(e,n,t){var o=t(8051),l=t(12263),a=t(25240),r=t(8114),d=t(7835),i=t(30510),c=t(40065),u=t(40387),s=t(87262),m=t(82644),v=t(64868);n.Z=({internalRoomIds:e,setTotalAmountForModal:n})=>{const[t,g]=(0,o.useState)(void 0),{data:p,isFetched:f}=(0,m.C)(e),{data:I}=(0,s.K)(),y=(0,u.H)();(0,l.Fg)();return(0,o.useEffect)((()=>{if(f&&(null==p?void 0:p.roomAddOnPackages)&&(null==p?void 0:p.roomAddOnPackages.length)>0){const e=null==p?void 0:p.roomAddOnPackages;g(e),n&&n(e[0].addOnPackages)}}),[f]),o.createElement(o.Fragment,null,null==t?void 0:t.map(((e,n)=>{var t,l,u;const s=null==e?void 0:e.addOnPackages,m=null==(u=null==(l=null==(t=null==I?void 0:I.booking)?void 0:t.bookingData)?void 0:l.rooms)?void 0:u.find((n=>n.internalBookingId===(null==e?void 0:e.internalBookingRoomId))),g=(0,v.n)(y("EA4H.General.ForRoom{0}"),`${n+1}: ${null==e?void 0:e.name}  (${(0,i.lX)(m,y)})`);return o.createElement(o.Fragment,{key:g},o.createElement(c.Y,null,g),o.createElement(d.j,null,null==s?void 0:s.map((n=>{const t=n.images,l=n.addOnPackageConnectedAddOn,d={id:n.addOnPackageId,name:n.name,description:n.description},i=`addOnpackageid-${n.addOnPackageId}-roomid-${n.internalRoomId}`;return o.createElement(o.Fragment,{key:i},o.createElement(r.b,{images:t,addonInfo:d,noMarginBottom:!0}),o.createElement(a.Z,{addonInfo:d,connectedAddOns:l,roomId:null==e?void 0:e.internalBookingRoomId,addOnPackageId:n.addOnPackageId,headLine:n.headLine}))}))))})))}},97101:function(e,n,t){t.d(n,{Xg:function(){return d},c7:function(){return i},ne:function(){return r}});var o=t(12263),l=t(8900),a=t(17204);const r=(0,o.ZP)(l.Z)`
  width: 100%;
  column-gap:10px;
  min-height: 50px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding:0;

  ${({theme:e,$available:n})=>n&&o.iv`
    background-color: ${e.css.cardInnerBackground};
  `}

  ${({theme:e,$available:n})=>!n&&o.iv`
    background-color: transparent;
    opacity: ${e.css.bodyMutedOpacity};
  `}

  ${({$available:e})=>e&&o.iv`
    cursor: pointer;
  `}

  ${({theme:e,$selected:n})=>n&&o.iv`
    background-color: ${e.css.darkAccentColor};
  `}
`,d=o.ZP.span`
  ${({theme:e,$isLoading:n})=>o.iv`
    color: ${n?"transparent":e.css.cardColor};
  `}

  ${({$selected:e,theme:n})=>e&&o.iv`
    color: ${n.css.selectedDarkFontColor};

    &:before {
      content: '';
      position: absolute;
      top: 10px;
      bottom: 10px;
      border-left: 1px solid ${n.css.selectedDarkFontColor};
      left: 49px;
    }
  `}
`,i=o.ZP.div`
  display:flex;
  justify-content:space-between;
  width:100%;
  padding: 10px 25px;
  align-items: center;

  ${({theme:e,$available:n})=>!n&&o.iv`
  background: transparent;
  ${(0,a.xp)(e.css.cardInnerBackground,"9px 9px")}
`}

  @media ${({theme:e})=>e.mediaQueries.verySmall} {
    flex-direction:column;
    align-items: start;
  }
`},80861:function(e,n,t){t.d(n,{b:function(){return s}});var o=t(8051),l=t(20399),a=t(82795),r=t(51527),d=t(26251),i=t(87262),c=t(32326),u=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const s=o.forwardRef((({isSelected:e,addOnDetail:n,timeslot:t,perDayInfo:s,reAddToBasketOnLoad:m},v)=>{const[g,p]=(0,o.useState)(!1);(0,o.useEffect)((()=>{e&&m&&k()}),[]);const{updateBasket:f}=(0,c.c)(),{data:I}=(0,i.K)(),y=(0,l.useIsMutating)("updateBasket")>0,h=(0,l.useIsMutating)("updateBasket",{predicate:e=>{var o,l;const a=null==(l=null==(o=e.options.variables)?void 0:o.request)?void 0:l.updateMandatoryAddOnsTimeSlots,r=new Date(s.dateTime);return void 0!==a.bookingKeys.find((e=>{var o;return e.addOnId===n.addOnId&&(null==(o=s.internalRoomIds)?void 0:o.indexOf(e.internalRoomId))>0&&e.year===r.getUTCFullYear()&&e.month===r.getUTCMonth()+1&&e.day===r.getUTCDate()&&(e.timeSlotHours!==new Date(t.timeSlot).getUTCHours()||e.timeSlotMinutes!==new Date(t.timeSlot).getUTCMinutes())}))}})>0,k=()=>u(void 0,null,(function*(){var e,o;const l=null==(e=v.current)?void 0:e.value;p(!0);const a=new Date(s.dateTime),r=new Date(t.timeSlot);let d={addOnId:n.addOnId,internalRoomIds:s.internalRoomIds,year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),timeSlotHours:r.getUTCHours(),timeSlotMinutes:r.getUTCMinutes(),messageToRestaurant:l};yield f.mutateAsync({request:{bookingCode:null==(o=null==I?void 0:I.booking)?void 0:o.bookingCode,updateMandatoryAddOnsTimeSlots:{bookingKeys:[d]}},waitForNewBasket:!0}),p(!1)}));return o.createElement(r.wx,{isSelected:(e||g)&&!h,onClick:()=>u(void 0,null,(function*(){y||e||(yield k())}))},o.createElement(a.A,{bold:!0,style:{color:g?"transparent":"inherit"}},t.presentTime),g&&o.createElement("div",{style:{position:"absolute",inset:0,display:"grid",placeContent:"center"}},o.createElement(d.Z,{inverted:!1})))}))},84159:function(e,n,t){t.d(n,{D:function(){return f}});var o=t(8051),l=t(20399),a=t(45937),r=t(47833),d=t(12263),i=t(41237),c=t(79791),u=t(80861),s=t(51527),m=t(40387),v=t(87262),g=t(32326),p=t(9705);const f=({addOnDetail:e,perDayInfo:n,reAddToBasketOnLoad:t})=>{var f,I,y,h,k,E;const A=(0,d.Fg)(),O=(0,m.H)(),b=(0,g.c)(),P=(0,l.useQueryClient)(),{data:C}=(0,v.K)(),x=null==(y=null==(I=(null==(f=n.internalRoomIds)?void 0:f.map((e=>{var n,t,o;return null==(o=null==(t=null==(n=null==C?void 0:C.booking)?void 0:n.bookingData)?void 0:t.rooms)?void 0:o.find((n=>n.internalBookingId===e))})))[0])?void 0:I.mandatoryAddOns)?void 0:y.find((t=>n.dateTime===t.date&&t.addOnId===e.addOnId&&void 0!==t.timeSlotInfo&&null!==t.timeSlotInfo));let w=null==(k=null==(h=n.addOnTimeSlots)?void 0:h.find((e=>e.selected)))?void 0:k.presentTime;const R=(0,o.useRef)(null),B=(0,l.useIsMutating)("updateBasket")>0,S=(0,l.useIsMutating)("updateTimeslotAddonMessageToRestaurant")>0,D=(0,o.useRef)(!1);(0,o.useEffect)((()=>{var e;const t=null==(e=R.current)?void 0:e.value;(0,p.B)(t)&&t!==n.messageToRestaurant&&(R.current.value=n.messageToRestaurant)}),[n.messageToRestaurant]);return x&&(w=`${x.timeSlotInfo}`.split("T")[1].substring(0,5)),o.createElement(s.uS,null,o.createElement("div",{key:e.addOnId},o.createElement("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"18px"}},o.createElement(i.SK,{bold:!0,muted:!0,style:{whiteSpace:"nowrap"}},o.createElement(r.G,{icon:a.fT,style:{marginRight:"8px"}}),n.headLine),o.createElement("hr",{style:{margin:"0",height:A.css.dividerBorderWidth,border:0,width:"100%",background:A.css.cardDividerColor}})),o.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(140px, 1fr))",flexWrap:"wrap",gap:"10px",marginBottom:"18px"}},null==(E=n.addOnTimeSlots)?void 0:E.map((l=>!1===l.available?o.createElement(c.E,{key:l.presentTime,timeslotInfo:l}):o.createElement(u.b,{ref:R,isSelected:w===l.presentTime,key:l.presentTime,timeslot:l,addOnDetail:e,perDayInfo:n,reAddToBasketOnLoad:t})))),o.createElement(s.Kx,{disabled:B||S,ref:R,onChange:()=>D.current=!0,defaultValue:n.messageToRestaurant,onBlur:t=>{var o;if(!D.current)return;const l=new Date(n.dateTime),a=new Date(null==x?void 0:x.timeSlotInfo);let r={addOnId:e.addOnId,internalRoomIds:n.internalRoomIds,year:l.getUTCFullYear(),month:l.getUTCMonth()+1,day:l.getUTCDate(),messageToRestaurant:t.target.value,timeSlotHours:a.getUTCHours(),timeSlotMinutes:a.getUTCMinutes()};b.updateTimeslotAddonMessageToRestaurant.mutate({bookingCode:null==(o=null==C?void 0:C.booking)?void 0:o.bookingCode,updateMandatoryAddOnsTimeSlots:{bookingKeys:[r]}},{onSuccess:()=>{D.current=!1,P.invalidateQueries(["mandatory_addon_timeslots",n.internalRoomIds])}})},spellCheck:!1,placeholder:O("EA4H.General.MessageToRestaurant")})))}},81166:function(e,n,t){var o=t(8051),l=t(8114),a=t(84159),r=t(7835),d=t(37320);n.Z=({internalRoomIds:e,reAddToBasketOnLoad:n})=>{const[t,i]=(0,o.useState)(void 0),{data:c,isFetched:u}=(0,d.m)(e);return(0,o.useEffect)((()=>{if(u&&(null==c?void 0:c.mandatoryAddOnMealWithTimeSlots)&&(null==c?void 0:c.mandatoryAddOnMealWithTimeSlots.length)>0){const e=null==c?void 0:c.mandatoryAddOnMealWithTimeSlots;i(e)}}),[u]),o.createElement(r.j,null,null==t?void 0:t.map((e=>{var t,r;const d=e.extra;return o.createElement("div",{key:`${e.mealId}_${d.addOnId}`},o.createElement(l.b,{images:null!=(t=d.images)?t:[],addonInfo:d}),null==(r=e.addOnTimeSlotPerDayInfos)?void 0:r.map((t=>o.createElement(a.D,{key:`${t.dateTime}_${e.mealId}`,perDayInfo:t,addOnDetail:d,reAddToBasketOnLoad:n}))))})))}},51527:function(e,n,t){t.d(n,{FW:function(){return u},Kx:function(){return c},uS:function(){return i},wx:function(){return s}});var o=t(12263),l=t(17204),a=t(41237),r=t(99787);const d=o.ZP.button`
  height: 60px;
  padding: 5px;
  background: white;
  display: grid;
  place-content: center;
  text-align: center;
  transition: background, color .2s;
  border-style: solid;

  ${({theme:e})=>o.iv`
    border-width: 1px;
    border-radius: ${e.css.cardBorderRadius};
    background: transparent;
    border-color: ${e.css.cardDividerColor};
    color: ${e.css.cardColor};
  `}
`,i=(0,o.ZP)(a.Zb)`
  padding: 25px;
  margin-bottom: 20px;

  @media ${({theme:e})=>e.mediaQueries.verySmall} {
    padding: 20px;
  }

  position: relative;

  &:before {
    content: '';
    display: block;
    width: 24px;
    height: 24px;
    position: absolute;
    border-style: solid;
    transform: rotateZ(-45deg);
    z-index: 0;
    border-bottom: 0;
    border-left: 0;
    background-clip: content-box;
    pointer-events: none;
    margin-top: 5px;
    border-width: ${({theme:e})=>e.css.cardBorderWidth};
    border-color: ${({theme:e})=>e.css.cardBorderColor};
    background: ${({theme:e})=>e.css.cardBackground};
    top: calc(-17px - ${({theme:e})=>e.css.cardBorderWidth});
    left: calc(50% - 12px);
  }
`,c=o.ZP.textarea`
  width: 100%;
  padding: 10px;
  box-sizing: border-box;
  resize: none;

  ${({theme:e})=>o.iv`
    background: ${e.css.inputBackground};
    border-color: ${e.css.inputBorderColor};
    border-width: ${e.css.inputBorderWidth};
    border-style: solid;
    border-radius: ${e.css.inputRoundedCorners};
    font-size: ${e.css.bodyFontSize};
    font-family: ${e.css.bodyFontFamily};
    color: ${e.css.inputColor};
    box-shadow: ${e.css.inputTextBoxShadow};

    &::placeholder {
      color: ${(0,r.W)(e.css.inputColor,void 0,.5).color};
    }
  `}

  ${({disabled:e})=>e&&o.iv`
    opacity: .7;
  `}
`,u=(0,o.ZP)(d)`
  background: ${({theme:e})=>(0,l.Im)((0,r.W)(e.css.bodyColor,void 0,.1).color)};
  background-size: 8px 8px;
`,s=(0,o.ZP)(d)`
  cursor: pointer;
  position: relative;

  ${({isSelected:e})=>e&&o.iv`
    background: ${({theme:e})=>e.css.darkSelectedColor};
    border: 1px solid ${({theme:e})=>e.css.darkSelectedColor};
    color: ${({theme:e})=>e.css.selectedDarkFontColor};
  `}
  &:hover {
    &::before {
      content: '';
      opacity: 0.075;
      position: absolute;
      top: -1px;
      right: -1px;
      bottom: -1px;
      left: -1px;
      background-color: currentColor;
      border-radius: inherit;
    }
  }

`},79791:function(e,n,t){t.d(n,{E:function(){return i}});var o=t(8051),l=t(12263),a=t(82795),r=t(51527),d=t(40387);const i=({timeslotInfo:e})=>{const n=(0,l.Fg)(),t=(0,d.H)();return o.createElement(r.FW,null,o.createElement(a.A,{bold:!0},e.presentTime),o.createElement(a.A,{style:{color:n.css.offerColorDark}},t("EA4H.General.FullyBooked")))}},56866:function(e,n,t){t.d(n,{l:function(){return p}});var o=t(8051),l=t(92654),a=t(12263),r=t(75435),d=t(63711),i=t(59888),c=t(80360),u=t(4665),s=t(40387),m=t(87262),v=t(32326),g=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const p=(0,o.forwardRef)((({presentationType:e,subLabelOnNewLine:n,subLabel:t,addOn:l,label:a},d)=>{var i;const{data:p}=(0,m.K)(),I=(0,s.H)(),[y,h]=(0,o.useState)(),k=(0,o.useContext)(r.z),E=null==k?void 0:k.originalBooking,A=!k.isEditMode&&E?E.bookingData:null==(i=null==p?void 0:p.booking)?void 0:i.bookingData,O=((e,n)=>{var t,o;return(0,c.LX)(e)?void 0!==(null==(t=null==n?void 0:n.optionalAddOns)?void 0:t.find((n=>n.addOnId===e.addOnId))):!!(0,c._o)(e)&&void 0!==(null==(o=null==n?void 0:n.optionalAddOnPackages)?void 0:o.find((n=>n.addOnPackageId===e.addOnPackageId)))})(l,A),b="removing"!==y&&(O||"adding"===y),{updateBasket:P,removeAddonsFromBasket:C}=(0,v.c)(),x=(0,v.c)();if((0,u.Dc)(l))return null;return o.createElement(f,{addOnName:l.name,label:null!=a?a:I("EA4H.General.AddToBooking"),onClick:e=>{var n,t;(0,c.LX)(l)?(t=l,g(void 0,null,(function*(){var e,n,o;let l=null==A?void 0:A.bookingCode;if(l)try{O?(h("removing"),yield C.mutateAsync({bookingCode:l,requests:[{addOnId:t.addOnId}],waitForNewBasket:!0})):(h("adding"),yield P.mutateAsync({request:{bookingCode:l,addAddonsToBasket:[{addonId:t.addOnId,price:t.price,nrOfUnits:1}]},waitForNewBasket:!0,pixelData:{content_name:null!=(e=t.name)?e:"N/A",value:null!=(o=null==(n=t.price)?void 0:n.toString())?o:"N/A"}}))}finally{h(void 0)}}))):(0,c._o)(l)&&(n=l,g(void 0,null,(function*(){let e=null==A?void 0:A.bookingCode;if(e)try{O?(h("adding"),yield x.removeAddonsFromBasket.mutateAsync({bookingCode:e,requests:[{addOnPackageId:n.addOnPackageId}],waitForNewBasket:!0})):(h("removing"),yield P.mutateAsync({request:{bookingCode:e,addAddonsToBasket:[{addonPackageId:n.addOnPackageId,price:(0,c.SJ)(n)?(0,u.QC)(n):n.cheapestPrice,nrOfUnits:1}]},waitForNewBasket:!0}))}finally{h(void 0)}}))),e.stopPropagation()},presentationType:e,subLabel:t,isLoading:void 0!==y,showAsInBasket:b,subLabelOnNewLine:n})})),f=(0,o.forwardRef)((({label:e,subLabelOnNewLine:n,subLabel:t,onClick:r,addOnName:c,isLoading:u,presentationType:s,showAsInBasket:m},v)=>{const g=(0,a.Fg)(),p=null!=s?s:g.style.extrasPresentationType,f=p===i.Rq.List?((e,n)=>({input:{cursor:"pointer",background:"transparent",border:`${e.css.buttonBorderWidth} solid ${n?e.css.selectedDarkFontColor:e.css.dividerBorderColor}`,opacity:1,":checked":{background:e.css.selectedDarkFontColor,border:`${e.css.buttonBorderWidth} solid ${n?e.css.selectedDarkFontColor:e.css.buttonBackground}`}},icon:{color:`${e.css.darkSelectedColor} !important`}}))(g,m):(e=>({input:{cursor:"pointer",color:"#fff",background:"transparent",border:`${e.css.buttonBorderWidth} solid #fff`,opacity:1,":checked":{background:e.css.selectedDarkFontColor,border:`${e.css.buttonBorderWidth} solid ${e.css.selectedDarkFontColor}`}},icon:{color:`${e.css.darkSelectedColor} !important`}}))(g),I=()=>m?g.css.selectedDarkFontColor:p===i.Rq.List?g.css.bodyColor:"#fff";return o.createElement("div",{style:{cursor:"pointer",display:"flex",alignItems:"center"}},o.createElement(d.z,{loadingColor:I(),ref:v,disabled:u,isLoading:u,style:{borderColor:m?g.css.darkSelectedColor:p===i.Rq.List?g.css.dividerBorderColor:"#fff",background:m?g.css.darkSelectedColor:"transparent",color:I(),textTransform:"capitalize",maxWidth:"unset",display:"flex",padding:"10px",alignItems:"center",gap:"10px",height:"auto",letterSpacing:"normal"},onClick:r},o.createElement(l.X,{style:{borderRadius:0,opacity:u?0:1,height:20,width:20},radius:+g.css.inputRoundedCorners.replace("px",""),id:`cb_${c}`,checked:m,readOnly:!0,styles:f}),o.createElement("div",{style:{textAlign:"left",fontWeight:g.css.bodyBoldFontWeight,fontSize:g.css.bodyFontSize,fontFamily:g.css.bodyFontFamily}},e,t&&o.createElement(o.Fragment,null," ",o.createElement("span",{style:{fontWeight:g.css.bodyFontWeight,display:n?"inline-block":"inline"}},"     ",t)))))}))},72:function(e,n,t){t.d(n,{v:function(){return O}});var o=t(8051),l=t(24972),a=t(18214),r=t(47833),d=t(46601),i=t(71566),c=t(82795),u=t(56866),s=t(13298),m=t(71216),v=t(75435),g=t(17204),p=t(80360),f=t(4665),I=t(32972),y=t(9088),h=t(40387),k=t(87262),E=t(99301),A=t(31646);const O=({Addon:e,presentationType:n,internalBookingId:t})=>{var O,b,P,C,x,w,R,B,S,D,T,$,G;const H=(0,l.sJ)(I.o),M=(0,p._o)(e),{data:U}=(0,E.E)(),N=(0,l.sJ)(y.Q),F=`${null==N?void 0:N.format((0,f.Yk)(e))} ${null==U?void 0:U.currency}`,{data:L}=(0,k.K)(),Z=(0,f.Dc)(e),j=(0,h.H)(),_=(0,o.useContext)(v.z),z=(0,A.Z)(),W=null==_?void 0:_.originalBooking,V=!1===_.isEditMode?null==W?void 0:W.bookingData:null==(O=null==L?void 0:L.booking)?void 0:O.bookingData;let Q=Z?`${j("EA4H.General.From")} ${F}`:`+${F}`;const q=M&&null!=(P=null==(b=null==V?void 0:V.optionalAddOnPackages)?void 0:b.filter((n=>n.addOnPackageId===e.addOnPackageId&&(void 0===t||n.internalRoomId==t))))?P:[],K=M?[]:null==(C=null==V?void 0:V.optionalAddOns)?void 0:C.filter((n=>n.addOnId===e.addOnId&&n.internalRoomBookingId==t));let J=0;for(const e of null!=(x=null==q?void 0:q.flatMap((e=>e.basketAddOnPriceInfos)))?x:[])(0,f.zL)(e)?J+=(null!=(w=null==e?void 0:e.price)?w:0)*(null!=(R=null==e?void 0:e.numberOfUnits)?R:1):J+=null!=(B=null==e?void 0:e.price)?B:0;for(const e of null!=K?K:[])J+=(null!=(S=null==e?void 0:e.price)?S:0)*(null!=(D=null==e?void 0:e.numberOfUnits)?D:1);const X=(null==K?void 0:K.length)>0||J>0;X&&Z&&(Q=`${j("EA4H.General.Added")}, +${J} ${null==U?void 0:U.currency}`);const Y=(0,p.LX)(e)&&e.addOnChargeUnit?(0,g.W6)(e.addOnChargeUnit,j):void 0;return o.createElement(m.VU,{onClick:()=>{z.open({Addon:e})},backgroundUrl:(0,g.tz)(e,H)},o.createElement(d.Ds,null),o.createElement("div",{style:{display:"flex",padding:"25px",flexDirection:"column",width:"100%",color:"#fff",zIndex:1}},o.createElement("div",{style:{marginBottom:"10px"}},o.createElement(i.Q,{style:{color:"inherit"}},null==e?void 0:e.name),o.createElement(c.A,{bold:!0,as:"span",style:{color:"#fff"}},Q,o.createElement(c.A,{style:{color:"#fff"},as:"span"}," "))),o.createElement(c.A,{style:{color:"#fff",marginBottom:"20px"},dangerouslySetInnerHTML:{__html:null!=(G=M?e.description:Boolean(null==(T=null==e?void 0:e.extraInfo)?void 0:T.text)?null==($=null==e?void 0:e.extraInfo)?void 0:$.text:void 0)?G:""},maxLines:3}),o.createElement(u.l,{internalBookingId:t,presentationType:n,addOn:e,label:Q,subLabel:Y?`(${Y})`:void 0}),o.createElement(s.x,{internalBookingId:t,added:X,addedIcon:o.createElement(r.G,{icon:a.LE}),label:X?Q:void 0,addOn:e})))}},52047:function(e,n,t){t.d(n,{a:function(){return f}});var o=t(8051),l=t(12263),a=t(63339),r=t.n(a),d=t(10144),i=t(72),c=t(71216),u=t(40065),s=t(80360),m=t(4665),v=t(59888),g=t(24972),p=t(86041);const f=({categoryName:e,addOns:n,addOnPackages:t,presentationTypeOverride:a})=>{var f;const I=(0,l.Fg)(),y=(0,g.sJ)(p.l);let h=(null==y?void 0:y.searchResultSortOrder)===v.Q7.Price?r()(n,(e=>e.price)):r()(n,(e=>e.rank)),k=(null==y?void 0:y.searchResultSortOrder)===v.Q7.Price?r()(t,(e=>(0,s.SJ)(e)?(0,m.QC)(e):e.cheapestPrice)):r()(t,(e=>e.rank));return(null==(f=I.style)?void 0:f.extrasPresentationType)===v.Rq.List&&a!==v.Rq.Tiles?o.createElement("div",{"data-testid":"optional_addons_list"},Boolean(e)&&o.createElement(u.Y,null,e),o.createElement(c.tg,{className:"list"},k.map((e=>o.createElement(d.i,{key:`${e.addOnPackageId}`,Addon:e}))),h.map((e=>o.createElement(d.i,{key:e.addOnId,Addon:e}))))):o.createElement("div",{"data-testid":"optional_addons_tiles"},Boolean(e)&&o.createElement(u.Y,null,e),o.createElement(c.zM,null,k.map((e=>o.createElement(i.v,{key:`${e.addOnPackageId}`,Addon:e}))),h.map((e=>o.createElement(i.v,{key:e.addOnId,Addon:e})))))}},10144:function(e,n,t){t.d(n,{i:function(){return O}});var o=t(8051),l=t(93806),a=t(24972),r=t(12263),d=t(71566),i=t(82795),c=t(18214),u=t(47833),s=t(56866),m=t(13298),v=t(71216),g=t(17204),p=t(80360),f=t(4665),I=t(32972),y=t(9088),h=t(40387),k=t(87262),E=t(99301),A=t(31646);const O=({Addon:e})=>{var n,t,O,b,P,C,x,w,R,B,S,D;const T=(0,a.sJ)(y.Q),$=(0,a.sJ)(I.o),G=(0,h.H)(),{data:H}=(0,E.E)(),{data:M}=(0,k.K)(),U=(0,r.Fg)(),N=(0,A.Z)(),F=(0,l.useMediaQuery)({query:U.mediaQueries.verySmall}),L=(0,l.useMediaQuery)({query:U.mediaQueries.large}),Z=(0,f.Dc)(e),j=(0,p._o)(e),_=`${null==T?void 0:T.format((0,f.Yk)(e))} ${null==H?void 0:H.currency}`;let z=Z?`${G("EA4H.General.From")} ${_}`:`+${_}`;const W=j?null==(O=null==(t=null==(n=null==M?void 0:M.booking)?void 0:n.bookingData)?void 0:t.optionalAddOnPackages)?void 0:O.filter((n=>n.addOnPackageId===e.addOnPackageId)):[],V=j?[]:null==(C=null==(P=null==(b=null==M?void 0:M.booking)?void 0:b.bookingData)?void 0:P.optionalAddOns)?void 0:C.filter((n=>n.addOnId===e.addOnId));let Q=0;for(const e of null!=(x=null==W?void 0:W.flatMap((e=>e.basketAddOnPriceInfos)))?x:[])(0,f.zL)(e)?Q+=(null!=(w=null==e?void 0:e.price)?w:0)*(null!=(R=null==e?void 0:e.numberOfUnits)?R:1):Q+=null!=(B=null==e?void 0:e.price)?B:0;for(const e of null!=V?V:[])Q+=(null!=(S=null==e?void 0:e.price)?S:0)*(null!=(D=null==e?void 0:e.numberOfUnits)?D:1);Q>0&&Z&&(z=`${G("EA4H.General.Added")}, +${Q} ${null==H?void 0:H.currency}`);const q=(0,p.LX)(e)&&e.addOnChargeUnit?(0,g.W6)(e.addOnChargeUnit,G):void 0;return o.createElement(v.K$,{onClick:()=>{N.open({Addon:e})}},o.createElement("img",{style:{width:"100%",height:L?120:70,objectFit:"cover",borderRadius:U.css.cardBorderRadius},src:(0,g.tz)(e,$)}),o.createElement("div",{style:{gridColumn:2,display:"flex",flexDirection:"column",justifyContent:"space-between",gap:15}},o.createElement("div",null,o.createElement(d.Q,{style:{fontSize:F?U.css.subtitleFontSmaller:U.css.subtitleFontSize}},e.name),e.description&&e.description.length>0?o.createElement(i.A,{style:{marginTop:"10px"}},e.description):null),o.createElement(v.A4,null,o.createElement(s.l,{label:z,addOn:e,subLabel:q?`(${q})`:void 0,subLabelOnNewLine:!0}),o.createElement(m.x,{added:Q>0,addedIcon:o.createElement(u.G,{icon:c.LE,fontSize:"16px"}),label:z,addOn:e}))))}},13298:function(e,n,t){t.d(n,{x:function(){return m}});var o=t(8051),l=t(20399),a=t(63711),r=t(4665),d=t(41347),i=t(40387),c=t(99301),u=t(31646),s=t(98196);const m=(0,o.forwardRef)((({internalBookingId:e,added:n,addedIcon:t,addOn:m,label:v},g)=>{const[p,f]=(0,o.useState)(!1),I=(0,d.g)(),y=(0,i.H)(),{data:h}=(0,c.E)(),k=(0,l.useQueryClient)(),E=(0,u.Z)();if(!(0,r.Dc)(m))return null;return o.createElement(a.z,{"data-testid":"open_addon_modal_button",ref:g,isLoading:p,style:{maxWidth:"unset",display:"flex",gap:"8px",placeContent:"center",alignItems:"center"},onClick:n=>{return t=void 0,o=null,l=function*(){if(n.stopPropagation(),(0,r.Bn)(m))try{f(!0),yield(0,s.K)(I.APIClient,null==h?void 0:h.channelId,m,k)}finally{f(!1)}E.open({Addon:m,internalBookingId:e})},new Promise(((e,n)=>{var a=e=>{try{d(l.next(e))}catch(e){n(e)}},r=e=>{try{d(l.throw(e))}catch(e){n(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((l=l.apply(t,o)).next())}));var t,o,l},selected:n},n&&t,null!=v?v:y("EA4H.General.ReadMoreAndAdd"))}))},71216:function(e,n,t){t.d(n,{A4:function(){return i},K$:function(){return d},VU:function(){return l},tg:function(){return r},zM:function(){return a}});var o=t(12263);const l=o.ZP.div`
    position:relative;
    user-select:none;
    background-image: url(${({backgroundUrl:e})=>e});
    background-position:center;
    background-repeat:none;
    background-size: cover;
    display:flex;
    align-items:end;
    overflow: hidden;
    overflow-wrap: anywhere;
    height:300px;
    cursor: pointer;

    @media ${({theme:e})=>e.mediaQueries.large} {
        aspect-ratio: 1/1;
        height:auto;
    }
    `,a=o.ZP.div`
    display:grid;
    grid-template-columns:1fr;
    gap:20px;

    @media ${({theme:e})=>e.mediaQueries.large} {
        grid-template-columns:1fr 1fr;
    }
`,r=o.ZP.div`
    display:flex;
    flex-direction:column;
    gap:20px;
`,d=o.ZP.div`
    display:grid;
    grid-template-columns: 70px 1fr;
    column-gap: 20px;
    cursor: pointer;

    @media ${({theme:e})=>e.mediaQueries.large} {
        grid-template-columns: 160px 1fr;
    }

    :not(:first-child) {
        border-top: ${({theme:e})=>`${e.css.dividerBorderWidth} solid ${e.css.dividerBorderColor}`};
        padding-top:20px;
    }
`,i=o.ZP.div`
    align-self:start;
    width:100%;
    max-width:250px;

    @media ${({theme:e})=>e.mediaQueries.large} {
        align-self:end;
        max-width:300px;
    }
`},31134:function(e,n,t){t.d(n,{x:function(){return o}});const o=(0,t(24972).cn)({key:"editReservationBookingDataState",default:void 0})},30639:function(e,n,t){t.d(n,{BW:function(){return i},LJ:function(){return d},kw:function(){return c},wC:function(){return r}});var o=t(8051),l=t(75435);function a(e){return String(e).padStart(2,"0")}const r=(e,n)=>{let t=new Intl.DateTimeFormat(e,{month:"short",day:"2-digit"}),o=new Date(n);return t.format(o)+" "+a(o.getUTCHours())+":"+a(o.getUTCMinutes())},d=e=>{const[n,t]=o.useState([]),a=o.useContext(l.z);return o.useEffect((()=>{var n,o,l;let r=[],d=null==(o=null==(n=a.activeBooking.bookingData)?void 0:n.rooms)?void 0:o.find((n=>n.internalBookingId===e));if(d){let e=Array.from(new Set(null==(l=d.mandatoryAddOns)?void 0:l.filter((e=>null!==e.timeSlotInfo&&void 0!==e.timeSlotInfo)).map((e=>e.addOnId)).flatMap((e=>e))));null==e||e.forEach((e=>{var n,t,o,l;let i=null==(n=null==d?void 0:d.mandatoryAddOns)?void 0:n.filter((n=>n.addOnId===e)).map((e=>e.timeSlotInfo)),c=null==(o=null==(t=a.activeBooking.bookingData)?void 0:t.addOnDescriptions)?void 0:o.find((n=>n.id===e)),u=[];null==i||i.forEach((e=>{null!=e&&void 0===u.find((n=>n===e))&&u.push(e)})),r.push({name:null!=(l=null==c?void 0:c.name)?l:"",date:u})}))}t(r)}),[e]),n},i=(e,n)=>{var t,o,l,a,r;let d=null!=(o=null==(t=e.roomConfig)?void 0:t.adults)?o:null==n?void 0:n.filter((n=>{var t;return!n.isChild&&!n.isSharer&&(null==(t=e.guestIds)?void 0:t.includes(n.guestId))})).length;0===d&&(d=2);let i=null==(l=e.roomConfig)?void 0:l.childAges;return null===i&&null===(null==(a=e.roomConfig)?void 0:a.sharerAge)&&(i=null==n?void 0:n.filter((n=>{var t;return(null==(t=e.guestIds)?void 0:t.includes(n.guestId))&&void 0!==n.age&&n.isChild})).map((e=>e.age))),{adults:d,childAges:i,sharerAge:null==(r=e.roomConfig)?void 0:r.sharerAge}},c=({Room:e,ratePlanId:n,paymentPolicyId:t,cancellationPolicyId:o})=>{var l;return null==(l=e.rateAlternatives)?void 0:l.filter((e=>void 0!==e.ratesPerRoomConfig&&e.ratesPerRoomConfig.length>0&&e.rateplanId===n)).flatMap((e=>e.ratesPerRoomConfig)).filter((e=>(null==e?void 0:e.paymentPolicyId)===t)).filter((e=>(null==e?void 0:e.cancellationPolicyId)===o)).filter((e=>!0!==(null==e?void 0:e.isLocked))).filter((e=>void 0!==(null==e?void 0:e.totalPrice)&&void 0!==(null==e?void 0:e.totalPrice.priceInclVAT))).sort(((e,n)=>{var t,o;return(null==(t=null==e?void 0:e.totalPrice)?void 0:t.priceInclVAT)-(null==(o=null==n?void 0:n.totalPrice)?void 0:o.priceInclVAT)}))[0]}},1811:function(e,n,t){t.d(n,{V:function(){return T}});var o=t(8051),l=t(93806),a=t(12263),r=t(20399),d=t(16781),i=t(41237),c=t(82795),u=t(68288),s=t(78331),m=t(75630),v=t(21598),g=t(40901),p=t(80997),f=t(61282),I=t(38033),y=t(78880),h=t(60831),k=t(4386),E=t(39641),A=t(63711),O=t(75435),b=t(4665),P=t(17204),C=t(80360),x=t(24972),w=t(21386),R=t(32972),B=t(40387),S=t(32326),D=t(31646);const T=({Addon:e,Description:n,showOnlyInfo:t,unavailable:T,internalBookingId:$})=>{var G,H;const M=(0,o.useContext)(O.z),U=(0,x.sJ)(R.o),N=(0,x.sJ)(w.g),F=(0,a.Fg)(),L=(0,S.c)(),Z=(0,B.H)(),j=(0,D.Z)(),_=(0,l.useMediaQuery)({query:F.mediaQueries.verySmall}),z=(0,o.useMemo)((()=>new Intl.DateTimeFormat(N,{month:"short",day:"numeric",weekday:"long",year:"numeric"})),[N]),W=(0,r.useIsMutating)(["removingAddonsFromBasket"])>0,V=()=>{"addOnId"in e?(L.removeAddonsFromBasket.mutateAsync({bookingCode:M.originalBooking.bookingCode,requests:[{addOnId:e.addOnId}],waitForNewBasket:!0}),j.close()):"addOnPackageId"in e&&(L.removeAddonsFromBasket.mutateAsync({bookingCode:M.originalBooking.bookingCode,requests:[{addOnPackageId:e.addOnPackageId}],waitForNewBasket:!0}),j.close())};return o.createElement(g.Q,{internalBookingId:$,Addon:e,DateFormatter:z},o.createElement(f.Z,{"data-testid":"addon_modal_base",modalName:"AddonModalBase",onCloseClicked:()=>j.close(),imageCarousel:o.createElement(d.j,{contain:!0,height:_?250:400,images:[{url:(0,P.tz)(e,U)}]}),footer:o.createElement(p.r,{showOnlyInfo:t})},o.createElement(i.Dx,{style:{marginBottom:20,color:"inherit"}},null!=(G=null==n?void 0:n.name)?G:null==e?void 0:e.name),o.createElement(c.A,{style:{marginBottom:20}},null!=(H=null==n?void 0:n.description)?H:e.description),"additionalInfo"in e&&e.additionalInfo&&e.additionalInfo.length>0?o.createElement(c.A,{style:{marginBottom:40},dangerouslySetInnerHTML:{__html:e.additionalInfo}}):null,!t&&o.createElement(o.Fragment,null,!1===(0,b.Dc)(e)?o.createElement(h.L,{Addon:e}):(0,b.Bn)(e)&&(0,C.LX)(e)?o.createElement(y.m,{addOn:e}):(0,b.JS)(e)?o.createElement(m.X,{Addon:e}):(0,b.UB)(e)?o.createElement(v.I,{Date:null,Addon:e}):(0,b.x5)(e)?o.createElement(s.$,{Addon:e}):(0,C.SJ)(e)&&(0,C.qV)(e)?o.createElement(h.L,{Addon:e}):(0,C.SJ)(e)?o.createElement(u.g,{Addon:e}):(0,C.uE)(e)&&(0,C.U_)(e)?o.createElement(m.X,{Addon:e}):(0,C.uE)(e)?o.createElement(I.r,{AddonPackage:e}):(0,b.zL)(e)?o.createElement(u.g,{Addon:e}):o.createElement(h.L,{Addon:e})),T?o.createElement(o.Fragment,null,_?o.createElement(k.K,{align:"center"},o.createElement(c.A,{style:{textAlign:"center"}},Z("EA4H.EditReservation.ContactHotelToUpdateAddOn")),o.createElement(A.z,{onClick:V,isLoading:W},Z("EA4H.General.Remove"))):o.createElement(E.Z,{position:"apart",align:"center",grow:!0},o.createElement(c.A,null,Z("EA4H.EditReservation.ContactHotelToUpdateAddOn")),o.createElement(A.z,{onClick:V,isLoading:W},Z("EA4H.General.Remove")))):null))}},51923:function(e,n,t){t.d(n,{I:function(){return m}});var o=t(8051),l=t(12263),a=t(93806),r=t(75651),d=t(82795),i=t(82422),c=t(80360),u=t(40387),s=t(99301);const m=({onClick:e,isAdded:n,Addon:t,topBorder:m})=>{const v=(0,u.H)(),g=(0,l.Fg)(),p=(0,a.useMediaQuery)({query:g.mediaQueries.verySmall}),{data:f}=(0,s.E)(),I=o.createElement(r.oS,{onClick:e,isAdded:n},o.createElement(i.Z,{isChecked:n}),o.createElement(d.A,{style:{color:"inherit"}},"+","totalPrice_calculated"in t?t.totalPrice_calculated:(0,c.LX)(t)?null!=(y=t.price)?y:0:(0,c._o)(t)&&null!=(k=null==(h=t.connectedAddOns)?void 0:h.map((e=>e.price)).reduce(((e,n)=>e+n)))?k:0," ",null==f?void 0:f.currency));var y,h,k;return p?o.createElement(r.mI,{thinBorder:!0},o.createElement(r.Nh,{style:{flexDirection:"column",alignItems:"stretch",gap:"10px"}},o.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px"}},o.createElement(d.A,null,v("EA4H.General.AddToBooking"))),I)):o.createElement(r.mI,null,o.createElement(r.Nh,{topBorder:m},o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement(d.A,{bold:!0},v("EA4H.General.AddToBooking"))),I))}},52573:function(e,n,t){t.d(n,{M:function(){return s}});var o=t(8051),l=t(82795),a=t(75651),r=t(30510),d=t(80360),i=t(40387),c=t(99301),u=t(59154);const s=({isAdded:e,toggleRoom:n,topBorder:t,Room:s,Addon:m})=>{var v;const g=(0,i.H)(),{data:p}=(0,c.E)(),{data:f}=(0,u.M)(),I=null==(v=null==f?void 0:f.rooms)?void 0:v.find((e=>e.id===s.roomId));return o.createElement(a.mI,null,o.createElement(a.Nh,{topBorder:t},o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement(l.A,{bold:!0},null==I?void 0:I.name),o.createElement(l.A,{small:!0},"(",(0,r.lX)(s,g),")")),o.createElement(a.oS,{onClick:n,isAdded:e},o.createElement("input",{readOnly:!0,checked:e,style:{pointerEvents:"none"},type:"checkbox"}),o.createElement(l.A,{style:{color:"inherit"}},"+",(0,d.LX)(m)&&null!=(y=m.price)?y:0," ",null==p?void 0:p.currency))));var y}},80997:function(e,n,t){t.d(n,{r:function(){return R}});var o=t(8051),l=t(20399),a=t(82795),r=t(20871),d=t(17235),i=t(40901),c=t(75651),u=t(80360),s=t(4665),m=t(24972),v=t(9088),g=t(40387),p=t(87262),f=t(32326),I=t(99301),y=t(66656),h=t(31646),k=t(79660),E=t(75435),A=Object.defineProperty,O=Object.defineProperties,b=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,w=(e,n,t)=>n in e?A(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const R=({showOnlyInfo:e})=>{var n,t,A,R,B,S,D,T,$,G;const[H,M]=(0,o.useState)({show:!1,msg:""}),U=(0,h.Z)(),N=(0,o.useContext)(i.q),F=(0,o.useContext)(E.z),L=(0,m.sJ)(v.Q),{data:Z}=(0,p.K)(),{updateBasketMulti:j}=(0,f.c)(),{data:_}=(0,I.E)(),z=(0,g.H)(),W=(0,l.useIsMutating)("removingAddonsFromBasket")>0,V=(0,l.useIsMutating)("updateBasket")>0,Q=(0,l.useIsFetching)("basket")>0,q=(0,y.o)(),K=W||V||Q,J=null!=(R=null!=(A=null==(n=null==Z?void 0:Z.booking)?void 0:n.bookingCode)?A:null==(t=null==F?void 0:F.activeBooking)?void 0:t.bookingCode)?R:"N/A",X=(0,s.x5)(null==N?void 0:N.Addon)?(0,s.e9)(null==N?void 0:N.Addon,null!=(B=null==N?void 0:N.OnePerRoomData)?B:[],null==N?void 0:N.internalBookingId):(0,s.UB)(null==N?void 0:N.Addon)?(0,s.CO)(null==N?void 0:N.Addon,null!=(S=null==N?void 0:N.ChooseHowManyData)?S:[],null==N?void 0:N.internalBookingId):(0,u.SJ)(null==N?void 0:N.Addon)?(0,s.UH)(null==N?void 0:N.Addon,null!=(D=null==N?void 0:N.ChooseHowManyData)?D:[],null==N?void 0:N.internalBookingId,Z):(0,u._o)(null==N?void 0:N.Addon)?(0,s.tN)(null==N?void 0:N.Addon,N):(0,s.aP)(null==N?void 0:N.Addon,null!=(T=null==N?void 0:N.ChooseHowManyData)?T:[],null==N?void 0:N.internalBookingId,null==(G=null==($=null==Z?void 0:Z.booking)?void 0:$.bookingData)?void 0:G.pricesIncludeVAT),Y=()=>{var e,n;let t=[],o=[],l=[];if((0,s.x5)(null==N?void 0:N.Addon)&&(0,u.LX)(null==N?void 0:N.Addon)){const l=null==N?void 0:N.OnePerRoomData,a=null==N?void 0:N.Addon;t=null!=(e=null==l?void 0:l.filter((e=>e.newValue&&e.newValue!==e.originalValue)).map((e=>{var n;return{addonId:a.addOnId,nrOfUnits:1,price:null!=(n=a.price)?n:0,internalRoomBookingId:e.internalRoomId}})))?e:[],o=null!=(n=null==l?void 0:l.filter((e=>e.newValue!==e.originalValue&&!e.newValue)).map((e=>({addOnId:a.addOnId,internalRoomBookingId:e.internalRoomId}))))?n:[]}else if((0,u._o)(null==N?void 0:N.Addon)&&!(0,s.rd)(null==N?void 0:N.Addon)){let e=null==N?void 0:N.OnePerRoomPackageData;l=e.filter((e=>{var n;return e.newAmount!==e.originalAmount&&(null!=(n=e.newAmount)?n:0)>0})).map((e=>{var n,t;return{addonId:e.addonId,nrOfUnits:e.newAmount,ageGroupId:null!=(n=e.ageGroupId)?n:void 0,date:null!=(t=e.date)?t:void 0,price:e.price,addonPackageId:e.addOnPackageId,internalRoomBookingId:null==N?void 0:N.internalBookingId}})),o=e.filter((e=>e.newAmount!==e.originalAmount&&0===e.newAmount)).map((e=>{var n,t;return{addOnId:e.addonId,date:null!=(n=e.date)?n:void 0,ageGroupId:null!=(t=e.ageGroupId)?t:void 0,addOnPackageId:e.addOnPackageId,internalRoomBookingId:null==N?void 0:N.internalBookingId}}))}else{let e=null==N?void 0:N.ChooseHowManyData;l=e.filter((e=>e.newAmount!==e.originalAmount&&e.newAmount>0)).map((n=>{var t,o,l,a,r,d,i;let c=0;if((0,u.LX)(null==N?void 0:N.Addon)&&(c=(0,s.aP)(null==N?void 0:N.Addon,e,null==N?void 0:N.internalBookingId,null==(o=null==(t=null==Z?void 0:Z.booking)?void 0:t.bookingData)?void 0:o.pricesIncludeVAT)),(0,u._o)(null==N?void 0:N.Addon)&&(c=(0,s.tN)(null==N?void 0:N.Addon,N)),(0,u._o)(null==N?void 0:N.Addon)&&(0,u.SJ)(null==N?void 0:N.Addon)){c=(null!=(r=null==(a=null==(l=null==N?void 0:N.Addon)?void 0:l.connectedAddOns)?void 0:a.map((e=>{var n;return null!=(n=e.price)?n:0})))?r:[0]).reduce(((e,n)=>e+n),0)*n.newAmount}return{addonId:n.addonId,nrOfUnits:n.newAmount,ageGroupId:null!=(d=n.ageGroupId)?d:void 0,date:null!=(i=n.date)?i:void 0,price:c,addonPackageId:n.addOnPackageId,internalRoomBookingId:null==N?void 0:N.internalBookingId}})),o=e.filter((e=>e.newAmount!==e.originalAmount&&0===e.newAmount)).map((e=>{var n,t;return{addOnId:e.addonId,date:null!=(n=e.date)?n:void 0,ageGroupId:null!=(t=e.ageGroupId)?t:void 0,addOnPackageId:e.addOnPackageId,internalRoomBookingId:null==N?void 0:N.internalBookingId}}))}return{addRequests:t,removeRequests:o,updateRequests:l}},ee=Y(),ne=(0,s.Bn)(null==N?void 0:N.Addon)?z("EA4H.General.Close"):(0,k._)([...ee.addRequests,...ee.removeRequests,...ee.updateRequests])?z("EA4H.General.Update"):z("EA4H.General.Close");return o.createElement(d.mz,null,o.createElement(c.VQ,null,!(0,s.Bn)(null==N?void 0:N.Addon)&&(null!=X?X:0)>0&&o.createElement(c.mN,{bold:!0},`${z("EA4H.General.TotalForAddOns")}: \n              +${L.format(null!=X?X:0)} ${null==_?void 0:_.currency}`),o.createElement(r.J,{opened:H.show,onClose:()=>M((e=>{return n=((e,n)=>{for(var t in n||(n={}))C.call(n,t)&&w(e,t,n[t]);if(P)for(var t of P(n))x.call(n,t)&&w(e,t,n[t]);return e})({},e),O(n,b({show:!1}));var n})),position:"top",withArrow:!0,trapFocus:!1,closeOnEscape:!1,transitionProps:{transition:"pop"},width:260,styles:()=>({dropdown:{root:{width:"100%",opacity:K?.5:1,pointerEvents:"none"},body:{pointerEvents:"none"}}})},o.createElement(r.J.Target,null,o.createElement(c.i$,{isLoading:K,onClick:()=>{return n=void 0,t=null,o=function*(){if(e||(0,u.LX)(null==N?void 0:N.Addon)&&(null==N?void 0:N.Addon.hasTimeSlots))return void q.closeAll();const{addRequests:n,removeRequests:t,updateRequests:o}=Y();[n,t,o].every((e=>0===e.length))?U.close():yield j.mutateAsync({addRequests:n,removeRequests:t,updateRequests:o,bookingCode:J,waitForNewBasket:!0,pixelData:{content_name:""}},{onSuccess:()=>U.close(),onError:e=>{let n=e;M({show:!0,msg:"Message"in n?n.Message:"message"in n?n.message:"unknown error"})}})},new Promise(((e,l)=>{var a=e=>{try{d(o.next(e))}catch(e){l(e)}},r=e=>{try{d(o.throw(e))}catch(e){l(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((o=o.apply(n,t)).next())}));var n,t,o}},ne)),o.createElement(r.J.Dropdown,{sx:{pointerEvents:"none"}},o.createElement(a.A,null,H.msg)))))}},40901:function(e,n,t){t.d(n,{Q:function(){return c},q:function(){return i}});var o=t(8051),l=t(75435),a=t(80360),r=t(4665),d=t(87262);const i=(0,o.createContext)({}),c=({DateFormatter:e,Addon:n,children:t,internalBookingId:c})=>{var u,s;const{data:m}=(0,d.K)(),v=(0,o.useContext)(l.z),g=null==(u=null==m?void 0:m.booking)?void 0:u.bookingData,p=null==(s=null==v?void 0:v.originalBooking)?void 0:s.bookingData,[f,I]=(0,o.useState)((function(){var e,t,o,l;if(!(0,r.x5)(n))return[];let d=[];(null==(e=null==g?void 0:g.rooms)?void 0:e.length)&&(null==(t=null==g?void 0:g.rooms)||t.forEach((e=>{var t;const o=(0,a.LX)(n)&&void 0!==(null==(t=null==g?void 0:g.optionalAddOns)?void 0:t.find((t=>t.internalRoomBookingId===e.internalBookingId&&t.addOnId===n.addOnId&&t.price===n.price)));d.push({internalRoomId:e.internalBookingId,originalValue:o,newValue:o})})));p&&(null==(o=null==p?void 0:p.rooms)?void 0:o.length)&&(null==(l=null==p?void 0:p.rooms)||l.forEach((e=>{var t;const o=(0,a.LX)(n)&&void 0!==(null==(t=null==g?void 0:g.optionalAddOns)?void 0:t.find((t=>t.internalRoomBookingId===e.internalBookingId&&t.addOnId===n.addOnId&&t.price===n.price)));d.push({internalRoomId:e.internalBookingId,originalValue:o,newValue:o})})));return d})),[y,h]=(0,o.useState)((function(){var e,n,t,o;const l=[];null==(e=null==g?void 0:g.optionalAddOns)||e.forEach((e=>{var n,t;l.push({date:null!=(n=e.date)?n:null,ageGroupId:null!=(t=e.ageGroupId)?t:null,addonId:e.addOnId,originalAmount:e.numberOfUnits,newAmount:e.numberOfUnits,internalRoomId:e.internalRoomBookingId})})),null==(n=null==g?void 0:g.optionalAddOnPackages)||n.forEach((e=>{var n,t,o,a,r,d;if(e.dynamic){const a=null==(n=e.basketAddOnPriceInfos)?void 0:n[0];l.push({addonId:null==a?void 0:a.addOnId,originalAmount:null==a?void 0:a.numberOfUnits,newAmount:null!=(t=null==a?void 0:a.numberOfUnits)?t:0,addOnPackageId:e.addOnPackageId,date:null==a?void 0:a.date,ageGroupId:null!=(o=null==a?void 0:a.ageGroupId)?o:null,internalRoomId:null==a?void 0:a.internalRoomBookingId})}else{const n=null==(a=e.basketAddOnPriceInfos)?void 0:a[0];l.push({originalAmount:null==n?void 0:n.numberOfUnits,newAmount:null!=(r=null==n?void 0:n.numberOfUnits)?r:0,addOnPackageId:e.addOnPackageId,date:null==n?void 0:n.date,ageGroupId:null!=(d=null==n?void 0:n.ageGroupId)?d:null,internalRoomId:null==n?void 0:n.internalRoomBookingId})}})),!v.isEditMode&&p&&(null==(t=null==p?void 0:p.optionalAddOns)||t.forEach((e=>{var n,t;l.push({date:null!=(n=e.date)?n:null,ageGroupId:null!=(t=e.ageGroupId)?t:null,addonId:e.addOnId,originalAmount:e.numberOfUnits,newAmount:e.numberOfUnits,internalRoomId:e.internalRoomBookingId})})),null==(o=null==p?void 0:p.optionalAddOnPackages)||o.forEach((e=>{var n,t,o,a,r,d;if(e.dynamic){const a=null==(n=e.basketAddOnPriceInfos)?void 0:n[0];l.push({addonId:null==a?void 0:a.addOnId,originalAmount:null==a?void 0:a.numberOfUnits,newAmount:null!=(t=null==a?void 0:a.numberOfUnits)?t:0,addOnPackageId:e.addOnPackageId,date:null==a?void 0:a.date,ageGroupId:null!=(o=null==a?void 0:a.ageGroupId)?o:null,internalRoomId:null==a?void 0:a.internalRoomBookingId})}else{const n=null==(a=e.basketAddOnPriceInfos)?void 0:a[0];l.push({originalAmount:null==n?void 0:n.numberOfUnits,newAmount:null!=(r=null==n?void 0:n.numberOfUnits)?r:0,addOnPackageId:e.addOnPackageId,date:null==n?void 0:n.date,ageGroupId:null!=(d=null==n?void 0:n.ageGroupId)?d:null,internalRoomId:null==n?void 0:n.internalRoomBookingId})}})));return l})),[k,E]=(0,o.useState)((function(){var e,t,o;let l=[];if(!(0,a._o)(n))return[];const d=null!=(t=null==(e=null==g?void 0:g.optionalAddOnPackages)?void 0:e.filter((e=>e.addOnPackageId===n.addOnPackageId)).flatMap((e=>{var n;return null!=(n=e.basketAddOnPriceInfos)?n:[]})))?t:[],i=p?null==(o=null==p?void 0:p.optionalAddOnPackages)?void 0:o.filter((e=>e.addOnPackageId===n.addOnPackageId)).flatMap((e=>{var n;return null!=(n=e.basketAddOnPriceInfos)?n:[]})):[];(0,r.xC)(n)?(d.forEach((e=>{l.push({internalRoomId:e.internalRoomBookingId,originalAmount:e.numberOfUnits,hasChanged:!1,newAmount:e.numberOfUnits,addonId:e.addOnId,addOnPackageId:n.addOnPackageId,price:e.price})})),i&&i.forEach((e=>{l.push({internalRoomId:e.internalRoomBookingId,originalAmount:e.numberOfUnits,hasChanged:!1,newAmount:e.numberOfUnits,addonId:e.addOnId,addOnPackageId:n.addOnPackageId,price:e.price})}))):(d.forEach((e=>{l.find((n=>n.addonId===e.addOnId&&n.guestId===e.guestId))||l.push({internalRoomId:e.internalRoomBookingId,originalAmount:e.numberOfUnits,hasChanged:!1,newAmount:e.numberOfUnits,addonId:e.addOnId,addOnPackageId:n.addOnPackageId,price:e.price})})),i&&i.forEach((e=>{l.find((n=>n.addonId===e.addOnId&&n.guestId===e.guestId))||l.push({internalRoomId:e.internalRoomBookingId,originalAmount:e.numberOfUnits,hasChanged:!1,newAmount:e.numberOfUnits,addonId:e.addOnId,addOnPackageId:n.addOnPackageId,price:e.price})})));return l}));return o.createElement(i.Provider,{value:{Addon:n,OnePerRoomData:f,ChooseHowManyData:y,SetChooseHowManyData:h,SetOnePerRoomData:I,DateFormatter:e,SetOnePerRoomPackageData:E,OnePerRoomPackageData:k,internalBookingId:c}},t)}},639:function(e,n,t){t.d(n,{I:function(){return g}});var o=t(8051),l=t(66656),a=t(7402),r=t(61282),d=t(63711),i=t(17235),c=t(72),u=t(71216),s=t(40387),m=t(30686),v=t(87262);const g=({internalBookingId:e})=>{const n=(0,l.o)(),t=()=>n.closeModal("availableAddonsModal");return o.createElement(r.Z,{onCloseClicked:t,modalName:"AvailableAddonsModal",footer:o.createElement(I,{onButtonClicked:t})},o.createElement(o.Suspense,{fallback:o.createElement(f,null)},o.createElement(p,{internalBookingId:e})))},p=({internalBookingId:e})=>{var n,t,l;const{data:a}=(0,v.K)(),{data:r}=(0,m.H)(null==(n=null==a?void 0:a.booking)?void 0:n.bookingCode);return o.createElement(u.zM,null,null==(t=null==r?void 0:r.optionalAddons)?void 0:t.map((n=>o.createElement(c.v,{internalBookingId:e,Addon:n}))),null==(l=null==r?void 0:r.optionalAddOnPackages)?void 0:l.map((n=>o.createElement(c.v,{internalBookingId:e,Addon:n}))))},f=()=>o.createElement(u.zM,null,new Array(8).fill(null).map((e=>o.createElement(a.c,null,o.createElement(u.VU,null))))),I=({onButtonClicked:e})=>{const n=(0,s.H)();return o.createElement(i.mz,{style:{zIndex:9}},o.createElement(d.z,{onClick:e,style:{marginRight:"40px",maxWidth:"max-content",minWidth:"150px",padding:"0 25px"}},n("EA4H.General.Done")))}},68288:function(e,n,t){t.d(n,{g:function(){return k}});var o=t(8051),l=t(12263),a=t(93806),r=t(41237),d=t(82795),i=t(75651),c=t(47833),u=t(69243),s=t(29439),m=t(40901),v=t(80360),g=t(4665),p=t(59888),f=t(24972),I=t(9088),y=t(40387),h=t(99301);const k=({IsInPackage:e,topBorder:n,Label:t,AgeGroup:k,Addon:E,Date:A,onChange:O})=>{var b,P,C,x,w,R,B,S;const D=(0,o.useContext)(m.q),T=(0,f.sJ)(I.Q),{data:$}=(0,h.E)(),G=(0,l.Fg)(),H=(0,y.H)(),M=null==(b=null==D?void 0:D.ChooseHowManyData)?void 0:b.filter((n=>e?n.addOnPackageId===e.addOnPackageId:(0,v._o)(E)?E.addOnPackageId===n.addOnPackageId:void 0===n.addOnPackageId)).filter((e=>e.internalRoomId==D.internalBookingId)).find((e=>{var n;return!(null!=A&&e.date!=A||void 0!==k&&e.ageGroupId!=(null==k?void 0:k.ageGroupId)||e.addonId!==(null!=(n=E.addOnId)?n:void 0))})),U=(0,a.useMediaQuery)({query:G.mediaQueries.verySmall}),N=n=>{null==O||O(),(0,v.LX)(E)?null==D||D.SetChooseHowManyData((t=>{var o,l,a,r;return[...t.filter((e=>!!(e.addonId!==E.addOnId||void 0!==k&&e.ageGroupId!=(null==k?void 0:k.ageGroupId)||void 0!==A&&e.date!==A))),{addonId:E.addOnId,newAmount:"increase"===n?(null!=(o=null==M?void 0:M.newAmount)?o:0)+1:(null!=(l=null==M?void 0:M.newAmount)?l:0)<1?0:(null!=(a=null==M?void 0:M.newAmount)?a:0)-1,ageGroupId:null==k?void 0:k.ageGroupId,date:A,addOnPackageId:null==e?void 0:e.addOnPackageId,originalAmount:null!=(r=null==M?void 0:M.originalAmount)?r:0,internalRoomId:null==D?void 0:D.internalBookingId}]})):(0,v.SJ)(E)&&(null==D||D.SetChooseHowManyData((e=>{var t,o,l,a;return[...e.filter((e=>!(e.addOnPackageId===E.addOnPackageId&&e.ageGroupId==(null==k?void 0:k.ageGroupId)&&e.date==A))),{newAmount:"increase"===n?(null!=(t=null==M?void 0:M.newAmount)?t:0)+1:(null!=(o=null==M?void 0:M.newAmount)?o:0)<1?0:(null!=(l=null==M?void 0:M.newAmount)?l:0)-1,ageGroupId:null==k?void 0:k.ageGroupId,date:A,addOnPackageId:null==E?void 0:E.addOnPackageId,originalAmount:null!=(a=null==M?void 0:M.originalAmount)?a:0,internalRoomId:D.internalBookingId}]})))},F=()=>{var n,t,o,l,a,r,d,i,c,u,s,m,f;if((0,v.LX)(E)){if(E.isUnitPrice&&E.addOnPriceTimeUnit===p.TX.FixedPrice)return null!=(n=E.price)?n:0;if(E.addOnPriceTimeUnit===p.TX.FixedPrice&&!E.isUnitPrice)return null!=(l=null==(o=null==(t=E.addOnPriceInfo)?void 0:t.find((e=>e.ageGroupId===(null==k?void 0:k.ageGroupId))))?void 0:o.price)?l:0;if((E.isUnitPrice||void 0!==e)&&E.addOnPriceTimeUnit===p.TX.PricePerDay)return k?null!=(d=null==(r=null==(a=E.addOnPriceInfo)?void 0:a.find((e=>e.date===A&&e.ageGroupId===(null==k?void 0:k.ageGroupId))))?void 0:r.price)?d:0:null!=(u=null==(c=null==(i=E.addOnPriceInfo)?void 0:i.find((e=>e.date===A&&null===e.ageGroupId)))?void 0:c.price)?u:0;if(!E.isUnitPrice&&E.addOnPriceTimeUnit===p.TX.PricePerDay)return null!=(f=null==(m=null==(s=E.addOnPriceInfo)?void 0:s.find((e=>e.ageGroupId===(null==k?void 0:k.ageGroupId)&&e.date===A)))?void 0:m.price)?f:0}return(0,v.SJ)(E)?(0,g.QC)(E):0},L=!k&&!e,Z=o.createElement(i.c8,{style:{margin:0},amount:null!=(P=null==M?void 0:M.newAmount)?P:0},o.createElement(i.AU,{currentAmount:null!=(C=null==M?void 0:M.newAmount)?C:0,onClick:()=>N("decrease")},o.createElement(c.G,{icon:u.Kl})),o.createElement(i.ks,{currentAmount:null!=(x=null==M?void 0:M.newAmount)?x:0},(null!=(w=null==M?void 0:M.newAmount)?w:0)>0&&o.createElement(d.A,{style:{color:"inherit"}},"x",null==M?void 0:M.newAmount),o.createElement(d.A,{bold:!0,style:{color:(null!=(R=null==M?void 0:M.newAmount)?R:0)>0?G.css.selectedDarkFontColor:G.css.inputColor},as:"span"},"  ",F()*(null!=(B=null==M?void 0:M.newAmount)?B:0)," ",null==$?void 0:$.currency)),o.createElement(i.AU,{currentAmount:null!=(S=null==M?void 0:M.newAmount)?S:0,onClick:()=>N("increase")},o.createElement(c.G,{icon:s.r8})));return U?o.createElement(i.mI,{asCard:L,thinBorder:!0},o.createElement(i.Nh,{style:{flexDirection:"column",alignItems:"stretch",gap:"10px"}},o.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px"}},o.createElement(r.SK,null,null!=t?t:H("EA4H.General.ChooseHowMany")),o.createElement(r.SK,null,H("EA4H.General.For")," ",null==T?void 0:T.format(F())," ",null==$?void 0:$.currency)),Z)):o.createElement(i.mI,{asCard:L,lightBorder:void 0!==e},o.createElement(i.Nh,{topBorder:n},o.createElement(r.SK,{bold:!0},null!=t?t:H("EA4H.General.ChooseHowMany")),o.createElement(i.VY,null,o.createElement(r.SK,null,H("EA4H.General.For")," ",null==T?void 0:T.format(F())," ",null==$?void 0:$.currency),Z)))}},38033:function(e,n,t){t.d(n,{r:function(){return E}});var o=t(8051),l=t(12263),a=t(93806),r=t(68288),d=t(21598),i=t(41237),c=t(82795),u=t(40901),s=t(78462),m=t(47833),v=t(51092),g=t(67077),p=t(75651),f=t(4665),I=t(40387),y=t(99301),h=t(63339),k=t.n(h);const E=({AddonPackage:e,Date:n})=>{const{data:t}=(0,y.E)(),[i,h]=(0,o.useState)(),E=(0,o.useContext)(u.q),O=(0,I.H)(),b=(0,l.Fg)(),P=(0,a.useMediaQuery)({query:b.mediaQueries.verySmall}),C=k()(e.connectedAddOns,(e=>{var n;return null!=(n=e.price)?n:0}));return o.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"3px",userSelect:"none"}},C.map((l=>{var a,u,I,y,k,C,x;const w=i===l.addOnId,R=(0,f.So)(e,l,E,n),B=(0,f.ir)(e,l,E,n);let S,D,T=1/0;return 0===(null!=(a=l.addOnPriceInfo)?a:[]).length||0===(null==(u=l.addOnPriceInfo)?void 0:u[0].availability)?T=0:(null!=(k=null==(y=null==(I=l.addOnPriceInfo)?void 0:I[0])?void 0:y.availability)?k:0)>0&&(T=null==(C=l.addOnPriceInfo)?void 0:C[0].availability),void 0!==n&&void 0===(null==(x=l.addOnPriceInfo)?void 0:x.find((e=>e.date===n)))&&(T=0),0===R||void 0===R&&T>1?(S=O("EA4H.General.From"),D=`${l.price} ${null==t?void 0:t.currency}`):(S=O("EA4H.General.Selected"),D=`+${B} ${null==t?void 0:t.currency}`),o.createElement("div",{key:l.addOnId,style:{color:b.css.cardColor}},o.createElement(g.b,{disabled:0===T,amount:null!=R?R:0,expanded:w,onClick:()=>{T>0&&h((e=>e===l.addOnId?void 0:l.addOnId))}},(null!=R?R:0)>0&&o.createElement("div",{style:{opacity:.5,position:"absolute",width:"1px",background:"currentColor",left:"49px",top:"10px",bottom:"10px",zIndex:1}}),o.createElement("div",{style:{padding:"10px 0px",marginLeft:"20px",zIndex:1}},o.createElement(c.A,{bold:!0,style:{color:"inherit"}},l.name),P&&o.createElement("div",null,o.createElement(c.A,{style:{color:"inherit"}},S," ",o.createElement("span",{style:{fontWeight:b.css.bodyBoldFontWeight}},D)),0===T&&o.createElement(c.A,{offer:!0},O("EA4H.General.NothingAvailable")))),!P&&o.createElement("span",{style:{zIndex:1,justifySelf:"end",marginRight:"20px",display:"grid",textAlign:"right"}},0===T&&o.createElement(c.A,{offer:!0},O("EA4H.General.NothingAvailable")),o.createElement(p.a_,{slideDirection:0===R||void 0===R&&T>1?"in":"out"},o.createElement(c.A,{style:{color:"inherit"},as:"span"},O("EA4H.General.From"))," ",o.createElement(c.A,{style:{color:"inherit"},bold:!0,as:"span"},l.price," ",null==t?void 0:t.currency)),o.createElement(p.a_,{slideDirection:(null!=R?R:0)>0?"in":"out"},o.createElement("div",{style:{display:"flex",alignItems:"end"}},o.createElement(m.G,{style:{alignSelf:"center",marginRight:"10px",height:"20px"},icon:v.LE}),o.createElement(c.A,{bold:!0,as:"span",style:{color:"inherit"}},O("EA4H.General.Selected")," +",B," ",null==t?void 0:t.currency))))),o.createElement(s.U,{in:i===l.addOnId},o.createElement("div",{style:{borderBottomLeftRadius:b.css.cardBorderRadius,borderBottomRightRadius:b.css.cardBorderRadius,overflow:"hidden",border:`${b.css.cardBorderWidth} solid ${b.css.cardBorderColor}`,borderTop:0}},(0,f.rd)(e)&&(0,f.UB)(l)?o.createElement(d.I,{Date:n,Addon:l,IsInPackage:e}):(0,f.rd)(e)?o.createElement(r.g,{Date:n,Addon:l,IsInPackage:e}):o.createElement(A,{Addon:l,AddonPackage:e}))))})))},A=({AddonPackage:e,Addon:n})=>{var t,r;const d=(0,I.H)(),{data:c}=(0,y.E)(),s=(0,o.useContext)(u.q),m=(0,l.Fg)(),v=null==(t=null==s?void 0:s.OnePerRoomPackageData)?void 0:t.find((t=>t.addOnPackageId===e.addOnPackageId&&t.addonId===n.addOnId)),g=(0,a.useMediaQuery)({query:m.mediaQueries.verySmall}),h=()=>((0,f.dP)(e)||(0,f.xC)(e),n.price),k=void 0!==v&&(null!=(r=v.newAmount)?r:0)>0,E=o.createElement(p.oS,{onClick:()=>{null==s||s.SetOnePerRoomPackageData((t=>{var o;const l=t.find((t=>t.addOnPackageId===e.addOnPackageId&&t.addonId===n.addOnId));return[...t.filter((t=>!(t.addOnPackageId===e.addOnPackageId&&t.addonId===n.addOnId))),{addonId:n.addOnId,addOnPackageId:e.addOnPackageId,newAmount:void 0===l||0===(null==l?void 0:l.newAmount)?1:0,price:h(),originalAmount:null!=(o=null==l?void 0:l.originalAmount)?o:0,hasChanged:(null==l?void 0:l.originalAmount)!==(null==l?void 0:l.newAmount)}]}))},isAdded:k},o.createElement("input",{readOnly:!0,checked:k,style:{pointerEvents:"none"},type:"checkbox"}),o.createElement(i.SK,{style:{color:"inherit"}},"+",h()," ",null==c?void 0:c.currency));return g?o.createElement(p.mI,{thinBorder:!0},o.createElement(p.Nh,{style:{flexDirection:"column",alignItems:"stretch",gap:"10px"}},o.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px"}},o.createElement(i.SK,null,d("EA4H.General.AddToBooking")," (",e.chargeUnit,")")),E)):o.createElement(p.mI,null,o.createElement(p.Nh,null,o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement(i.SK,{bold:!0},d("EA4H.General.AddToBooking")," (",e.chargeUnit,")")),E))}},67077:function(e,n,t){t.d(n,{b:function(){return c}});var o=t(8051),l=t(12263),a=t(75651),r=t(69243),d=t(29439),i=t(47833);const c=({disabled:e,onClick:n,children:t,expanded:c,amount:u})=>{const s=(0,l.Fg)();return o.createElement(a.$W,{isExpanded:c,disabled:e,amount:u,onClick:n},o.createElement("div",{style:{width:"50px",height:"50px",display:"grid",placeContent:"center",color:"#fff"}},o.createElement(i.G,{style:{color:u>0?s.css.selectedDarkFontColor:s.css.accentDarkFontColor,position:"relative",width:"16px",height:"16px"},icon:c?r.Kl:d.r8})),t)}},4665:function(e,n,t){t.d(n,{Bn:function(){return d},CO:function(){return E},Dc:function(){return v},JS:function(){return i},QC:function(){return y},So:function(){return p},UB:function(){return c},UH:function(){return h},Yk:function(){return g},aP:function(){return A},dP:function(){return s},e9:function(){return I},ir:function(){return f},rd:function(){return r},tN:function(){return k},x5:function(){return u},xC:function(){return m},zL:function(){return a}});var o=t(59888),l=t(80360);const a=e=>"addOnChargeUnit"in e?e.addOnChargeUnit===o.nO.OptionalNumberOfUnits:"optionalAddOnChargeUnit"in e&&e.optionalAddOnChargeUnit===o.nO.OptionalNumberOfUnits,r=e=>(0,l._o)(e)?e.chargeUnit===o.nO.OptionalNumberOfUnits:e.optionalChargeUnit===o.nO.OptionalNumberOfUnits,d=e=>(0,l.LX)(e)&&!0===e.hasTimeSlots,i=e=>(0,l.LX)(e)&&e.addOnPriceTimeUnit===o.TX.PricePerDay,c=e=>(0,l.LX)(e)&&!1===e.isUnitPrice,u=e=>(0,l.LX)(e)&&e.addOnChargeUnit===o.nO.OptionalOnePerRoom&&e.isUnitPrice&&e.addOnPriceTimeUnit===o.TX.FixedPrice,s=e=>(0,l._o)(e)&&e.chargeUnit===o.nO.OnePerRoom,m=e=>(0,l._o)(e)&&e.chargeUnit===o.nO.OnePerGuestAndDay,v=e=>(0,l.LX)(e)&&e.addOnChargeUnit===o.nO.OptionalNumberOfUnits||(0,l.LX)(e)&&e.addOnChargeUnit===o.nO.OptionalOnePerRoom||(0,l.LX)(e)&&e.addOnChargeUnit===o.nO.OnePerGuest&&!e.isUnitPrice&&e.addOnPriceTimeUnit!==o.TX.FixedPrice||(0,l._o)(e)&&e.chargeUnit===o.nO.OptionalNumberOfUnits||(0,l._o)(e)&&e.dynamic||(0,l._o)(e)&&e.priceTimeunit!==o.TX.FixedPrice,g=e=>{var n,t;return(0,l.LX)(e)?null!=(n=e.price)?n:0:(0,l.SJ)(e)?y(e):(0,l._o)(e)&&null!=(t=e.cheapestPrice)?t:0},p=(e,n,t,o)=>{if(r(e)){const l=null==t?void 0:t.ChooseHowManyData.filter((l=>l.addOnPackageId===e.addOnPackageId&&l.internalRoomId==t.internalBookingId&&l.addonId===n.addOnId&&(void 0===l.date||null===l.date||l.date===o)));let a=0;return l.forEach((e=>{a+=e.newAmount})),a}{const l=null==t?void 0:t.OnePerRoomPackageData.find((l=>l.addOnPackageId===e.addOnPackageId&&l.addonId===n.addOnId&&l.internalRoomId==t.internalBookingId&&(void 0===l.date||null===l.date||l.date===o)));return null==l?void 0:l.newAmount}},f=(e,n,t,o)=>{var l,a;if(r(e)){const l=null==t?void 0:t.ChooseHowManyData.filter((l=>l.addOnPackageId===e.addOnPackageId&&l.internalRoomId==t.internalBookingId&&l.addonId===n.addOnId&&(void 0===l.date||null===l.date||l.date===o)));let a=0;return l.forEach((n=>{var t,l,r;const d=null==(t=e.connectedAddOns)?void 0:t.find((e=>e.addOnId===n.addonId));let i=null!=(l=null==d?void 0:d.price)?l:0,c=null==(r=null==d?void 0:d.addOnPriceInfo)?void 0:r.find((e=>e.ageGroupId==n.ageGroupId&&e.date===o));void 0!==(null==c?void 0:c.price)?i=c.price*n.newAmount:i*=n.newAmount,a+=i})),a}{const r=null==t?void 0:t.OnePerRoomPackageData.find((l=>l.addOnPackageId===e.addOnPackageId&&l.internalRoomId==t.internalBookingId&&l.addonId===n.addOnId&&(void 0===l.date||null===l.date||l.date===o)));return(null!=(l=null==r?void 0:r.newAmount)?l:0)*(null!=(a=n.price)?a:0)}},I=(e,n,t)=>{var o;return n.filter((e=>e.newValue&&e.internalRoomId==t)).length*(null!=(o=e.price)?o:0)},y=e=>{var n,t;return(null!=(t=null==(n=e.connectedAddOns)?void 0:n.map((e=>{var n;return null!=(n=e.price)?n:0})))?t:[0]).reduce(((e,n)=>e+n),0)},h=(e,n,t,l)=>{var a,r,d,i,c,u,s,m;if(e.chargeUnit===o.nO.OnePerBooking){return(null==(d=null==(r=null==(a=null==l?void 0:l.booking)?void 0:a.bookingData)?void 0:r.optionalAddOnPackages)?void 0:d.find((n=>n.addOnPackageId===e.addOnPackageId&&n.internalRoomId===t)))?null==(i=e.connectedAddOns)?void 0:i.map((e=>e.price)).reduce(((e,n)=>e+n),0):0}const v=(null!=(u=null==(c=null==e?void 0:e.connectedAddOns)?void 0:c.map((e=>{var n;return null!=(n=e.price)?n:0})))?u:[0]).reduce(((e,n)=>e+n),0),g=null==n?void 0:n.filter((n=>n.addOnPackageId===e.addOnPackageId&&n.internalRoomId===t));return v*(null!=(m=null==(s=null==g?void 0:g[0])?void 0:s.newAmount)?m:0)},k=(e,n)=>{if(r(e)){const t=n.ChooseHowManyData.filter((t=>t.addOnPackageId===e.addOnPackageId&&t.internalRoomId==n.internalBookingId));let o=0;return t.forEach((n=>{var t,l,a;const r=null==(t=e.connectedAddOns)?void 0:t.find((e=>e.addOnId===n.addonId));let d=null==(l=null==r?void 0:r.addOnPriceInfo)?void 0:l.find((e=>e.ageGroupId==n.ageGroupId&&e.date===n.date)),i=null!=(a=null==r?void 0:r.price)?a:0;void 0!==(null==d?void 0:d.price)?i=d.price*n.newAmount:i*=n.newAmount,o+=i})),o}return m(e),n.OnePerRoomPackageData.filter((e=>1===e.newAmount)).reduce(((e,n)=>{var t;return e+(null!=(t=n.price)?t:0)}),0)},E=(e,n,t)=>{var o;const l=[...new Set(null==(o=n.filter((n=>!n.addOnPackageId&&n.addonId===e.addOnId&&n.internalRoomId==t&&n.newAmount>0)))?void 0:o.flatMap((e=>({ageGroupId:e.ageGroupId,amount:e.newAmount}))))];let a=0;return l.forEach((n=>{var t,o;const l=null==(t=e.addOnPriceInfo)?void 0:t.find((e=>e.ageGroupId==n.ageGroupId));a+=(null!=(o=null==l?void 0:l.price)?o:0)*n.amount})),a},A=(e,n,t,o)=>{const l=n.filter((n=>n.addonId===e.addOnId&&!n.addOnPackageId&&n.internalRoomId==t));let a=0;return l.forEach((n=>{var t,l,r;if("vatAmount"in e){let l=o?null==e?void 0:e.price:e.price-(null!=(t=e.vatAmount)?t:0);l*=n.newAmount,a+=l}else if("addOnPriceInfo"in e){let t=null==(l=null==e?void 0:e.addOnPriceInfo)?void 0:l.find((e=>e.ageGroupId==n.ageGroupId&&e.date===n.date)),o=null!=(r=null==e?void 0:e.price)?r:0;void 0!==(null==t?void 0:t.price)?o=t.price*n.newAmount:o*=n.newAmount,a+=o}})),a}},18360:function(e,n,t){var o=t(8051),l=t(61282),a=t(17921),r=t(19961),d=t(41237),i=t(7402),c=t(81166),u=t(40387),s=t(31796);n.Z=({internalRoomIds:e})=>{const n=(0,u.H)(),t=(0,s.Z)();return o.createElement(l.Z,{modalName:"MandatoryAddonTimeSlots",onCloseClicked:()=>t.close(),footer:o.createElement(r.q,{onClose:()=>t.close()})},o.createElement(d.Dx,{style:{color:"inherit"}},n("EA4H.General.ChooseAlternative")),o.createElement(a.T,{h:"xs"}),o.createElement(o.Suspense,{fallback:o.createElement(i.c,{style:{width:"100%",height:"500px"}})},o.createElement(c.Z,{internalRoomIds:e})))}},88087:function(e,n,t){var o=t(8051),l=t(61282),a=t(17235),r=t(41237),d=t(7402),i=t(82795),c=t(63711),u=t(17921),s=t(10335),m=t(24972),v=t(9088),g=t(35262),p=t(40387),f=t(25581);n.Z=({internalRoomBookingId:e})=>{const[n,t]=(0,o.useState)(0),I=(0,m.sJ)(g.u),y=(0,m.sJ)(v.Q),h=(0,f.Z)(),k=(0,p.H)();return o.createElement(l.Z,{modalName:"MandatoryDynamicAddonPackages",onCloseClicked:()=>h.close(),footer:o.createElement(a.mz,null,o.createElement(i.A,{bold:!0,style:{color:"inherit"}},`${k("EA4H.EditReservation.TotalForAlternatives")}: +${y.format(n)} ${null==I?void 0:I.currency}`),o.createElement(c.z,{inFooter:!0,onClick:e=>{e.preventDefault(),h.close()}},k("EA4H.General.Close")))},o.createElement(r.Dx,{style:{color:"inherit"}},k("EA4H.General.ChooseAlternative")),o.createElement(u.T,{h:"xs"}),o.createElement(o.Suspense,{fallback:o.createElement(d.c,{style:{width:"100%",height:"500px"}})},o.createElement(s.Z,{internalRoomIds:[e],setTotalAmountForModal:e=>{var n,o;if(void 0===e)return 0;let l=null!=(o=null==(n=null==e?void 0:e.flatMap((e=>{var n,t;return null==(t=null==(n=e.addOnPackageConnectedAddOn)?void 0:n.filter((e=>e.selected&&void 0!==e.priceDisplay)))?void 0:t.map((e=>{var n;return null!=(n=e.priceDisplay)?n:0}))})))?void 0:n.reduce(((e,n)=>(null!=e?e:0)+(null!=n?n:0)),0))?o:0;t(l)}})))}},60831:function(e,n,t){t.d(n,{L:function(){return c}});var o=t(8051),l=t(51923),a=t(80360),r=t(87262),d=t(32326),i=t(75435);const c=({Addon:e})=>{var n,t,c,u,s,m;const{data:v}=(0,r.K)(),g=(0,o.useContext)(i.z),{updateBasket:p,removeAddonsFromBasket:f}=(0,d.c)(),[I,y]=(0,o.useState)();let h=!1;h=(0,a._o)(e)?Boolean(null==(c=null==(t=null==(n=null==v?void 0:v.booking)?void 0:n.bookingData)?void 0:t.optionalAddOnPackages)?void 0:c.some((n=>n.addOnPackageId===e.addOnPackageId))):Boolean(null==(m=null==(s=null==(u=null==v?void 0:v.booking)?void 0:u.bookingData)?void 0:s.optionalAddOns)?void 0:m.some((n=>n.addOnId===e.addOnId)));const k="removing"!==I&&(h||"adding"===I);return o.createElement(o.Fragment,null,o.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"5px"}},o.createElement(l.I,{onClick:()=>{return n=void 0,t=null,o=function*(){var n,t,o,l,r;if(void 0!==I)return;const d=null!=(l=null!=(o=null==(n=null==v?void 0:v.booking)?void 0:n.bookingCode)?o:null==(t=null==g?void 0:g.activeBooking)?void 0:t.bookingCode)?l:"N/A";try{h?(y("removing"),yield null==f?void 0:f.mutateAsync({bookingCode:d,requests:(0,a.LX)(e)?[{addOnId:e.addOnId}]:(0,a._o)(e)?[{addOnPackageId:e.addOnPackageId}]:[],waitForNewBasket:!0})):(y("adding"),yield p.mutateAsync({request:{bookingCode:d,addAddonsToBasket:"totalPrice_calculated"in e?[{addonId:e.addOnId,price:e.totalPrice_calculated,nrOfUnits:1}]:(0,a.LX)(e)?[{addonId:e.addOnId,price:e.price,nrOfUnits:1}]:(0,a._o)(e)?[{addonPackageId:e.addOnPackageId,nrOfUnits:1,price:null==(r=e.connectedAddOns)?void 0:r.map((e=>e.price)).reduce(((e,n)=>e+n),0)}]:[]},waitForNewBasket:!0,pixelData:{content_name:"",value:""}}))}finally{y(void 0)}},new Promise(((e,l)=>{var a=e=>{try{d(o.next(e))}catch(e){l(e)}},r=e=>{try{d(o.throw(e))}catch(e){l(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((o=o.apply(n,t)).next())}));var n,t,o},isAdded:k,Addon:e})))}},78331:function(e,n,t){t.d(n,{$:function(){return I}});var o=t(8051),l=t(52573),a=t(40901),r=t(24972),d=t(31134),i=t(87262),c=Object.defineProperty,u=Object.defineProperties,s=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,p=(e,n,t)=>n in e?c(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,f=(e,n)=>{for(var t in n||(n={}))v.call(n,t)&&p(e,t,n[t]);if(m)for(var t of m(n))g.call(n,t)&&p(e,t,n[t]);return e};const I=({Addon:e})=>{var n,t;const c=(0,r.sJ)(d.x),{data:m}=(0,i.K)(),v=(0,o.useContext)(a.q),g=c||(null==(n=null==m?void 0:m.booking)?void 0:n.bookingData);return o.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"5px"}},null==(t=null==g?void 0:g.rooms)?void 0:t.map((n=>{var t,a;const r=null==(t=null==v?void 0:v.OnePerRoomData)?void 0:t.find((e=>e.internalRoomId===n.internalBookingId));return o.createElement(l.M,{key:n.internalBookingId,isAdded:null!=(a=null==r?void 0:r.newValue)&&a,toggleRoom:()=>{return e=n.internalBookingId,void(null==v||v.SetOnePerRoomData((n=>{const t=n.find((n=>n.internalRoomId===e));return[...n.filter((n=>n.internalRoomId!==e)),(o=f({},t),l={newValue:!t.newValue},u(o,s(l)))];var o,l})));var e},Addon:e,Room:n})})))}},75630:function(e,n,t){t.d(n,{X:function(){return g}});var o=t(8051),l=t(12263),a=t(98227),r=t(47833),d=t(68288),i=t(40901),c=t(38033),u=t(21598),s=t(17204),m=t(82795),v=t(80360);const g=({Addon:e})=>{var n,t,g,p,f,I;const y=(0,o.useContext)(i.q),h=(0,l.Fg)();if((0,v.LX)(e)){const l=null!=(t=null==(n=e.addOnPriceInfo)?void 0:n.map((e=>e.date)))?t:[],i=[...new Set(l)];return o.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"40px"}},i.map((n=>{var t;return o.createElement("div",{key:JSON.stringify(n)},o.createElement("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"15px"}},o.createElement(r.G,{style:{opacity:h.css.bodyMutedOpacity,height:"20px"},icon:a.fT}),o.createElement(m.A,{bold:!0,style:{whiteSpace:"nowrap"},muted:!0},null==(t=null==y?void 0:y.DateFormatter)?void 0:t.format((0,s.uq)(n))),o.createElement("hr",{style:{height:h.css.dividerBorderWidth,border:0,margin:0,width:"100%",background:h.css.dividerBorderColor}})),e.isUnitPrice?o.createElement(d.g,{Date:n,Addon:e}):o.createElement(u.I,{Date:n,Addon:e}))})))}if((null!=(p=null==(g=e.connectedAddOns)?void 0:g.flatMap((e=>{var n;return null!=(n=e.addOnPriceInfo)?n:[]})))?p:[]).every((e=>!e.date)))return o.createElement(c.r,{AddonPackage:e});const k=null!=(I=null==(f=e.connectedAddOns)?void 0:f.flatMap((e=>{var n;return null!=(n=e.addOnPriceInfo)?n:[]})).map((e=>e.date)))?I:[],E=[...new Set(k)].sort(((e,n)=>new Date(e).getTime()-new Date(n).getTime()));return o.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"40px"}},E.map((n=>{var t;return o.createElement("div",{key:JSON.stringify(n)},o.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"15px"}},o.createElement(r.G,{style:{opacity:h.css.bodyMutedOpacity,height:"20px"},icon:a.fT}),o.createElement(m.A,{bold:!0,muted:!0,style:{whiteSpace:"nowrap"}},null==(t=null==y?void 0:y.DateFormatter)?void 0:t.format((0,s.uq)(n))),o.createElement("hr",{style:{height:h.css.dividerBorderWidth,border:0,margin:0,width:"100%",background:h.css.dividerBorderColor}})),o.createElement(c.r,{Date:n,AddonPackage:e}))})))}},21598:function(e,n,t){t.d(n,{I:function(){return s}});var o=t(8051),l=t(12263),a=t(68288),r=t(63339),d=t.n(r),i=t(80360),c=t(40387),u=t(9705);const s=({Addon:e,Date:n,IsInPackage:t})=>{var r,s;const m=(0,l.Fg)(),v=(0,c.H)();if((0,i.LX)(e)){let l=[...new Set(null==(r=e.addOnPriceInfo)?void 0:r.filter((e=>Boolean(e.ageGroupId))).map((e=>e.ageGroupId)))].map((n=>{var t,o;return null==(o=null==(t=e.addOnPriceInfo)?void 0:t.find((e=>e.ageGroupId===n)))?void 0:o.ageGroup}));l=d()(l,(e=>{var n;return null!=(n=null==e?void 0:e.minAge)?n:0}));const i=null==(s=e.addOnPriceInfo)?void 0:s.find((e=>null===e.ageGroupId));return o.createElement("div",{style:{background:m.css.lightAccentColor}},i&&o.createElement(a.g,{key:"adult_agegroup",IsInPackage:t,Date:n,AgeGroup:i,Label:v("EA4H.General.Adult"),Addon:e}),l.map(((l,r)=>{var d;const c=0===r&&!i;return o.createElement(a.g,{IsInPackage:t,key:null==l?void 0:l.ageGroupId,Date:n,topBorder:!c,AgeGroup:l,Addon:e,Label:`${null!=(d=null==l?void 0:l.translatedName)?d:null==l?void 0:l.name} ${(0,u.B)(null==l?void 0:l.minAge)&&(0,u.B)(null==l?void 0:l.maxAge)?`(${null==l?void 0:l.minAge}-${null==l?void 0:l.maxAge} ${v("EA4H.General.YearsLOWER")})`:""}`})})))}return null}},26921:function(e,n,t){t.d(n,{o:function(){return s}});var o=t(8051),l=t(82795),a=t(51527),r=t(79791),d=t(40901),i=t(26251),c=t(75435),u=t(87262);const s=({onClick:e,addonTimeslot:n})=>{var t,s,m,v;const[g,p]=(0,o.useState)(!1),f=(0,o.useContext)(d.q),{data:I}=(0,u.K)(),y=(0,o.useContext)(c.z),h=null!=(m=null==(t=null==y?void 0:y.activeBooking)?void 0:t.bookingData)?m:null==(s=null==I?void 0:I.booking)?void 0:s.bookingData,k=void 0!==(null==(v=null==h?void 0:h.optionalAddOns)?void 0:v.find((e=>e.addOnId===(null==f?void 0:f.Addon).addOnId&&(null==f?void 0:f.internalBookingId)==e.internalRoomBookingId&&e.timeSlotInfo===n.timeSlot)));return n.available?o.createElement(a.wx,{isSelected:k||g,onClick:()=>{return t=void 0,o=null,l=function*(){try{p(!0),yield e(n,k)}finally{p(!1)}},new Promise(((e,n)=>{var a=e=>{try{d(l.next(e))}catch(e){n(e)}},r=e=>{try{d(l.throw(e))}catch(e){n(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((l=l.apply(t,o)).next())}));var t,o,l}},o.createElement(l.A,{bold:!0,style:{color:g?"transparent":"inherit"}},n.presentTime),g&&o.createElement("div",{style:{position:"absolute",inset:0,display:"grid",placeContent:"center"}},o.createElement(i.Z,{inverted:!1}))):o.createElement(r.E,{timeslotInfo:n})}},78880:function(e,n,t){t.d(n,{m:function(){return v}});var o=t(8051),l=t(20399),a=t(40901),r=t(3536),d=t(75435),i=t(17204),c=t(87262),u=t(32326),s=t(99301),m=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const v=({addOn:e})=>{var n,t,v,g,p,f,I,y,h;const k=(0,o.useContext)(a.q),{updateBasket:E,removeAddonsFromBasket:A}=(0,u.c)(),{data:O}=(0,c.K)(),{data:b}=(0,s.E)(),P=(0,o.useContext)(d.z),C=(0,l.useIsMutating)("updateBasket")>0,x=(0,l.useIsFetching)("basket")>0,w=null!=(t=null==(n=e.addOnPriceInfo)?void 0:n.map((e=>e.date)))?t:[],R=[...new Set(w)],B=(0,o.useContext)(a.q),S=null!=(f=null!=(p=null==(v=null==P?void 0:P.activeBooking)?void 0:v.bookingCode)?p:null==(g=null==O?void 0:O.booking)?void 0:g.bookingCode)?f:"N/A",D=null!=(h=null==(I=null==P?void 0:P.activeBooking)?void 0:I.bookingData)?h:null==(y=null==O?void 0:O.booking)?void 0:y.bookingData,T=(n,t,o)=>m(void 0,null,(function*(){var t,l;if(C||x)return;const a=new Date(n.timeSlot),r=null==(t=null==D?void 0:D.optionalAddOns)?void 0:t.find((e=>e.addOnId===(null==k?void 0:k.Addon).addOnId&&e.date===o&&e.timeSlotInfo===n.timeSlot&&e.internalRoomBookingId==(null==k?void 0:k.internalBookingId))),d=null==(l=null==D?void 0:D.optionalAddOns)?void 0:l.find((e=>e.addOnId===(null==k?void 0:k.Addon).addOnId&&e.date===o&&e.internalRoomBookingId==(null==k?void 0:k.internalBookingId)&&e.timeSlotInfo!==n.timeSlot)),c=n=>m(void 0,[n],(function*({skipInvalidation:n,waitForNewBasket:t,timeslotInBasket:l}){yield A.mutateAsync({bookingCode:S,requests:[{addOnId:e.addOnId,date:o,externalBookingCode:l.externalBookingCode,timeslot:l.timeSlotInfo,internalRoomBookingId:null==B?void 0:B.internalBookingId}],skipInvalidation:n,waitForNewBasket:t})})),u=()=>m(void 0,null,(function*(){var n;const t=`${a.getUTCHours()}:${a.getUTCMinutes()}`;let o=null!=(n=null==B?void 0:B.ChooseHowManyData.filter((n=>e.addOnId===n.addonId&&(0,i.uq)(n.date).getTime()===(0,i.uq)(a).getTime())).map((n=>{var o,l,r;const d=null!=(r=null==(l=null==(o=e.addOnPriceInfo)?void 0:o.find((e=>e.ageGroupId===n.ageGroupId)))?void 0:l.price)?r:0;return{addonId:n.addonId,timeSlot:t,nrOfUnits:n.newAmount,price:n.newAmount*d,date:a,ageGroupId:n.ageGroupId,internalRoomBookingId:B.internalBookingId}})))?n:[];yield E.mutateAsync({request:{channelId:null==b?void 0:b.channelId,bookingCode:S,updateAddonsInBasketRequest:o},waitForNewBasket:!0})}));r?yield c({skipInvalidation:!1,waitForNewBasket:!0,timeslotInBasket:r}):d?(yield c({skipInvalidation:!0,timeslotInBasket:d}),yield u()):yield u()}));return o.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"15px"}},o.createElement("div",null,R.map((n=>{var t,l;return o.createElement(r.N,{addOn:e,key:n.toString(),priceInfos:null!=(l=null==(t=e.addOnPriceInfo)?void 0:t.filter((e=>!e.date||(0,i.uq)(e.date).getTime()===(0,i.uq)(n).getTime())))?l:[],onClick:T,date:n})}))))}},3536:function(e,n,t){t.d(n,{N:function(){return A}});var o=t(8051),l=t(12263),a=t(22730),r=t(47833),d=t(82795),i=t(40901),c=t(26921),u=t(68288),s=t(63711),m=t(80360),v=t(17204),g=t(75435),p=t(41347),f=t(40387),I=t(87262),y=t(32326),h=t(99301),k=t(9705),E=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const A=({date:e,onClick:n,priceInfos:t,addOn:A})=>{var O,b,P,C,x,w,R,B,S,D,T,$,G,H,M;const U=(0,o.useContext)(g.z),N=(0,o.useContext)(i.q),F=(0,l.Fg)(),L=(0,f.H)(),{data:Z}=(0,I.K)(),j=(0,p.g)(),{data:_}=(0,h.E)(),[z,W]=o.useState(),[V,Q]=o.useState(!1),q=(0,y.c)(),K=null!=(C=null!=(P=null==(O=null==U?void 0:U.activeBooking)?void 0:O.bookingCode)?P:null==(b=null==Z?void 0:Z.booking)?void 0:b.bookingCode)?C:"N/A",J=null!=(R=null==(x=null==U?void 0:U.activeBooking)?void 0:x.bookingData)?R:null==(w=null==Z?void 0:Z.booking)?void 0:w.bookingData,X=null!=(S=null==(B=null==J?void 0:J.optionalAddOns)?void 0:B.filter((n=>n.addOnId===(null==N?void 0:N.Addon).addOnId&&n.date===e)).filter((e=>(null==N?void 0:N.internalBookingId)==e.internalRoomBookingId)))?S:[],Y=t.find((e=>!e.ageGroup)),ee=null!=(T=null==(D=null==N?void 0:N.ChooseHowManyData)?void 0:D.filter((e=>N.internalBookingId==e.internalRoomId)).filter((n=>n.date===e)).map((e=>e.newAmount)).reduce(((e,n)=>e+n),0))?T:0;return o.createElement("div",{key:JSON.stringify(e)},o.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"}},o.createElement(r.G,{style:{opacity:F.css.bodyMutedOpacity,height:"20px"},icon:a.WR}),o.createElement(d.A,{style:{whiteSpace:"nowrap"},muted:!0},null==($=null==N?void 0:N.DateFormatter)?void 0:$.format(new Date(e))),o.createElement(d.A,{bold:!0,style:{color:F.css.darkAccentColor,whiteSpace:"nowrap"}},(()=>{var e,n,t;if((null==X?void 0:X.length)>0){const o=X.map((e=>e.numberOfUnits)).reduce(((e,n)=>e+n),0);return`${o} ${L(1===o?"EA4H.General.PersonLOWER":"EA4H.General.PersonsLOWER")}, ${null==(t=null==(n=`${null==(e=X[0])?void 0:e.timeSlotInfo}`.split("T"))?void 0:n[1])?void 0:t.substring(0,5)}`}})()),X.length>0&&o.createElement(s.z,{onClick:()=>E(void 0,null,(function*(){yield q.removeAddonsFromBasket.mutateAsync({bookingCode:K,requests:X.map((e=>({addOnId:A.addOnId,date:e.date,externalBookingCode:e.externalBookingCode,timeslot:e.timeSlotInfo,internalRoomBookingId:null==N?void 0:N.internalBookingId}))),waitForNewBasket:!0})})),variant:"text"},"(",L("EA4H.General.Cancel"),")")),o.createElement("div",{style:{background:F.css.lightAccentColor}},t.find((e=>!e.ageGroup))&&o.createElement(u.g,{onChange:()=>W(void 0),key:"adult_agegroup",Date:null==Y?void 0:Y.date,AgeGroup:Y,Label:L("EA4H.General.Adult"),Addon:null==N?void 0:N.Addon}),t.filter((e=>Boolean(e.ageGroup))).map(((e,n)=>{var t,l,a,r,d,i,c,s;return o.createElement(u.g,{onChange:()=>W(void 0),key:null==(t=null==e?void 0:e.ageGroup)?void 0:t.ageGroupId,Date:e.date,AgeGroup:e.ageGroup,Addon:null==N?void 0:N.Addon,Label:`${null!=(r=null==(l=null==e?void 0:e.ageGroup)?void 0:l.translatedName)?r:null==(a=null==e?void 0:e.ageGroup)?void 0:a.name} ${(0,k.B)(null==(d=null==e?void 0:e.ageGroup)?void 0:d.minAge)&&(0,k.B)(null==(i=null==e?void 0:e.ageGroup)?void 0:i.maxAge)?`(${null==(c=e.ageGroup)?void 0:c.minAge}-${null==(s=e.ageGroup)?void 0:s.maxAge} ${L("EA4H.General.YearsLOWER")})`:""}`})}))),o.createElement("div",{style:{display:"flex",justifyContent:"end"}},o.createElement(s.z,{isLoading:V,deactivated:ee<1,onClick:()=>E(void 0,null,(function*(){try{Q(!0),W(yield j.APIClient.basketsOptionalAddonTimeslotsV1((0,m.LX)(null==N?void 0:N.Addon)?null==N?void 0:N.Addon.addOnId:void 0,ee,[(0,v.uq)(e)],null==_?void 0:_.channelId))}finally{Q(!1)}})),style:{width:"max-content",marginTop:"10px",marginBottom:"10px"}},L("EA4H.General.SearchTimeSlot"))),o.createElement("div",{style:{display:"grid",gap:"11px",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",marginBottom:"10px"}},null==(M=null==(H=null==(G=null==z?void 0:z.optionalAddOnTimeSlotsPerDays)?void 0:G[0])?void 0:H.addOnTimeSlots)?void 0:M.map((e=>o.createElement(c.o,{key:e.presentTime,addonTimeslot:e,onClick:(e,t)=>E(void 0,null,(function*(){var o,l;return n(e,t,null==(l=null==(o=null==z?void 0:z.optionalAddOnTimeSlotsPerDays)?void 0:o[0])?void 0:l.dateTime)}))})))))}},9132:function(e,n,t){var o=t(8051),l=t(93806),a=t(41237),r=t(82795),d=t(63711),i=t(59838),c=t(15081),u=t(47833),s=t(82422),m=t(65800),v=t(85676),g=t(39641),p=t(17921),f=t(42794),I=t(1587),y=t(17204),h=t(24972),k=t(84404),E=t(21386),A=t(9088),O=t(40387),b=t(69082),P=t(64868),C=Object.defineProperty,x=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,B=(e,n,t)=>n in e?C(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;n.Z=({dateFrom:e,dateTill:n,stayLength:t,bookingData:C,cancellationPolicy:S,isSearching:D,changeDatesData:T,room:$,setSpecificPackageOnlySearch:G,confirmChanges:H,specificPackageOnlySearch:M})=>{var U,N,F,L;const Z=(0,h.sJ)(E.g),j=(0,h.sJ)(A.Q),_=(0,h.sJ)(k.F),z=(0,b.Z)(),W=(0,O.H)();let V=new Intl.DateTimeFormat(Z,{month:"short",day:"2-digit",weekday:"short"});const Q=(0,l.useMediaQuery)({query:"(max-width: 750px)"}),q=(e,n)=>`${V.format(new Date(e))} - ${V.format(new Date(n))}`,K=e=>e?`${e} ${W(e>1?"EA4H.General.Nights":"EA4H.General.Night")}`:"";let J;M&&$.packageId&&(J=$.packageId);let X=null==(U=C.guests)?void 0:U.filter((e=>{var n;return!e.isChild&&!e.isSharer&&(null==(n=$.guestIds)?void 0:n.includes(e.guestId))})).length,Y=null==(N=C.guests)?void 0:N.filter((e=>{var n;return(null==(n=$.guestIds)?void 0:n.includes(e.guestId))&&void 0!==e.age&&e.isChild})).map((e=>e.age)),ee=null!=(F=$.internalBookingId)?F:void 0,ne=null!=(L=$.campaignId)?L:void 0,te=C.bookingCode;const oe={packageCategoryId:void 0,packageId:J,roomId:void 0,campaignId:ne,cancellationPolicyId:$.cancellationPolicyId,adults:X,childAges:Y,bookingCode:te,internalRoomIdBeingEdit:ee,ratePlanAndPackageIdsFilter:void 0,promoCode:void 0,accommodationTypes:void 0,typeOfSearch:void 0,allowCalendarToMoveForward:void 0,availabilityCalendarForProducts:!1};return o.createElement(m.U.Item,{value:"changeDatesContent"},o.createElement(m.U.Control,{icon:o.createElement(u.G,{icon:c.h7,style:{fontSize:"20px"},color:"white"}),style:{userSelect:"none",pointerEvents:(null==S?void 0:S.nonEditable)?"none":"auto",opacity:(null==S?void 0:S.nonEditable)?"0.5":"1"}},o.createElement(r.A,{isCardText:!0,bold:!0},W("EA4H.EditReservation.ChangeDatesOrNumberOfNights"))),o.createElement(m.U.Panel,null,!(null==S?void 0:S.nonEditable)&&o.createElement(o.Fragment,null,o.createElement(v.W,{p:0,pt:10,pb:10},o.createElement(r.A,{isCardText:!0},W("EA4H.EditReservation.YourCurrentSelectedDatesAre")," ",o.createElement("b",null,q($.startDate,$.endDate),", ",K((0,y.UR)($.startDate,$.endDate))),".",o.createElement("span",null," "),W("EA4H.EditReservation.SelectYourDesiredDatesInTheCalendar"),".")),$.packageId&&o.createElement(g.Z,{position:"left",align:"center",p:5,mb:5},o.createElement(s.Z,{checkedBorderColor:"#000",checkedColor:"currentColor",Label:(0,P.n)(W("EA4H.General.ShowDatesAndPricesFor{0}"),(de=$.packageId,ie=C.packageDescriptions,null===de?"":null==(ce=ie.find((e=>e.id===de)))?void 0:ce.name)),isChecked:M,onChange:()=>G(!0)}),o.createElement(s.Z,{checkedBorderColor:"#000",checkedColor:"currentColor",Label:W("EA4H.General.ShowAllAvailableAlternatives"),isChecked:!M,onChange:()=>G(!1)})),o.createElement("div",{style:{display:"flex",gap:"20px",flexDirection:Q?"column":"row"}},o.createElement("div",null,o.createElement(f.u,((e,n)=>{for(var t in n||(n={}))w.call(n,t)&&B(e,t,n[t]);if(x)for(var t of x(n))R.call(n,t)&&B(e,t,n[t]);return e})({},oe),o.createElement(I.Z,{disableOnSearch:!0,disabled:_||D,useCardColors:!0,selectedAccommodationTypes:void 0}))),o.createElement("div",{style:{maxHeight:"355px"}},o.createElement(r.A,{isCardText:!0},o.createElement(u.G,{style:{width:"16px",marginRight:"3px"},icon:i.faCircleInfo}),D?o.createElement("span",null,W("EA4H.General.Searching"),"..."):T?e&&n&&T.notAllowedToMakeCheaper?o.createElement("span",null,W("EA4H.EditReservation.YourNewDatesAre")," ",o.createElement("b",null,q(e,n),", ",K(t)),".",o.createElement("br",null),o.createElement("br",null),o.createElement("p",{dangerouslySetInnerHTML:{__html:W("EA4H.EditReservation.NotAllowedToMakeCheaper")}})):e&&n&&T.nothingAvailable?o.createElement("span",null,W("EA4H.EditReservation.YourNewDatesAre")," ",o.createElement("b",null,q(e,n),", ",K(t)),".",o.createElement("br",null),o.createElement("br",null),o.createElement("p",{dangerouslySetInnerHTML:{__html:W("EA4H.EditReservation.NothingAvailableToBookTheseDates")}})):e&&n&&T.notAvailableForCurrentConfig?o.createElement("span",null,W("EA4H.EditReservation.YourNewDatesAre")," ",o.createElement("b",null,q(e,n),", ",K(t)),".",o.createElement("br",null),o.createElement("br",null),o.createElement("p",{dangerouslySetInnerHTML:{__html:W("EA4H.EditReservation.NotAvailableForCurrentSearchConfig")}})):e&&n&&T&&!T.newPrice?o.createElement("span",null,W("EA4H.EditReservation.YourNewDatesAre")," ",o.createElement("b",null,q(e,n),", ",K(t)),".",o.createElement("br",null),o.createElement("br",null),o.createElement("p",{dangerouslySetInnerHTML:{__html:W("EA4H.EditReservation.RoomIsNotAvailableForNewDatesInfo")}})):e&&n&&T&&void 0!==T.newPrice?o.createElement("span",null,W("EA4H.EditReservation.YourNewDatesAre")," ",o.createElement("b",null,q(e,n),", ",K(t)),".",o.createElement("br",null),o.createElement("br",null),T.priceDiff>=0&&o.createElement("span",{dangerouslySetInnerHTML:{__html:(le=T.priceDiff,ae=W,re=j,le>0?(0,P.n)(ae("EA4H.EditReservation.YourPriceWillIncreaseByInfo{0}"),re.format(le)):le<0?(0,P.n)(ae("EA4H.EditReservation.YourPriceWillDecreaseByInfo{0}"),re.format(le)):ae("EA4H.EditReservation.YourPriceWillStayTheSame"))}}),T.priceDiff<0&&o.createElement("span",{dangerouslySetInnerHTML:{__html:(0,P.n)(W("EA4H.EditReservation.YourPriceWillIncreaseByInfo{0}"),j.format(T.priceDiff))}}),o.createElement("br",null),o.createElement("br",null),o.createElement("span",null,W("EA4H.EditReservation.ExtrasWillBeRemovedInfo"))):void 0:o.createElement("span",null,W("EA4H.EditReservation.YouHaveNotMadeAnyChangesYet"))),!D&&!1===(null==T?void 0:T.nothingAvailable)&&!1===(null==T?void 0:T.notAllowedToMakeCheaper)&&o.createElement(o.Fragment,null,o.createElement(p.T,{h:"xs"}),o.createElement(a.KN,null,T&&o.createElement(d.z,{style:{maxWidth:"none",width:"100%"},isLoading:_,onClick:e=>{return n=void 0,t=null,o=function*(){e.preventDefault(),T.newPrice?H(e):z.open({internalRoomBookingId:$.internalBookingId,affectedInternalRoomIds:[$.internalBookingId],hasToSelectNewRoomType:T.notAvailableForCurrentConfig})},new Promise(((e,l)=>{var a=e=>{try{d(o.next(e))}catch(e){l(e)}},r=e=>{try{d(o.throw(e))}catch(e){l(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((o=o.apply(n,t)).next())}));var n,t,o}},W("EA4H.General.Continue")))))))));var le,ae,re,de,ie,ce}},36982:function(e,n,t){var o=t(8051),l=t(20399),a=t(12263),r=t(17204),d=t(63711),i=t(59888),c=t(41237),u=t(82795),s=t(65800),m=t(93671),v=t(39641),g=t(47833),p=t(23973),f=t(3849),I=t(41347),y=t(40387),h=t(30686),k=t(32326),E=t(99301),A=t(31646),O=t(55166),b=Object.defineProperty,P=Object.defineProperties,C=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,B=(e,n,t)=>n in e?b(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,S=(e,n)=>{for(var t in n||(n={}))w.call(n,t)&&B(e,t,n[t]);if(x)for(var t of x(n))R.call(n,t)&&B(e,t,n[t]);return e},D=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const T=({Addon:e,itemIndex:n,bookingData:t,dateFormatter:i,room:c})=>{var s,g,p;const{data:O}=(0,h.H)(null==t?void 0:t.bookingCode),b=(0,y.H)(),P=(0,a.Fg)(),C=void 0!==e.timeSlotInfo&&null!==e.timeSlotInfo?" "+(0,r.dS)(e.timeSlotInfo):"",x=(0,l.useIsMutating)("removingAddonsFromBasket",{predicate:n=>!!n.options.variables.requests.find((n=>n.addOnId===e.addOnId&&n.date===e.date))})>0,w=void 0,R=(0,k.c)(),{data:B}=(0,E.E)(),S=(0,I.g)(),T=(0,l.useQueryClient)(),$=(0,A.Z)(),G=null==(s=null==O?void 0:O.optionalAddons)?void 0:s.find((n=>n.addOnId===e.addOnId&&e));return o.createElement(o.Fragment,{key:"groupped-add-on-"+n},n>0?o.createElement(m.i,{color:P.css.cardDividerColor}):null,o.createElement(v.Z,{key:`${e.addOnId}_${e.numberOfPersons}_${e.timeSlotInfo}_${e.internalRoomBookingId}`,align:"center",pt:10,pb:10},o.createElement(f.Pw,null,o.createElement(u.A,{isCardText:!0},o.createElement("b",null,e.totalNrOfUnits_calculated,"x  "),null==(p=null==(g=t.addOnDescriptions)?void 0:g.find((n=>n.id===e.addOnId)))?void 0:p.name," ",e.date&&i.format(new Date(e.date))," ",C)),o.createElement("div",{style:{display:"flex"}},o.createElement(d.z,{deactivated:!G,disabled:!G,inverted:!0,variant:"small",style:{padding:"0px 15px",marginRight:"5px"},isLoading:w===e.addOnId,onClick:n=>{n.preventDefault(),e.timeSlotInfo?D(void 0,null,(function*(){if(!G)return;let n=[];n.push(new Date(e.date));const t=yield S.APIClient.basketsOptionalAddonTimeslotsV1(e.addOnId,e.numberOfUnits,n,null==B?void 0:B.channelId);T.setQueryData(["optionaladdontimeslots",e.addOnId,JSON.stringify(n)],t),$.open({Addon:G,showOnlyInfo:!1,internalBookingId:c.internalBookingId})})):D(void 0,null,(function*(){var n;if(!G)return;const o=null==(n=t.addOnDescriptions)?void 0:n.find((n=>n.id===e.addOnId));$.open({Addon:G,Description:o,showOnlyInfo:!1,internalBookingId:c.internalBookingId})}))}},b("EA4H.General.Change")),o.createElement(d.z,{inverted:!0,variant:"small",style:{padding:"0px 15px",whiteSpace:"nowrap"},isLoading:x,onClick:n=>{n.preventDefault(),((e,n,o,l,a,r,d)=>{let i={addOnId:e,addOnPackageId:n,date:o,internalRoomBookingId:l,ageGroupId:a,timeslot:r,numberOfPersons:d};R.removeAddonsFromBasket.mutate({bookingCode:t.bookingCode,requests:[i],waitForNewBasket:!0})})(e.addOnId,void 0,e.date,e.internalRoomBookingId,void 0,e.timeSlotInfo,e.numberOfPersons)}},b("EA4H.General.Remove")))))};n.Z=({bookingData:e,room:n,setLoadingAddOnId:t,loadingAddOnId:l})=>{var r,E;const b=(0,I.g)(),{data:x}=(0,h.H)(null==e?void 0:e.bookingCode),w=(0,k.c)(),R=(0,A.Z)(),B=(0,O.Z)(),$=(0,a.Fg)(),G=(0,y.H)();let H=(0,o.useMemo)((()=>new Intl.DateTimeFormat(b.languageCulture,{month:"short",day:"2-digit",weekday:"short"})),[]),M=(0,o.useMemo)((()=>new Intl.DateTimeFormat(b.languageCulture,{month:"short",day:"2-digit"})),[]);const U=(e,n,t)=>{var o;if(t!==i.nO.OptionalNumberOfUnits)return"";if(!e||!n)return"";let l=n.find((n=>n.ageGroupId===e));if(!l)return"";let a=`(${null!=(o=l.name)?o:l.translatedTypeOfAgeGroup}`;return null!==l.maxAge&&null!==l.minAge?a=`${a} ${l.minAge} - ${l.maxAge})`:a+=")",a};return o.createElement(s.U.Item,{value:"changeExtrasContent"},o.createElement(s.U.Control,{icon:o.createElement(g.G,{icon:p.ak,style:{fontSize:"20px"},color:"white"}),style:{userSelect:"none"}},o.createElement(u.A,{isCardText:!0,bold:!0},G("EA4H.EditReservation.ChangeExtrasToYourRoom"))),o.createElement(s.U.Panel,null,o.createElement(f.W$,null,null==(r=(()=>{var t;const o=null==(t=e.optionalAddOns)?void 0:t.filter((e=>e.internalRoomBookingId===n.internalBookingId&&e.status!==i.Ms.Removed));if(void 0===o||0===o.length)return;let l=[];null==o||o.forEach((e=>{let n=null==o?void 0:o.filter((n=>n.date===e.date&&n.addOnId===e.addOnId&&n.timeSlotInfo===e.timeSlotInfo&&n.numberOfPersons===e.numberOfPersons)),t=null==n?void 0:n.map((e=>e.price)).reduce(((e,n)=>e+n)),a=null==n?void 0:n.map((e=>e.numberOfUnits)).reduce(((e,n)=>e+n),0);var r;void 0===l.find((n=>n.addOnId===e.addOnId&&n.date===e.date&&n.timeSlotInfo===e.timeSlotInfo&&n.numberOfPersons===e.numberOfPersons))&&l.push((r=S({},e),P(r,C({totalPrice_calculated:t,totalNrOfUnits_calculated:a}))))}));let a=l.sort(((e,n)=>n.date&&e.date?new Date(e.date).getTime()-new Date(n.date).getTime():0));return a.length>0?a:void 0})())?void 0:r.map(((t,l)=>o.createElement(T,{key:"groupped-add-on-"+l,Addon:t,itemIndex:l,bookingData:e,dateFormatter:M,room:n}))),null==(E=((e,n,t)=>{var o;if(!e.optionalAddOnPackages)return;let l=Array.from(null==(o=e.optionalAddOnPackages)?void 0:o.filter((e=>e.status!==i.Ms.Removed)));if(void 0===l||0===l.length)return;let a=[],r=[];return l.forEach((e=>{var n;if(r.find((n=>n.addOnPackageId===e.addOnPackageId))){let t=r.findIndex((n=>n.addOnPackageId===e.addOnPackageId));r[t].nrOfPackagesWithThisId++,null==(n=e.basketAddOnPriceInfos)||n.forEach((e=>{r[t].addOns.push(S({},e))}))}else r.push({addOnPackageId:e.addOnPackageId,addOns:[...e.basketAddOnPriceInfos],nrOfPackagesWithThisId:1,chargeUnit:e.optionalChargeUnit,dynamic:e.dynamic,internalRoomId:e.internalRoomId})})),r.forEach((n=>{n.addOns.filter((e=>(void 0===t&&null===e.internalRoomBookingId||e.internalRoomBookingId===t)&&e.status!==i.Ms.Removed)).forEach((o=>{var l,r,d,c,u,s,m;let v,g=null==(l=e.addOnPackageDescriptions)?void 0:l.find((e=>e.id===n.addOnPackageId));n.dynamic&&(v=o.addOnId);let p,f=o.ageGroupId,I=U(o.ageGroupId,null!=(r=e.ageGroupDescriptions)?r:[],n.chargeUnit);void 0!==v&&(p=null!=(u=null==(c=null==(d=e.addOnDescriptions)?void 0:d.find((e=>e.id===v)))?void 0:c.name)?u:void 0);let y=o.date;if(!a.find((e=>e.addOnPackageId===n.addOnPackageId&&e.addOnId===v&&e.ageGroupId===f&&e.date===y&&(e.internalRoomId===o.internalRoomBookingId||null===o.internalRoomBookingId&&void 0===e.internalRoomId)))){let e,l=0,r=0,d=n.addOns.filter((e=>(e.internalRoomBookingId===t||null===e.internalRoomBookingId&&void 0===t)&&e.ageGroupId===f&&e.date===y));if(n.dynamic)l=n.chargeUnit===i.nO.OptionalNumberOfUnits?d.filter((e=>e.addOnId===v)).map((e=>e.numberOfUnits)).reduce(((e,n)=>e+n)):n.chargeUnit===i.nO.OnePerGuestAndDay||i.nO.OnePerGuest?d.filter((e=>e.addOnId===o.addOnId&&e.guestId===o.guestId)).length:d.filter((e=>e.addOnId===o.addOnId)).length,e=d.filter((e=>e.addOnId===v));else{if(n.chargeUnit===i.nO.OptionalNumberOfUnits){let e=d.filter((e=>e.addOnId===d[0].addOnId));e.length>0&&(l=e.map((e=>e.numberOfUnits)).reduce(((e,n)=>e+n)))}else l=null!=(m=null==(s=n.addOns.filter((e=>e.addOnId===o.addOnId&&e.date===o.date&&e.ageGroupId===o.ageGroupId&&e.internalRoomBookingId===o.internalRoomBookingId)))?void 0:s.length)?m:0;e=d}e.length>0&&(r=e.map((e=>e.price*e.numberOfUnits)).reduce(((e,n)=>e+n))),a.push({addOnPackageId:n.addOnPackageId,addOnId:v,addOnName:p,ageGroupId:f,ageGroupText:I,chargeUnit:n.chargeUnit,date:y,internalRoomId:o.internalRoomBookingId,packageName:null==g?void 0:g.name,numberOfUnits:l,totalPrice:r})}}))})),a.length>0?a:void 0})(e,0,n.internalBookingId))?void 0:E.map(((a,r)=>{var i,c;return o.createElement(o.Fragment,null,r>0?o.createElement(m.i,{color:$.css.cardDividerColor}):null,o.createElement(v.Z,{key:`${a.addOnPackageId}_${a.addOnId}_${a.date}_${a.internalRoomId}_${a.ageGroupId}`,align:"center",pt:10,pb:10},o.createElement(f.Pw,null,o.createElement(u.A,{isCardText:!0},o.createElement("b",null,a.numberOfUnits,"x ")," ",null==(c=null==(i=e.addOnPackageDescriptions)?void 0:i.find((e=>e.id===a.addOnPackageId)))?void 0:c.name," ",a.addOnName?`(${a.addOnName})`:""," ",a.date?`(${H.format(new Date(a.date))})`:"")),o.createElement("div",{style:{display:"flex"}},o.createElement(d.z,{inverted:!0,variant:"small",style:{padding:"0px 15px",marginRight:"5px"},isLoading:l===a.addOnPackageId,onClick:e=>{var t;e.preventDefault(),void 0===l&&(t=a.addOnPackageId,D(void 0,null,(function*(){var e;const o=null==(e=null==x?void 0:x.optionalAddOnPackages)?void 0:e.find((e=>e.addOnPackageId===t));o&&R.open({Addon:o,showOnlyInfo:!1,internalBookingId:n.internalBookingId})})))}},G("EA4H.General.Change")),o.createElement(d.z,{inverted:!0,variant:"small",style:{padding:"0px 15px",whiteSpace:"nowrap"},isLoading:l===a.addOnPackageId,onClick:n=>{var o,r,d,i,c,u,s;n.preventDefault(),void 0===l&&(o=a.addOnId,r=a.addOnPackageId,d=a.date,i=a.internalRoomId,c=a.ageGroupId,u=void 0,s=void 0,D(void 0,null,(function*(){t(o);let n={addOnId:o,addOnPackageId:r,date:d,internalRoomBookingId:i,ageGroupId:c,timeslot:u,numberOfPersons:s};yield w.removeAddonsFromBasket.mutateAsync({bookingCode:e.bookingCode,requests:[n]}),t(void 0)})))}},G("EA4H.General.Remove")))))})),o.createElement(c.KN,null,o.createElement(d.z,{style:{width:"max-content",marginTop:"20px"},onClick:e=>{e.preventDefault(),B.open({internalBookingId:n.internalBookingId})}},G("EA4H.EditReservation.AddMoreExtras"))))))}},80570:function(e,n,t){var o=t(8051),l=t(41237),a=t(82795),r=t(63711),d=t(47833),i=t(36742),c=t(65800),u=t(85676),s=t(40387),m=t(82644),v=t(25581);n.Z=({selectedRoomInternalBookingId:e})=>{const[n,t]=(0,o.useState)(void 0),g=(0,s.H)(),p=(0,v.Z)(),{data:f,isFetched:I}=(0,m.C)([e]);return(0,o.useEffect)((()=>{if(I&&(null==f?void 0:f.roomAddOnPackages)&&(null==f?void 0:f.roomAddOnPackages.length)>0){const n=null==f?void 0:f.roomAddOnPackages.filter((n=>n.internalBookingRoomId===e));t(n)}}),[I]),o.createElement(c.U.Item,{value:"changeExtrasToYourPackageContent"},o.createElement(c.U.Control,{icon:o.createElement(d.G,{icon:i.hV,style:{fontSize:"20px"},color:"white"}),id:"changeDatesContent"},o.createElement(a.A,{isCardText:!0,bold:!0},g("EA4H.EditReservation.ChangeExtrasToYourPackage"))),o.createElement(c.U.Panel,null,o.createElement(o.Fragment,null,o.createElement(u.W,{p:0,pt:10,pb:10},o.createElement(a.A,{isCardText:!0},g("EA4H.EditReservation.CurrentlySelectedExtrasInfoText")),o.createElement("ul",{style:{marginTop:"15px"}},null==n?void 0:n.map(((e,n)=>{var t,l,r;return o.createElement("li",{key:null==e?void 0:e.name},o.createElement(a.A,{isCardText:!0,bold:!0},null!=(t=null==e?void 0:e.name)?t:g("EA4H.General.UnknownName")," (",null==(r=null==(l=null==e?void 0:e.addOnPackages)?void 0:l[n])?void 0:r.name,")"))})))),o.createElement(l.KN,null,o.createElement(r.z,{onClick:n=>{return t=void 0,o=null,l=function*(){n.preventDefault(),p.open({internalRoomBookingId:e})},new Promise(((e,n)=>{var a=e=>{try{d(l.next(e))}catch(e){n(e)}},r=e=>{try{d(l.throw(e))}catch(e){n(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((l=l.apply(t,o)).next())}));var t,o,l}},g("EA4H.General.ChangeExtras"))))))}},41406:function(e,n,t){var o=t(8051),l=t(10882),a=t(41237),r=t(82795),d=t(63711),i=t(65800),c=t(85676),u=t(39411),s=t(85326),m=t(39641),v=t(47833),g=t(35337),p=t(3849),f=t(17204),I=t(59888),y=t(24972),h=t(9088),k=t(84404),E=t(41347),A=t(40387),O=t(64868),b=Object.defineProperty,P=Object.defineProperties,C=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,B=(e,n,t)=>n in e?b(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;n.Z=({bookingData:e,room:n,changeDatesData:t,cancellationPolicy:b,setAccommodationSearchResult:S,confirmChanges:D,setChangeDatesData:T})=>{var $,G,H,M,U,N,F,L,Z;const[j,_]=(0,o.useState)(!1),z=(0,y.sJ)(k.F),W=(0,y.sJ)(h.Q),V=(0,E.g)(),Q=(0,A.H)(),q=null==($=e.guests)?void 0:$.filter((e=>{var t;return null==(t=n.guestIds)?void 0:t.includes(e.guestId)})),K={adults:null==q?void 0:q.filter((e=>!e.isChild&&!e.isSharer)).length,childAges:null==q?void 0:q.filter((e=>void 0!==e.age&&e.isChild)).map((e=>e.age)),shareAge:(null!=(H=null==(G=null==q?void 0:q.filter((e=>e.isSharer)))?void 0:G.length)?H:0)>0},[J,X]=o.useState({roomNumberOfBeds:0,roomExtraBeds:void 0,maxOccupancy:0}),[Y,ee]=o.useState({childAges:null!=(U=null==(M=K.childAges)?void 0:M.map((e=>e)))?U:[],adultNumber:null!=(N=K.adults)?N:1,allowShareAge:K.shareAge,sharerAge:0,childNumber:null!=(L=null==(F=K.childAges)?void 0:F.length)?L:0}),ne=null==(Z=e.roomDescriptions)?void 0:Z.filter((e=>e.id===n.roomId));let te;const[oe,le]=o.useState(!1);void 0!==ne&&ne.length>0&&(te=ne[0].name);const ae=()=>{ee((e=>{var n,t,o,l,a,r;return a=((e,n)=>{for(var t in n||(n={}))w.call(n,t)&&B(e,t,n[t]);if(x)for(var t of x(n))R.call(n,t)&&B(e,t,n[t]);return e})({},e),r={adultNumber:null!=(n=K.adults)?n:0,childAges:null!=(t=K.childAges)?t:[],allowShareAge:K.shareAge,childNumber:null!=(l=null==(o=K.childAges)?void 0:o.length)?l:0},P(a,C(r))}))};return o.createElement(i.U.Item,{value:"changeNumberOfGuests"},o.createElement(i.U.Control,{icon:o.createElement(v.G,{icon:g.Nd,style:{fontSize:"20px"},color:"white"}),style:{userSelect:"none",pointerEvents:(null==b?void 0:b.nonEditable)?"none":"auto",opacity:(null==b?void 0:b.nonEditable)?"0.5":"1"},onClick:e=>{ae()}},o.createElement(r.A,{isCardText:!0,bold:!0},Q("EA4H.EditReservation.ChangeNumberOfGuests"))),o.createElement(i.U.Panel,null,!(null==b?void 0:b.nonEditable)&&o.createElement(o.Fragment,null,o.createElement(c.W,{p:0,pt:10,pb:10},o.createElement(r.A,{isCardText:!0,dangerouslySetInnerHTML:{__html:((e,n,t,o,l)=>{let a=(0,O.n)(e("EA4H.EditReservation.RoomNameHasStandardBeds{0}{1}"),n,t.toString())+", ";if(o&&o>0){let n=o.toString();a=a+"<span>"+(0,O.n)(e("EA4H.EditReservation.MayContainExtraBeds{0}"),n)+", </span>"}return a=a+(0,O.n)(e("EA4H.EditReservation.AndTakesAMaximumOfPersons{0}"),l.toString())+". ",a=a+e("EA4H.EditReservation.YouCanChangeGuestBelow")+".",a})(Q,te,J.roomNumberOfBeds,J.roomExtraBeds,J.maxOccupancy)}})),o.createElement(p.Gd,null,o.createElement(p.MS,null,o.createElement(l.Z,{roomId:n.roomId,roomConfig:K,guestConfig:Y,anyUpdate:oe,setRoomInfo:X,setGuestConfig:ee,setAnyUpdate:le,makeSearch:()=>{return t=void 0,o=null,l=function*(){var t,o,l,a,r,d,i;try{_(!0);let c={adults:Y.adultNumber,childAges:Y.childAges,sharerAge:Y.allowShareAge?Y.sharerAge:void 0},u=n.startDate,s=n.endDate,m=null!=(t=n.packageId)?t:void 0,v=(0,f.UR)(u,s),g=yield V.APIClient.accommodationSearchV1({startDate:u,endDate:s,bookingCode:e.bookingCode,roomConfigs:[c],filter:{stayLength:v,internalRoomId:null!=(o=n.internalBookingId)?o:void 0,ratePlanId:void 0,packageId:m,includeRooms:!0,includePackages:void 0!==(null==(l=e.rooms)?void 0:l.find((e=>void 0!==e.packageId))),roomContent:I.zI.None,packageContent:I.L2.None,campaignId:null!=(a=n.campaignId)?a:void 0},channelId:V.channelId});S(g);let p={changeDatesMessage:void 0,hitKey:void 0,newPrice:void 0,resultId:void 0,priceDiff:void 0,notAvailableForCurrentConfig:!1,nothingAvailable:!1,keepPrice:!1,notAllowedToMakeCheaper:!1};if(null==g||null==g.roomsResult||0===g.roomsResult.length||0===g.roomsResult[0].cheapestPriceNoLock)p.changeDatesMessage=Q("EA4H.EditReservation.TheRoomIsNotBookableForTheSelectedDates");else{const e=g.roomsResult.filter((e=>e.roomId===n.roomId));if(e.length>0){const t=null==(r=e[0].rateAlternatives)?void 0:r.filter((e=>void 0!==e.ratesPerRoomConfig&&e.ratesPerRoomConfig.length>0)).flatMap((e=>e.ratesPerRoomConfig)).filter((e=>(null==e?void 0:e.paymentPolicyId)===n.paymentPolicyId)).filter((e=>(null==e?void 0:e.cancellationPolicyId)===n.cancellationPolicyId)).filter((e=>!0!==(null==e?void 0:e.isLocked))).filter((e=>void 0!==(null==e?void 0:e.totalPrice)&&void 0!==(null==e?void 0:e.totalPrice.priceInclVAT))).sort(((e,n)=>{var t,o;return(null==(t=null==e?void 0:e.totalPrice)?void 0:t.priceInclVAT)-(null==(o=null==n?void 0:n.totalPrice)?void 0:o.priceInclVAT)}))[0],o=null!=(i=null==(d=null==t?void 0:t.totalPrice)?void 0:d.priceInclVAT)?i:0,l=n.totalPrice;p.priceDiff=o-l,p.newPrice=W.format(o),p.hitKey=null==t?void 0:t.hitKey,p.resultId=g.resultId}}T(p)}finally{_(!1)}},new Promise(((e,n)=>{var a=e=>{try{d(l.next(e))}catch(e){n(e)}},r=e=>{try{d(l.throw(e))}catch(e){n(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((l=l.apply(t,o)).next())}));var t,o,l}})),o.createElement(p.ER,{style:{width:"100%"},selected:oe},o.createElement("div",{style:{flexGrow:1}},j&&o.createElement(u.M,{style:{height:"100%"}},o.createElement(s.a,null)),!j&&o.createElement(m.Z,{spacing:2,align:"center"},!oe&&o.createElement(r.A,{isCardText:!0},Q("EA4H.EditReservation.YouHaveNotMadeAnyChangesYet")),oe&&t&&!t.newPrice&&o.createElement(o.Fragment,null,o.createElement(r.A,{isCardText:!0,bold:!0},Q("EA4H.EditReservation.SelectedGuestsAre")," ",Y.adultNumber," ",Y.adultNumber>1?Q("EA4H.General.Adults"):Q("EA4H.General.Adult"),Y.childAges.length>0?`${" "+Y.childAges.length} ${Y.childAges.length>1?Q("EA4H.General.Children")+" ("+Y.childAges.join()+"yrs)":Q("EA4H.General.Child")+" ("+Y.childAges[0]+")"}`:""),o.createElement("br",null),o.createElement(r.A,{isCardText:!0,dangerouslySetInnerHTML:{__html:Q("EA4H.EditReservation.RoomIsNotAvailableForNewGuestConfigInfo")}})),oe&&t&&void 0!==t.newPrice&&o.createElement(o.Fragment,null,o.createElement(r.A,{isCardText:!0,bold:!0},Q("EA4H.EditReservation.SelectedGuestsAre")," ",Y.adultNumber," ",Y.adultNumber>1?Q("EA4H.General.Adults"):Q("EA4H.General.Adult"),Y.childAges.length>0?`${" "+Y.childAges.length} ${Y.childAges.length>1?Q("EA4H.General.Children")+" ("+Y.childAges.join()+"yrs)":Q("EA4H.General.Child")+" ("+Y.childAges[0]+")"}`:""),o.createElement("br",null),o.createElement(r.A,{isCardText:!0,dangerouslySetInnerHTML:{__html:(re=t.priceDiff,de=Q,ie=W,re>0?(0,O.n)(de("EA4H.EditReservation.YourPriceWillIncreaseByInfo{0}"),ie.format(re)):re<0?(0,O.n)(de("EA4H.EditReservation.YourPriceWillDecreaseByInfo{0}"),ie.format(re)):de("EA4H.EditReservation.YourPriceWillStayTheSame"))}})))),!j&&o.createElement(a.KN,null,t&&t.newPrice&&o.createElement(d.z,{style:{marginTop:"10px"},isLoading:z,onClick:e=>{e.preventDefault(),D(e)}},Q("EA4H.General.ConfirmChanges"))))))));var re,de,ie}},28914:function(e,n,t){var o=t(8051),l=t(41237),a=t(82795),r=t(47833),d=t(63711),i=t(65800),c=t(85676),u=t(97660),s=t(68197),m=t(30639),v=t(24972),g=t(21386),p=t(40387),f=t(31796);n.Z=({selectedRoomInternalBookingId:e})=>{const n=(0,v.sJ)(g.g),t=(0,f.Z)(),I=(0,p.H)(),y=(0,m.LJ)(e);return o.createElement(i.U.Item,{value:"changeRoomAddOnsTimeSlotsContent"},o.createElement(i.U.Control,{icon:o.createElement(r.G,{icon:u.SZ,style:{fontSize:"20px"},color:"white"})},o.createElement(a.A,{isCardText:!0,bold:!0},I("EA4H.General.UpdateAddOnTimeSlots"))),o.createElement(i.U.Panel,null,o.createElement(o.Fragment,null,o.createElement(c.W,{p:0,pt:10,pb:10},o.createElement(a.A,{isCardText:!0},I("EA4H.EditReservation.CurrentlySelectedTimeSlotsInfoText")),o.createElement("ul",{style:{marginTop:"15px"}},y.map((e=>{var t;const l=e.date.map((e=>(0,m.wC)(n,e)));return o.createElement("li",{key:e.name},o.createElement(a.A,{isCardText:!0,bold:!0},null!=(t=e.name)?t:I("EA4H.General.UnknownName")," (",l.join(", "),")"))})))),o.createElement(l.KN,null,o.createElement(d.z,{withIcon:!0,style:{width:"max-content"},onClick:n=>{return o=void 0,l=null,a=function*(){n.preventDefault(),t.open({internalRoomIds:[e]})},new Promise(((e,n)=>{var t=e=>{try{d(a.next(e))}catch(e){n(e)}},r=e=>{try{d(a.throw(e))}catch(e){n(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(t,r);d((a=a.apply(o,l)).next())}));var o,l,a}},I("EA4H.General.UpdateAddOnTimeSlots"),o.createElement(r.G,{style:{fontSize:"18px"},icon:s._t}))))))}},10189:function(e,n,t){var o=t(8051),l=t(41237),a=t(82795),r=t(63711),d=t(68197),i=t(47833),c=t(65800),u=t(85676),s=t(44746),m=t(40387),v=t(64868);n.Z=({currentRoomType:e,onChangeRoomClicked:n,cancellationPolicy:t})=>{const g=(0,m.H)();return o.createElement(c.U.Item,{value:"changeRoomTypeContent"},o.createElement(c.U.Control,{icon:o.createElement(i.G,{style:{fontSize:"20px"},icon:s.V1,color:"white"}),id:"changeDatesContent",style:{userSelect:"none",pointerEvents:(null==t?void 0:t.nonEditable)?"none":"auto",opacity:(null==t?void 0:t.nonEditable)?"0.5":"1"}},o.createElement(a.A,{isCardText:!0,bold:!0},g("EA4H.EditReservation.ChangeRoomTypeTitle"))),o.createElement(c.U.Panel,null,!(null==t?void 0:t.nonEditable)&&o.createElement(o.Fragment,null,o.createElement(u.W,{p:0,pt:10,pb:10},o.createElement(a.A,{isCardText:!0,dangerouslySetInnerHTML:{__html:(0,v.n)(g("EA4H.EditReservation.ChangeRoomTypeInformation"),e)}})),o.createElement(l.KN,null,o.createElement(r.z,{style:{width:"max-content"},withIcon:!0,onClick:e=>{e.preventDefault(),n()}},g("EA4H.EditReservation.ChangeRoomTypeTitle"),o.createElement(i.G,{style:{fontSize:"18px"},icon:d._t}))))))}},84404:function(e,n,t){t.d(n,{F:function(){return M}});var o=t(8051),l=t(93806),a=t(12263),r=t(20399),d=t(75435),i=t(41347),c=t(9132),u=t(36982),s=t(41406),m=t(80570),v=t(28914),g=t(10189),p=t(61282),f=t(17921),I=t(65800),y=t(41237),h=t(82795),k=t(47833),E=t(97092),A=t(17204),O=t(30639),b=t(59888),P=t(24972),C=t(11392),x=t(96690),w=t(86041),R=t(9088),B=t(40387),S=t(69082),D=t(66656),T=t(98960),$=t(80790),G=t(99787),H=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const M=(0,P.cn)({key:"confirmingChangesState",default:!1});n.Z=({room:e})=>{var n;const[t,U]=(0,o.useState)(),[N,F]=(0,o.useState)(!1),[L,Z]=(0,o.useState)(),[j,_]=(0,o.useState)(),[z,W]=(0,o.useState)(),[V,Q]=(0,o.useState)(),[q,K]=(0,o.useState)(void 0),[J,X]=(0,o.useState)(!0),[Y,ee]=(0,o.useState)(null),ne=(0,P.Zl)(M),[te,oe]=(0,P.FV)(x.n),[le,ae]=(0,P.FV)(C.x),re=(0,P.Zl)(w.l),de=(0,P.sJ)(R.Q),ie=(0,o.useContext)(d.z),ce=(0,T.Z)(),ue=(0,$.Z)(),se=null==(n=null==ie?void 0:ie.activeBooking)?void 0:n.bookingData,me=(0,S.Z)(),ve=(0,D.o)(),ge=(0,i.g)(),pe=(0,a.Fg)(),fe=(0,B.H)(),Ie=(0,r.useQueryClient)(),ye=(0,o.useMemo)((()=>{var n,t,o,l;return null!=(l=null!=(o=null==(t=null==(n=se.roomDescriptions)?void 0:n.find((n=>n.id===e.roomId)))?void 0:t.name)?o:fe("EA4H.General.UnknownName"))?l:"Unknown name"}),[]),he=(0,o.useMemo)((()=>{var n;return null==(n=se.cancellationPolicyDescriptions)?void 0:n.find((n=>n.id===e.cancellationPolicyId))}),[e.cancellationPolicyId]),ke=(0,l.useMediaQuery)({query:pe.mediaQueries.small});(0,o.useEffect)((()=>{te&&le&&Ee([new Date(te),new Date(le)])}),[le]);const Ee=n=>H(void 0,null,(function*(){var t,o,l,a,r,d,i;if(!N)try{F(!0),_(n[0]),W(n[1]);let c=(0,A.UR)(n[0],n[1]);Q(c);let u=yield ge.APIClient.accommodationSearchV1({bookingCode:se.bookingCode,startDate:n[0],endDate:n[1],roomConfigs:[(0,O.BW)(e,se.guests)],filter:{year:n[0].getFullYear(),month:n[0].getMonth()+1,day:n[0].getDate(),stayLength:c,internalRoomId:null!=(t=e.internalBookingId)?t:void 0,ratePlanId:void 0,includeRooms:!0,includePackages:void 0!==(null==(o=se.rooms)?void 0:o.find((e=>void 0!==e.packageId))),roomContent:b.zI.Full,packageContent:b.L2.Full,addOnContent:b.H$.Full,campaignId:null!=(l=e.campaignId)?l:void 0},channelId:ge.channelId});K(u),re(u);let s={changeDatesMessage:void 0,hitKey:void 0,newPrice:void 0,resultId:void 0,priceDiff:void 0,notAvailableForCurrentConfig:!1,nothingAvailable:!1,keepPrice:!1,notAllowedToMakeCheaper:!1};const m=null==(a=null==u?void 0:u.roomsResult)?void 0:a.find((n=>{var t;return n.roomId===e.roomId&&(null==(t=n.rateAlternatives)?void 0:t.find((n=>n.rateplanId===e.priceInfo[0].ratePlanId)))}));if(m){const n=(0,O.kw)({Room:m,ratePlanId:e.priceInfo[0].ratePlanId,cancellationPolicyId:e.cancellationPolicyId,paymentPolicyId:e.paymentPolicyId});if(void 0===n)s.notAvailableForCurrentConfig=!0;else{const t=null!=(d=null==(r=null==n?void 0:n.totalPrice)?void 0:r.priceInclVAT)?d:0,o=e.totalPrice;if(s.priceDiff=t-o,s.priceDiff<0){const n=null==(i=null==u?void 0:u.cancellationPolicy)?void 0:i.filter((n=>n.id===e.cancellationPolicyId));if(null!=n&&n.length>0){n[0].nonRefundable&&(s.notAllowedToMakeCheaper=!0)}}s.newPrice=de.format(t),s.hitKey=null==n?void 0:n.hitKey,s.resultId=u.resultId}}else u.roomsResult&&u.roomsResult.length>0?s.notAvailableForCurrentConfig=!0:s.nothingAvailable=!0;Z(s)}finally{F(!1)}}));if(!se)return null;const Ae=n=>H(void 0,null,(function*(){var t,o,l,a,r;if(n.preventDefault(),!L||L.notAllowedToMakeCheaper)return;let d={internalRoomId:e.internalBookingId,hitkey:null==L?void 0:L.hitKey,resultId:null==L?void 0:L.resultId,keepPrice:null==L?void 0:L.keepPrice};try{ne(!0);const e=yield ge.APIClient.basketsUpdateBasketV1({channelId:ge.channelId,bookingCode:se.bookingCode,updateRoomDates:d}),n=yield ge.APIClient.basketsBasketV1(!0,ge.channelId);Ie.setQueryData(["basket",ge.channelId],n);const i=null!=(o=null==(t=e.updateDatesResult)?void 0:t.internalRoomIdsToUpdate)?o:[];(null==(l=null==n?void 0:n.booking)?void 0:l.bookingData)&&(ie.RedoSearch(n.booking.bookingData),me.open({removedAddOns:null==(a=e.updateDatesResult)?void 0:a.removedAddons,removedAddOnPackages:null==(r=e.updateDatesResult)?void 0:r.removedAddonPackages,internalRoomBookingId:e.currentEditRoomInternalId,affectedInternalRoomIds:i})),Oe()}catch(e){return"Message"in e?alert(e.Message):alert(e),void ve.closeAll()}finally{ne(!1)}})),Oe=()=>{oe(void 0),ae(void 0),_(void 0),W(void 0),Z(void 0)};return o.createElement(p.Z,{onCloseClicked:()=>ve.closeAll(),modalName:"EditRoom"},o.createElement(y.Dx,null,fe("EA4H.EditReservation.EditRoomTitle")),o.createElement(f.T,{h:"sm"}),o.createElement(h.A,null,fe("EA4H.EditReservation.EditRoomSubtitle")),o.createElement(I.U,{chevron:o.createElement(k.G,{icon:E.pt,style:{fontSize:"16px"},color:"inherit"}),value:Y,onChange:e=>{Oe(),ee(e)},mt:40,styles:{item:{marginBottom:3,border:0,"&[data-active]":{"&:hover":{backgroundColor:(0,G.W)(pe.css.cardBackground,void 0,.4).color}}},control:{position:"relative",display:"flex",padding:ke?"8px 15px 8px 65px":"8px 20px 8px 70px",backgroundColor:pe.css.cardBackground,"&:hover":{backgroundColor:(0,G.W)(pe.css.cardBackground,void 0,.8).color},minHeight:"50px",borderRadius:`${pe.css.cardBorderRadius} !important`},icon:{borderRadius:pe.css.cardBorderRadius,position:"absolute",top:0,bottom:0,left:0,backgroundColor:pe.css.darkAccentColor,width:"50px"},panel:{border:"0 solid #fff",height:"auto",borderLeftWidth:ke?"3px":"50px",borderLeftColor:(0,G.W)(pe.css.darkAccentColor,void 0,.4).color,borderRadius:pe.css.cardBorderRadius,backgroundColor:pe.css.cardBackground}},variant:"contained"},o.createElement(c.Z,{dateFrom:j,dateTill:z,specificPackageOnlySearch:J,isSearching:N,stayLength:V,changeDatesData:L,accommodationSearchResult:q,cancellationPolicy:he,bookingData:se,room:e,setSpecificPackageOnlySearch:X,confirmChanges:Ae}),o.createElement(u.Z,{room:e,bookingData:se,loadingAddOnId:t,setLoadingAddOnId:U}),o.createElement(s.Z,{room:e,bookingData:se,cancellationPolicy:he,changeDatesData:L,setAccommodationSearchResult:K,setChangeDatesData:Z,confirmChanges:Ae}),void 0!==(null==(be=e.mandatoryAddOnPackages)?void 0:be.find((e=>e.dynamic)))&&o.createElement(m.Z,{selectedRoomInternalBookingId:e.internalBookingId}),(()=>{var n;return void 0!==(null==(n=e.mandatoryAddOns)?void 0:n.find((e=>e.timeSlotInfo)))})()&&o.createElement(v.Z,{selectedRoomInternalBookingId:e.internalBookingId}),o.createElement(g.Z,{currentRoomType:ye,onChangeRoomClicked:()=>{ce.open({upSell:!1,targetRoomToUpdate:e,overrideOnBack:()=>{ue.open({room:e})}})},cancellationPolicy:he})));var be}},10882:function(e,n,t){var o=t(8051),l=t(63711),a=t(69243),r=t(29439),d=t(47833),i=t(41237),c=t(82795),u=t(82422),s=t(3849),m=t(39641),v=t(41347),g=t(40387),p=t(64868),f=Object.defineProperty,I=Object.defineProperties,y=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,A=(e,n,t)=>n in e?f(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,O=(e,n)=>{for(var t in n||(n={}))k.call(n,t)&&A(e,t,n[t]);if(h)for(var t of h(n))E.call(n,t)&&A(e,t,n[t]);return e},b=(e,n)=>I(e,y(n));n.Z=({roomConfig:e,roomId:n,guestConfig:t,anyUpdate:f,setGuestConfig:I,setRoomInfo:y,makeSearch:h,setAnyUpdate:k})=>{var E,A,P,C;const[x,w]=(0,o.useState)({maxAdultNumber:null!=(E=e.adults)?E:0,minAdultNumber:0,maxChildNumber:0,minChildNumber:0,maxOccupancy:0}),[R,B]=(0,o.useState)(void 0),S=(0,g.H)(),D=(0,v.g)(),T=[n];(0,o.useEffect)((()=>{D.APIClient.roomsV1(!0,void 0,T,null==D?void 0:D.channelId).then((e=>{var n,t,o,l,a,r,d;1===e.rooms.length&&(w({maxAdultNumber:null!=(n=e.rooms[0].maxAdultOccupancy)?n:Number.MAX_SAFE_INTEGER,maxChildNumber:null!=(t=e.rooms[0].maxChildOccupancy)?t:Number.MAX_SAFE_INTEGER,minChildNumber:null!=(o=e.rooms[0].minChildOccupancy)?o:0,minAdultNumber:null!=(l=e.rooms[0].minAdultOccupancy)?l:0,maxOccupancy:null!=(a=e.rooms[0].maxOccupancy)?a:Number.MAX_SAFE_INTEGER}),B(e.rooms[0].roomConfigSetup),y({roomNumberOfBeds:null!=(r=e.rooms[0].numberOfBeds)?r:0,roomExtraBeds:e.rooms[0].numberOfExtrabeds,maxOccupancy:null!=(d=e.rooms[0].maxOccupancy)?d:0}),I((n=>{var t,o;return b(O({},n),{sharerAge:null!=(o=null==(t=e.rooms[0].roomConfigSetup)?void 0:t.sharerCutOffAge)?o:0})})))}))}),[]),(0,o.useEffect)((()=>{$()?(k(!0),h()):k(!1)}),[f,t.adultNumber,x.maxChildNumber,t.childNumber,t.childAges,t.allowShareAge]);const $=()=>{var n,o,l,a;return e.shareAge!==t.allowShareAge||(e.adults!==t.adultNumber||((null==(n=e.childAges)?void 0:n.length)!==t.childAges.length||(null!=(a=null==(l=null==(o=e.childAges)?void 0:o.filter((e=>!t.childAges.includes(e))))?void 0:l.length)?a:0)>0))},G=t.adultNumber>=x.maxAdultNumber||t.adultNumber+t.childNumber>=x.maxOccupancy,H=t.adultNumber-1==0||t.adultNumber<=x.minAdultNumber,M=0===x.maxChildNumber||t.childNumber>=x.maxChildNumber||t.adultNumber+t.childNumber>=x.maxOccupancy,U=0===t.childNumber||t.childNumber<=x.minChildNumber,N=t.childAges.some((e=>e<=(null==R?void 0:R.sharerCutOffAge)));return o.createElement(s.pP,null,o.createElement(c.A,{isCardText:!0,bold:!0},S("EA4H.General.Adults"),":"),o.createElement(m.Z,{align:"center",spacing:3},o.createElement(l.z,{deactivated:H,style:{width:32},variant:"small",circular:!0,inverted:!0,withIcon:!0,onClick:()=>{t.adultNumber-1==0||t.adultNumber<=x.minAdultNumber||I((e=>b(O({},e),{adultNumber:t.adultNumber-1})))}},o.createElement(d.G,{style:{fontSize:"14px"},icon:a.Kl})),o.createElement(s.K4,null,o.createElement(c.A,{style:{color:"inherit"}},t.adultNumber)),o.createElement(l.z,{deactivated:G,style:{width:32},variant:"small",circular:!0,inverted:!0,withIcon:!0,onClick:()=>{G||I((e=>b(O({},e),{adultNumber:t.adultNumber+1})))}},o.createElement(d.G,{style:{fontSize:"14px"},icon:r.r8}))),void 0!==x.maxChildNumber&&x.maxChildNumber>0&&o.createElement(o.Fragment,null,o.createElement(c.A,{isCardText:!0,bold:!0},S("EA4H.General.Children")," (",null!=(A=null==R?void 0:R.childMinAge)?A:0,"-",null!=(P=null==R?void 0:R.childMaxAge)?P:16," ",S("EA4H.General.YearsShortLowCaps"),"):"),o.createElement(m.Z,{align:"center",spacing:3},o.createElement(l.z,{deactivated:U,style:{width:32},variant:"small",circular:!0,inverted:!0,withIcon:!0,onClick:()=>(()=>{if(U)return;let e=[...t.childAges];e.pop(),I((n=>b(O({},n),{childNumber:t.childNumber-1,childAges:e})))})()},o.createElement(d.G,{style:{fontSize:"14px"},icon:a.Kl})),o.createElement(s.K4,null,o.createElement(c.A,{style:{color:"inherit"}},t.childNumber)),o.createElement(l.z,{deactivated:M,style:{width:32},variant:"small",circular:!0,inverted:!0,withIcon:!0,onClick:()=>{M||I((e=>b(O({},e),{childNumber:t.childNumber+1,childAges:[...e.childAges,0]})))}},o.createElement(d.G,{style:{fontSize:"14px"},icon:r.r8})))),x.maxChildNumber>0&&Array.from({length:t.childNumber},((e,n)=>{var l;return o.createElement(o.Fragment,{key:n+"child"},o.createElement(c.A,{isCardText:!0,bold:!0},(0,p.n)(S("EA4H.Online.AgeOfChildBrackets"),(n+1).toString()),":"),o.createElement(i.Ph,{style:{width:"110px",height:"38px"},"aria-hidden":"false",onChange:e=>((e,n)=>{let o=[...t.childAges];o&&o.length>e?o[e]=Number(n):o.push(Number(n)),I((e=>b(O({},e),{childAges:o}))),$()?k(!0):k(!1)})(n,e.target.value)},Array.from({length:(null!=(l=null==R?void 0:R.childMaxAge)?l:17)+1},((e,n)=>o.createElement("option",{key:n,value:n},n," ",S("EA4H.General.YearsShortLowCaps"))))))})),t.childNumber>0&&(null==R?void 0:R.hasSharer)&&N&&o.createElement(u.Z,{isCardText:!0,checkedBorderColor:"#000",checkedColor:"currentColor",Label:(0,p.n)(S("EA4H.Online.DoYouWantInfantToShareBed{0}"),(null!=(C=R.sharerCutOffAge)?C:0).toString()),isChecked:t.allowShareAge,onChange:e=>{return n=e.target.checked,void I((e=>b(O({},e),{allowShareAge:n})));var n}}))}},3849:function(e,n,t){t.d(n,{ER:function(){return r},Gd:function(){return l},K4:function(){return i},MS:function(){return a},Pw:function(){return u},W$:function(){return c},pP:function(){return d}});var o=t(12263);const l=o.ZP.div`
  @media (min-width: 1000px) {
    display: flex;
    padding: 10px 0;
  }

  @media (max-width: 999px) {
    max-width: 450px;
  }
`,a=o.ZP.div`
  @media (min-width: 1000px) {
    min-width: 370px;
    max-width: 370px;
    padding-right: 20px;
  }
`,r=o.ZP.div`
  @media (min-width: 1000px) {
    padding: 20px
  }

  @media (max-width: 999px) {
    margin-bottom: 10px;
    padding: 15px;
  }

  display: flex;
  flex-direction: column;
  border: 1px dashed rgba(0, 0, 0, .2);

  ${({selected:e})=>e&&o.iv`
    background-color: ${({theme:e})=>e.css.cardInnerBackground};
  `}
`,d=o.ZP.div`
  @media (min-width: 1000px) {
    margin: -10px 0
  }

  @media (max-width: 999px) {
    padding-bottom: 10px
  }
`,i=o.ZP.div`
  border-radius: 5px;
  margin: 0 5px;
  padding: 10px 15px;
  pointer-events: none;
  text-align: center;
  min-width: 40px;
  padding-right: 5px;
  padding-left: 5px;
  font-weight: 600;
  color: ${({theme:e})=>e.css.selectedDarkFontColor};
  border-color: ${({theme:e})=>e.css.darkSelectedColor};
  background: ${({theme:e})=>e.css.darkSelectedColor};
`,c=o.ZP.div`
  @media (min-width: 1000px) {
    padding: 15px 20px;
  }

  @media (max-width: 999px) {
    padding: 10px 15px;
  }
`,u=o.ZP.div`
  flex-grow: 1;
  
  @media (min-width: 1000px) {
    display: flex;
    justify-content: space-between;
    padding-right: 20px;
  }

  @media (max-width: 999px) {
    width: calc(100% - 110px);
    padding-right: 10px;
  }
`},76450:function(e,n,t){t.d(n,{s:function(){return o}});const o=(0,t(24972).xu)({key:"stepperIndexState",default:e=>e.defaultValue})},311:function(e,n,t){var o=t(8051),l=t(75435),a=t(52047),r=t(63339),d=t.n(r),i=t(59888),c=t(40387),u=t(30686),s=t(87262),m=t(9705),v=t(46651),g=t(56512);n.Z=({newInternalRoomId:e,removedAddons:n,removedAddonPackages:t})=>{var r,p,f,I,y,h,k,E,A;const[O,b]=(0,o.useState)([]),[P,C]=(0,o.useState)([]);let x=(0,o.useContext)(l.z);const{data:w}=(0,s.K)(),{data:R}=(0,u.H)(null==(r=null==w?void 0:w.booking)?void 0:r.bookingCode),B=(0,c.H)(),S=null==(p=null==x?void 0:x.activeBooking)?void 0:p.bookingData;let D=null!=(I=null==(f=null==R?void 0:R.optionalAddons)?void 0:f.filter((e=>(0,m.B)(e.addOnCategoryId))))?I:[],T=null!=(h=null==(y=null==R?void 0:R.optionalAddOnPackages)?void 0:y.filter((e=>(0,m.B)(e.addOnCategoryId))))?h:[],$=null==(k=null==R?void 0:R.optionalAddons)?void 0:k.filter((e=>!e.addOnCategoryId)),G=null==(E=null==R?void 0:R.optionalAddOnPackages)?void 0:E.filter((e=>!e.addOnCategoryId));$=d()($,(e=>(0,g.v)(e))),G=d()(G,(e=>(0,v.g)(e)));(0,o.useEffect)((()=>{if(n&&(null==n?void 0:n.length)>0||t&&(null==t?void 0:t.length)>0){let o=[],l=[];null==n||n.forEach((n=>{var t,l,a;if((n=>{return!(()=>{var t;let o=null==(t=S.optionalAddOns)?void 0:t.some((t=>t.addOnId===n&&(t.internalRoomBookingId===e||void 0===t.internalRoomBookingId)&&t.status!==i.Ms.New));return!(void 0===o||!o)})()&&!!(null==(t=S.rooms)?void 0:t.some((t=>{var o;return t.internalBookingId===e&&(null==(o=t.mandatoryAddOns)?void 0:o.every((e=>e.addOnId!==n)))})));var t})(n)){let r=null==(t=null==R?void 0:R.optionalAddons)?void 0:t.find((e=>e.addOnId===n));(null==(l=S.optionalAddOns)?void 0:l.some((n=>n.addOnId===(null==r?void 0:r.addOnId)&&(n.internalRoomBookingId===e||!n.internalRoomBookingId)&&n.status===i.Ms.NotChanged)))||(null==(a=S.rooms)?void 0:a.some((n=>{var t;return n.internalBookingId===e&&(null==(t=n.mandatoryAddOns)?void 0:t.some((e=>e.addOnId===(null==r?void 0:r.addOnId)&&e.status===i.Ms.NotChanged)))})))||o.push(r)}})),null==t||t.forEach((n=>{var t,o,a;if((n=>{return!(()=>{var t;let o=null==(t=S.optionalAddOnPackages)?void 0:t.some((t=>t.addOnPackageId===n&&(t.internalRoomId===e||void 0===t.internalRoomId)&&t.status!==i.Ms.New));return!(void 0===o||!o)})()&&!!(null==(t=S.rooms)?void 0:t.some((t=>{var o;return t.internalBookingId===e&&(null==(o=t.mandatoryAddOnPackages)?void 0:o.every((e=>e.addOnPackageId!==n)))})));var t})(n)){let r=null==(t=null==R?void 0:R.optionalAddOnPackages)?void 0:t.find((e=>e.addOnPackageId===n));(null==(o=S.optionalAddOnPackages)?void 0:o.some((n=>n.addOnPackageId===(null==r?void 0:r.addOnPackageId)&&(n.internalRoomId===e||!n.internalRoomId)&&n.status===i.Ms.NotChanged)))||(null==(a=S.rooms)?void 0:a.some((n=>{var t;return n.internalBookingId===e&&(null==(t=n.mandatoryAddOnPackages)?void 0:t.some((e=>e.addOnPackageId===(null==r?void 0:r.addOnPackageId)&&e.status===i.Ms.NotChanged)))})))||l.push(r)}})),b(o),C(l)}}),[n,t]);const H=(null==O?void 0:O.length)>0,M=(null==P?void 0:P.length)>0,U=(null==$?void 0:$.length)>0,N=(null==G?void 0:G.length)>0;return o.createElement(o.Fragment,null,H||M&&o.createElement(a.a,{categoryName:B("EA4H.EditReservation.TheseAddonsWereRemoved"),addOnPackages:P,addOns:O}),o.createElement("div",{style:{display:"flex",gap:"20px",flexDirection:"column"}},null==(A=null==R?void 0:R.addOnCategories)?void 0:A.map((e=>o.createElement(a.a,{key:e.id,categoryName:e.name,addOnPackages:T,addOns:D}))),(U||N)&&o.createElement(a.a,{key:"uncategorized",categoryName:B("EA4H.General.Uncategorized"),addOnPackages:G,addOns:$})))}},26176:function(e,n,t){var o=t(8051),l=t(12263),a=t(75435),r=t(61282),d=t(88201),i=t(17235),c=t(82795),u=t(63711),s=t(39411),m=t(85326),v=t(87325),g=t(47833),p=t(44746),f=t(36742),I=t(23973),y=t(17368),h=t(97660),k=t(311),E=t(39101),A=t(63016),O=t(17204),b=t(24972),P=t(76450),C=t(40387),x=t(69082),w=t(64868),R=t(40820),B=t(77938),S=t(77949);const D=o.createElement(i.hz,null,o.createElement(i.PL,null,o.createElement(s.M,null,o.createElement(m.a,{size:36}))));n.Z=({internalRoomBookingId:e,removedAddOnPackages:n,uniqueModalId:t,removedAddOns:m,affectedInternalRoomIds:T,hasToSelectNewRoomType:$})=>{var G;const H=(0,C.H)(),M=(0,o.useContext)(a.z),U=null==(G=null==M?void 0:M.activeBooking)?void 0:G.bookingData,N=(0,x.Z)(),[F,L]=(0,o.useState)(!1),[Z,j]=(0,b.FV)((0,P.s)({uniqueId:t,defaultValue:function(){if($)return 0;if(T.some((e=>(0,R.p)(e,U))))return 1;if(T.some((e=>(0,B.Q)(e,U))))return 2;if((0,S.L)(m,n,U,e))return 3;return 4}()})),_=(0,l.Fg)();const z=t=>t<1&&T.some((e=>(0,R.p)(e,U)))?1:t<2&&(0,B.Q)(e,U)?2:t<3&&(0,S.L)(m,n,U,e)?3:t>=3?4:z(t+1),W=()=>{return e=void 0,n=null,t=function*(){void 0!==Z&&Z>=4&&N.close();const e=z(Z);j(e)},new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));var e,n,t},V=o.createElement(i.mz,null,o.createElement(u.z,{inFooter:!0,onClick:e=>{e.preventDefault(),W()}},0===Z?H("EA4H.General.Cancel"):1===Z&&(0,B.Q)(e,U)||1===Z&&(0,S.L)(m,n,U,e)&&!(0,O.R$)(U)||2===Z&&(0,S.L)(m,n,U,e)&&!(0,O.R$)(U)?H("EA4H.General.Next"):H("EA4H.General.Done")));return o.createElement(r.Z,{modalName:"ReconfigureBooking",onCloseClicked:()=>{F||N.close()},footer:V},o.createElement(v.v,{active:void 0===Z?0:Z,breakpoint:"sm",size:"xs",iconSize:32,completedIcon:o.createElement(g.G,{icon:y.fV,style:{fontSize:16}}),styles:{stepIcon:{"&[data-completed]":{backgroundColor:_.css.buttonBackground,borderColor:_.css.buttonBackground},"&[data-progress]":{borderColor:_.css.buttonBackground}},separatorActive:{backgroundColor:_.css.buttonBackground}}},o.createElement(v.v.Step,{allowStepSelect:!1,icon:o.createElement(g.G,{icon:p.V1,style:{fontSize:16}}),label:o.createElement(c.A,{bold:!0,small:!0},(0,w.n)(H("EA4H.General.StepX"),1)),description:o.createElement(c.A,{small:!0},H("EA4H.General.RoomType_Hotel"))},o.createElement(o.Suspense,{fallback:D},o.createElement(d.Z,{originalInternalRoomBookingId:e,setDisableClose:L,stepComplete:()=>{(0,R.p)(e,U)?j(1):(0,B.Q)(e,U)?j(2):(0,S.L)(m,n,U,e)?j(3):j(4)}}))),o.createElement(v.v.Step,{allowStepSelect:!1,icon:o.createElement(g.G,{icon:h.SZ,style:{fontSize:16}}),label:o.createElement(c.A,{bold:!0,small:!0},(0,w.n)(H("EA4H.General.StepX"),2)),description:o.createElement(c.A,{small:!0},H("EA4H.General.UpdateAddOnTimeSlots"))},o.createElement(o.Suspense,{fallback:D},o.createElement(E.Z,{internalRoomIds:T}))),o.createElement(v.v.Step,{allowStepSelect:!1,icon:o.createElement(g.G,{icon:f.hV,style:{fontSize:16}}),label:o.createElement(c.A,{bold:!0,small:!0},(0,w.n)(H("EA4H.General.StepX"),3)),description:o.createElement(c.A,{small:!0},H("EA4H.EditReservation.ExtrasToPackage"))},o.createElement(o.Suspense,{fallback:D},o.createElement(A.Z,{internalRoomBookingId:e}))),o.createElement(v.v.Step,{allowStepSelect:!1,icon:o.createElement(g.G,{icon:I.ak,style:{fontSize:16}}),label:o.createElement(c.A,{bold:!0,small:!0},(0,w.n)(H("EA4H.General.StepX"),4)),description:o.createElement(c.A,{small:!0},H("EA4H.EditReservation.ExtrasToRoom"))},o.createElement(o.Suspense,{fallback:D},o.createElement(k.Z,{removedAddons:m,removedAddonPackages:n,newInternalRoomId:e}))),o.createElement(v.v.Completed,null,o.createElement(s.M,null,o.createElement(c.A,{bold:!0,large:!0},H("EA4H.General.TheRoomHasBeenReconfigured"))))))}},39101:function(e,n,t){var o=t(8051),l=t(81166);n.Z=({internalRoomIds:e})=>o.createElement(l.Z,{internalRoomIds:e,reAddToBasketOnLoad:!0})},63016:function(e,n,t){var o=t(8051),l=t(10335);n.Z=({internalRoomBookingId:e})=>o.createElement(l.Z,{internalRoomIds:[e]})},88201:function(e,n,t){var o=t(8051),l=t(20399),a=t(75435),r=t(19551),d=t(7835),i=t(24972),c=t(58),u=t(86304),s=t(86041),m=t(35262),v=t(41347),g=t(59154),p=t(69314);n.Z=({originalInternalRoomBookingId:e,setDisableClose:n,stepComplete:t})=>{const[f,I]=(0,o.useState)(),y=(0,o.useContext)(a.z),h=(0,i.sJ)(m.u),k=(0,i.sJ)(s.l),E=(0,i.Zl)(c.V),A=(0,i.Zl)(u.X),O=(0,p.Z)(),b=(0,v.g)(),{data:P}=(0,g.M)(),C=(0,l.useQueryClient)(),x=o=>{return l=void 0,a=null,r=function*(){if(!f)try{I(o),n(!0),(yield b.APIClient.basketsEditV1Patch({hitKey:o,resultId:null==k?void 0:k.resultId,nrOfUnits:1,bookingCode:y.activeBooking.bookingCode,channelId:null==h?void 0:h.channelId,originalInternalRoomBookingIdToUpdate:e})).errorString,yield C.invalidateQueries("basket"),t()}finally{I(void 0),n(!1)}},new Promise(((e,n)=>{var t=e=>{try{d(r.next(e))}catch(e){n(e)}},o=e=>{try{d(r.throw(e))}catch(e){n(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(t,o);d((r=r.apply(l,a)).next())}));var l,a,r};(0,o.useEffect)((()=>{A({onRateClicked:x})}),[]);return o.createElement(d.j,null,null==P?void 0:P.rooms.map((e=>{var n;const t=null==(n=null==k?void 0:k.roomsResult)?void 0:n.find((n=>n.roomId===e.id));if(t)return o.createElement(r.j,{showPrice:!0,key:`room-item-${e.id}-${t.cheapestPrice}`,onMoreInfoClicked:O.open,onTogglePrices:e=>(e=>{E((n=>(null==n?void 0:n.roomId)===e?{roomId:e,isExpanded:!n.isExpanded}:{roomId:e,isExpanded:!0}))})(e),room:e})})))}},2557:function(e,n,t){t.d(n,{J:function(){return f}});var o=t(8051),l=t(93806),a=t(12263),r=t(16781),d=t(41237),i=t(71566),c=t(82795),u=t(69083),s=t(61282),m=t(31071),v=t(40387),g=t(59154),p=t(69314);const f=({roomId:e})=>{var n,t;const f=(0,v.H)(),I=(0,p.Z)(),{data:y}=(0,g.M)(),h=(0,a.Fg)(),k=null==y?void 0:y.rooms.find((n=>n.id===e)),E=(0,l.useMediaQuery)({query:h.mediaQueries.verySmall});return o.createElement(s.Z,{modalName:"RoomInfo",onCloseClicked:()=>I.close(),imageCarousel:o.createElement(r.j,{contain:!0,height:E?250:400,images:null!=(n=null==k?void 0:k.images)?n:[]})},o.createElement(d.Dx,{style:{color:"inherit"}},null==k?void 0:k.name),o.createElement(c.A,{style:{marginTop:"20px",color:"inherit"},dangerouslySetInnerHTML:{__html:null==k?void 0:k.description}}),o.createElement(i.Q,{style:{marginTop:"40px",color:"inherit"}},f("EA4H.Online.Capacity")),o.createElement("hr",{style:{margin:"20px 0px",height:"1px",border:0,width:"100%",background:"#00000024"}}),o.createElement(u.do,null,null==(t=null==k?void 0:k.roomAmenities)?void 0:t.map((e=>o.createElement(m.Z,{key:`amenity-${e.roomAmenityTranslatedName}`},e.roomAmenityTranslatedName)))))}},94326:function(e,n,t){var o=t(8051),l=t(12263),a=t(93806),r=t(75435),d=t(95955),i=t(47833),c=t(97092),u=t(68197),s=t(63711),m=t(41237),v=t(82795),g=t(46601),p=t(53540),f=t(7535),I=t(4386),y=t(17204),h=t(9088),k=t(35262),E=t(24972),A=t(40387);n.Z=({selectedRoomToUpgrade:e,selectedRoomToUpgradeInfo:n,upgradeAlternative:t,rate:O,onKeep:b,onUpgrade:P})=>{var C,x;const[w,R]=(0,o.useState)(!1),[B,S]=(0,o.useState)(!1),D=(0,E.sJ)(k.u),T=(0,E.sJ)(h.Q),$=(0,o.useContext)(r.z),G=(0,A.H)(),H=(0,l.Fg)(),M=(0,a.useMediaQuery)({query:H.mediaQueries.verySmall}),U=$.activeBooking.bookingData,N=null!=n?n:null==O?void 0:O.roomInfo;if(!U)return null;if(!N)return null;const F=()=>{var n;return(null==N?void 0:N.id)===e.roomId?0:O&&(null==(n=O.rate)?void 0:n.totalPrice)?O.rate.totalPrice.priceInclVAT-e.totalPrice:0};return o.createElement(d.N,{images:null!=(C=N.images)?C:[]},o.createElement(I.K,{p:M?20:25,justify:"space-between",spacing:0},o.createElement(I.K,{spacing:0},o.createElement(m.ll,null,N.name),o.createElement(g.cJ,{expand:B,style:{marginTop:"10px"},maxLines:3,dangerouslySetInnerHTML:{__html:null!=(x=(0,y.ju)(N.description))?x:""}}),o.createElement(s.z,{style:{fontWeight:+H.css.bodyBoldFontWeight,fontFamily:H.css.bodyFontFamily,fontSize:H.css.smallFontSize,lineHeight:H.css.bodyLineHeight,alignSelf:"start"},variant:"text",onClick:()=>S(!B)},G("EA4H.General.MoreInformation"),o.createElement(i.G,{transform:{rotate:B?180:0},style:{marginLeft:"5px",fontSize:"16px"},icon:c.pt})),(null==D?void 0:D.displayRoomAttributesOnline)&&o.createElement("div",{style:{marginBottom:M?"20px":0}},o.createElement(p.b,{room:N})),o.createElement(f.R,{room:N})),o.createElement("div",{style:{paddingTop:"15px",display:"grid",borderTop:`${H.css.dividerBorderWidth} solid ${H.css.cardDividerColor}`,alignItems:"center",gridTemplateColumns:"1fr max-content",width:"100%"}},o.createElement(I.K,{spacing:0,style:{width:"max-content"}},o.createElement(v.A,{large:!0,bold:!0,style:{fontSize:M?H.css.bodyFontSize:H.css.bodyLargeFontSize,fontWeight:+H.css.bodyBoldFontWeight}},F()>=0&&"+",T.format(Math.round(F()))," ",null==D?void 0:D.currency),o.createElement(v.A,{style:{fontSize:H.css.smallFontSize,opacity:H.css.bodyMutedOpacity}},(()=>{let n=(0,y.UR)(e.startDate,e.endDate);return n>1?`${n} ${G("EA4H.General.Nights_LOWER")}`:`${n} ${G("EA4H.General.Night_LOWER")}`})(),", ",(()=>{var n,t;let o=null==(n=U.guests)?void 0:n.filter((e=>!e.isChild&&!e.isSharer)),l=null==(t=U.guests)?void 0:t.filter((e=>e.isChild)),a=null==o?void 0:o.filter((n=>{var t;return null==(t=e.guestIds)?void 0:t.includes(n.guestId)})).length,r=null==l?void 0:l.filter((n=>{var t;return null==(t=e.guestIds)?void 0:t.includes(n.guestId)})).length;return`${a} ${G(void 0!==a&&a>1?"EA4H.General.Adults":"EA4H.General.Adult")} ${void 0!==r&&r>0?`, ${r} ${G(r>1?"EA4H.General.Children":"EA4H.General.Child")}`:""}`})())),o.createElement(s.z,{withIcon:!0,isLoading:w,id:`${N.name}_${N.id}`,onClick:e=>{var n;e.preventDefault(),t?(R(!w),P(N,null==(n=null==O?void 0:O.rate)?void 0:n.hitKey)):b()}},G(t?"EA4H.General.Choose":"EA4H.EditReservation.Keep"),o.createElement(i.G,{icon:u._t})))))}},59062:function(e,n,t){var o=t(8051),l=t(28613),a=t(75435),r=t(61282),d=t(41237),i=t(82795),c=t(94326),u=t(7835),s=t(20399),m=t(17921),v=t(45851),g=t(30639),p=t(24972),f=t(86041),I=t(35262),y=t(41347),h=t(40387),k=t(59154),E=t(69082),A=t(98960);n.Z=({targetRoomToUpdate:e,upSell:n,overrideOnBack:t})=>{var O,b,P,C,x,w,R,B;const[S,D]=(0,o.useState)([]),[T,$]=(0,o.useState)(!1),G=(0,p.sJ)(f.l),H=(0,p.sJ)(I.u),M=(0,o.useContext)(l.c),U=(0,o.useContext)(a.z),N=(0,y.g)(),{data:F}=(0,k.M)(),L=(0,h.H)(),Z=(0,s.useQueryClient)(),j=(0,E.Z)(),_=(0,A.Z)(),z=null==(O=null==U?void 0:U.activeBooking)?void 0:O.bookingData,W=null==(b=z.paymentPolicyInformations)?void 0:b.map((e=>e.paymentPolicyId)),V=null==(P=z.cancellationPolicyDescriptions)?void 0:P.map((e=>e.id)),Q=null!=G?G:null==(x=null==(C=M.searchResults)?void 0:C.find((n=>n.internalRoomBookingId===(null==e?void 0:e.internalBookingId))))?void 0:x.result,q=null==(w=z.roomDescriptions)?void 0:w.find((n=>n.id==(null==e?void 0:e.roomId))),K=null!=(R=null==q?void 0:q.upsellRank)?R:0,J=null!=(B=null==q?void 0:q.rank)?B:0;let X=null==F?void 0:F.rooms.find((n=>n.id===e.roomId));(0,o.useEffect)((()=>{D(ee())}),[]);const Y=(n,t)=>{ne({originalRoom:e,newRoom:n,hitKey:t})},ee=()=>{var t;let o=[];const l=(0,g.BW)(e,z.guests);null==(t=null==Q?void 0:Q.roomsResult)||t.filter((n=>n.roomId!==e.roomId)).forEach((t=>{var a,r,d,i,c;const u=null==(a=null==Q?void 0:Q.roomContent)?void 0:a.filter((e=>e.id===t.roomId)),s=u&&u.length>0?u[0]:void 0,m=null!=(r=null==s?void 0:s.upsellRank)?r:0,v=null!=(d=null==s?void 0:s.rank)?d:0;if(n){if(K>0&&m>K)return;if(0==K&&v>J)return}const g=e.priceInfo[0].ratePlanId,p=e.packageId;null==(c=null==(i=t.rateAlternatives)?void 0:i.filter((e=>e.rateplanId===g||null!==p&&e.packageId===p)))||c.forEach((a=>{var r,d;let i=null==(r=null==a?void 0:a.ratesPerRoomConfig)?void 0:r.find((e=>{var n,t,o,a,r,d,i,c,u;return(null==(n=e.roomConfig)?void 0:n.adults)===l.adults&&(null!=(a=null==(o=null==(t=e.roomConfig)?void 0:t.childAges)?void 0:o.length)?a:0)===(null!=(d=null==(r=l.childAges)?void 0:r.length)?d:0)&&((null==(i=e.roomConfig)?void 0:i.sharerAge)===l.sharerAge||null===(null==(c=e.roomConfig)?void 0:c.sharerAge)&&void 0===l.sharerAge||void 0===(null==(u=e.roomConfig)?void 0:u.sharerAge)&&null===l.sharerAge)&&(null==W?void 0:W.includes(e.paymentPolicyId))&&(null==V?void 0:V.includes(e.cancellationPolicyId))}));i&&!i.isLocked&&null!==i.totalPrice&&(!n||Math.round(null==(d=i.totalPrice)?void 0:d.priceInclVAT)>=Math.round(e.totalPrice))&&o.push({room:t,rate:i,rateName:a.displayName,roomInfo:null==F?void 0:F.rooms.find((e=>e.id===t.roomId)),upsellRank:m,rank:v})}))}));const a=(e,n)=>(e>n)-(e<n);return o=o.sort((function(e,n){return a(e.upsellRank,n.upsellRank)||a(e.rank,n.rank)})),o},ne=n=>{return t=void 0,o=null,l=function*(){var t,o,l,a;if(!T)if(n){$(!0);const r=null!=G?G:null==(o=null==(t=M.searchResults)?void 0:t.find((n=>n.internalRoomBookingId===(null==e?void 0:e.internalBookingId))))?void 0:o.result;let d=yield N.APIClient.basketsEditV1Patch({hitKey:n.hitKey,resultId:null==r?void 0:r.resultId,nrOfUnits:1,bookingCode:z.bookingCode,channelId:N.channelId,originalInternalRoomBookingIdToUpdate:n.originalRoom.internalBookingId});if(!d.success){let e;return $(!1),e=null!=(l=z.bookingGuidId)?l:void 0,d.basketNotExist,void(null==H||H.channelId)}yield Z.invalidateQueries("basket"),j.open({removedAddOns:d.removedAddons,removedAddOnPackages:d.removedAddonPackages,internalRoomBookingId:d.currentEditRoomInternalId,affectedInternalRoomIds:null!=(a=d.internalRoomIdsToUpdate)?a:[]})}else $(!1),_.close()},new Promise(((e,n)=>{var a=e=>{try{d(l.next(e))}catch(e){n(e)}},r=e=>{try{d(l.throw(e))}catch(e){n(e)}},d=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);d((l=l.apply(t,o)).next())}));var t,o,l};if(0===(null==F?void 0:F.rooms.length))return null;const te=0!==S.length;return o.createElement(r.Z,{onCloseClicked:()=>{t?t():ne()},modalName:"UpgradeRoom"},o.createElement(d.Dx,null,L("EA4H.EditReservation.ChangeRoomTypeTitle")),o.createElement("p",null," "),o.createElement(i.A,null,L(te?"EA4H.EditReservation.ChangeRoomTypeContent":"EA4H.EditReservation.ThisRoomCanNotBeUpgraded")),o.createElement(m.T,{h:40}),o.createElement(v.u,{mounted:te,transition:"fade",duration:500,timingFunction:"ease-in"},(n=>o.createElement(u.j,{style:n},o.createElement(c.Z,{key:`${e.roomId}_org`,selectedRoomToUpgradeInfo:X,selectedRoomToUpgrade:e,onKeep:ne,onUpgrade:Y}),null==S?void 0:S.map((n=>{var t;return o.createElement(c.Z,{key:n.room.roomId,selectedRoomToUpgrade:e,onKeep:ne,onUpgrade:Y,upgradeAlternative:null==(t=null==Q?void 0:Q.roomsResult)?void 0:t.filter((n=>n.roomId!==e.roomId)).find((e=>e.roomId===n.room.roomId)),rate:n})}))))))}},8791:function(e,n,t){t.d(n,{$8:function(){return c},VW:function(){return d},k7:function(){return i}});var o=t(8051),l=t(30492),a=t(24972),r=t(32913);const d=(0,o.createContext)(null),i=({children:e})=>{const{data:n}=(0,l.jF)(),t=(0,a.Zl)(r.Fz);return(0,o.useEffect)((()=>{t(n)}),[]),o.createElement(d.Provider,{value:{multiPropertyInfo:n}},e)},c=()=>{const e=(0,o.useContext)(d);if(!e)throw new Error("TRIED TO USE MP CONTEXT OUTSIDE MP CONTEXT PROVIDER!");return e}},47311:function(e,n,t){t.d(n,{K:function(){return o}});const o=e=>{var n,t,o;const l=null==(t=null==(n=e.priceInfo)?void 0:n[0])?void 0:t.ratePlanId;return`${e.roomId}-${l}-${null==(o=e.roomConfig)?void 0:o.adults}`}},35458:function(e,n,t){t.d(n,{Z:function(){return a}});var o=t(8051),l=t(47311);const a=e=>({groupedAccommodationRooms:(0,o.useMemo)((()=>{var n;const t=new Map;return null==(n=null==e?void 0:e.rooms)||n.forEach((e=>{const n=(0,l.K)(e),o=t.get(n);t.set(n,o?o+1:1)})),Array.from(t,(e=>({key:e[0],value:e[1]})))}),[e])})},30510:function(e,n,t){t.d(n,{IL:function(){return s},Qf:function(){return u},XR:function(){return c},_f:function(){return p},b8:function(){return I},lX:function(){return m},nd:function(){return g},p$:function(){return y},vd:function(){return v},yp:function(){return f}});var o=t(17204),l=t(4665),a=t(80360),r=t(48774),d=t(9705),i=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const c=e=>{var n,t;let o=[];return(null==(n=e.translatedBedTypes)?void 0:n[0])&&o.push(null==(t=e.translatedBedTypes)?void 0:t[0]),e.roomSize&&o.push((0,r.S)(e)),o.join(", ")},u=(e,n,t)=>{const l=t.format((0,o.uq)(e)).replace(".","");return n.earliestCheckInTime&&"00:00:00"!==n.earliestCheckInTime?[l,n.earliestCheckInTime.substring(0,5)].join(", "):l},s=(e,n,t,l)=>{const a=(0,o.UR)(e,n);return`${t.format((0,o.uq)(n)).replace(".","")}, ${a} ${l(a>1?"EA4H.General.Nights":"EA4H.General.Night")}`},m=(e,n)=>{var t,o,l,a,r;const d=null!=(o=null==(t=null==e?void 0:e.roomConfig)?void 0:t.adults)?o:0,i=null!=(r=null==(a=null==(l=null==e?void 0:e.roomConfig)?void 0:l.childAges)?void 0:a.length)?r:0;return[`${d} ${n(1===d?"EA4H.General.Adult":"EA4H.General.Adults")}`,0===i?void 0:`${i} ${n(1===i?"EA4H.General.Child":"EA4H.General.Children")}`].filter((e=>Boolean(e))).join(", ")},v=(e,n)=>{var t,o,l,a,r,d,i;const c=[...null!=(t=n.mandatoryAddOns)?t:[],...null!=(o=n.mandatoryAddOnPackages)?o:[]];let u=[];for(const n of c){let t;if("addOnId"in n)t=null!=(r=null==(a=null==(l=e.addOnDescriptions)?void 0:l.find((e=>e.id===n.addOnId)))?void 0:a.name)?r:"";else{const o=null==(d=null==e?void 0:e.addOnPackageDescriptions)?void 0:d.find((e=>e.id===n.addOnPackageId));if(n.dynamic){let l=[];null==(i=n.basketAddOnPriceInfos)||i.forEach((n=>{var t,o,a;l.push(null!=(a=null==(o=null==(t=e.addOnDescriptions)?void 0:t.find((e=>e.id===n.addOnId)))?void 0:o.name)?a:"N/A")})),t=`${null==o?void 0:o.name} (${l.join(", ")})`}else t=`${null==o?void 0:o.name}`}const o="addOnId"in n?n.timeSlotInfo:void 0;if(u.find((e=>e.timeSlotInfo==o&&e.displayName===t)))continue;const c={displayName:t};"addOnId"in n&&(c.addonId=n.addOnId,c.timeSlotInfo=n.timeSlotInfo,c.guestId=n.guestId,c.ageGroupId=n.ageGroupId,c.nrOfUnits=n.numberOfUnits),u.push(c)}return u},g=(e,n,t,o,a,r,i,c)=>{var u,s,m,v;const g=null==(u=null==e?void 0:e.addOnDescriptions)?void 0:u.find((e=>e.id===n.addOnId)),p=null==(s=null==e?void 0:e.ageGroupDescriptions)?void 0:s.find((e=>e.ageGroupId===n.ageGroupId)),f=n.numberOfUnits;let I=null==g?void 0:g.name;if((0,l.zL)(n)){const a=(0,l.aP)(n,[{newAmount:f,addonId:n.addOnId,ageGroupId:n.ageGroupId,date:n.date,internalRoomId:n.internalRoomBookingId}],null==t?void 0:t.internalBookingId,void 0!==c?c:e.pricesIncludeVAT);I=`x${f} ${I} (${i.format(a)} ${o})`}return null!==n.date&&void 0!==n.date&&(I=n.timeSlotInfo?`${I} (${null==a?void 0:a.format(new Date(n.date))}, ${`${n.timeSlotInfo}`.split("T")[1].substring(0,5)}, ${n.numberOfUnits} ${r("EA4H.General.PersonsLOWER")})`:`${I} (${null==a?void 0:a.format(new Date(n.date))})`),p?(I=`${I} (${null!=(m=null==p?void 0:p.name)?m:p.typeOfAgeGroup}`,(0,d.B)(p.minAge)&&(0,d.B)(p.maxAge)&&(I=`${I} ${p.minAge}-${p.maxAge} ${r("EA4H.General.YearsLOWER")})`),I=`${I})`):(null==(v=null==e?void 0:e.optionalAddOns)?void 0:v.find((e=>e.ageGroupId&&e.addOnId===n.addOnId)))&&(I=`${I} (${r("EA4H.General.Adult")})`),I},p=(e,n,t,o,r)=>{var i,c,u,s,m,v,g,p,f;const I=null==(i=null==e?void 0:e.addOnPackageDescriptions)?void 0:i.find((e=>e.id===n.addOnPackageId)),y=null==(c=n.basketAddOnPriceInfos)?void 0:c[0],h=null==y?void 0:y.numberOfUnits;let k=null==I?void 0:I.name;if((0,a.uE)(n)){let n=null==(u=null==e?void 0:e.addOnDescriptions)?void 0:u.find((e=>e.id===(null==y?void 0:y.addOnId)));k=`${k} (${null==n?void 0:n.name})`}if((0,l.rd)(n)&&(0,a.uE)(n)){k=`x${h} ${k} (+ ${(null!=h?h:0)*(null!=(s=null==y?void 0:y.price)?s:0)} ${t})`}else if((0,l.rd)(n)){let e=0;null==(m=n.basketAddOnPriceInfos)||m.forEach((n=>{var t,o;e+=(null!=(t=n.numberOfUnits)?t:0)*(null!=(o=n.price)?o:0)})),k=`x${h} ${k} (+ ${e} ${t})`}else{let e=0;null==(v=n.basketAddOnPriceInfos)||v.forEach((n=>{e+=n.price})),k=`x${h} ${k} (+ ${e} ${t})`}void 0!==(null==y?void 0:y.date)&&null!==y.date&&(k=`${k} (${null==o?void 0:o.format(new Date(null==y?void 0:y.date))})`);const E=null==(g=null==e?void 0:e.ageGroupDescriptions)?void 0:g.find((e=>e.ageGroupId===(null==y?void 0:y.ageGroupId)));return E?(k=`${k} (${null!=(p=null==E?void 0:E.name)?p:E.typeOfAgeGroup}`,(0,d.B)(E.minAge)&&(0,d.B)(E.maxAge)&&(k=`${k} ${E.minAge}-${E.maxAge} ${r("EA4H.General.YearsLOWER")})`)):(null==(f=null==e?void 0:e.optionalAddOnPackages)?void 0:f.some((e=>{var n;return null==(n=e.basketAddOnPriceInfos)?void 0:n.some((e=>e.ageGroupId&&e.addOnId===(null==y?void 0:y.addOnId)))})))&&(k=`${k} (${r("EA4H.General.Adult")})`),k},f=(e,n,t,o,l,a)=>{var r,d,i,c,u,s,m,v;const f=[...e.optionalAddOns.filter((e=>e.internalRoomBookingId==n.internalBookingId)).map((e=>e.addOnId)),...e.optionalAddOnPackages.filter((e=>e.internalRoomId==n.internalBookingId)).map((e=>e.addOnPackageId))],I=[];for(const y of new Set(f)){const f=null!=(d=null==(r=e.optionalAddOns)?void 0:r.filter((e=>e.addOnId===y&&e.internalRoomBookingId==n.internalBookingId)))?d:[],h=null!=(c=null==(i=e.optionalAddOnPackages)?void 0:i.filter((e=>e.addOnPackageId===y&&e.internalRoomId==n.internalBookingId)))?c:[];let k=null==(s=null==(u=e.addOnDescriptions)?void 0:u.find((e=>e.id===y)))?void 0:s.name;k||(k=null==(v=null==(m=null==e?void 0:e.addOnPackageDescriptions)?void 0:m.find((e=>e.id===y)))?void 0:v.name),f.forEach((r=>{const d=g(e,r,n,o,a,l,t);I.find((e=>e.displayText===d))||I.push({displayText:d,addOnId:r.addOnId,date:r.date})})),h.forEach((n=>{const t=p(e,n,o,a,l);I.find((e=>e.displayText===t))||I.push({displayText:t,addOnPackageId:n.addOnPackageId,date:void 0})}))}return I},I=(e,n,t,o)=>i(void 0,null,(function*(){var l;let a=e.getQueryData(["addon",t,o]);a||(a=yield n.addonsV1(t,void 0,void 0,void 0,void 0,void 0,o));const r=null==(l=null==a?void 0:a.addOnsPerCategory)?void 0:l.find((e=>{var n;return null==(n=e.addons)?void 0:n.find((e=>e.addOnId===t))}));if(void 0!==r){const n=void 0!==(null==r?void 0:r.addons)?null==r?void 0:r.addons[0]:void 0;if(void 0!==n)return e.setQueryData([t,o],n),n}})),y=(e,n,t,o)=>i(void 0,null,(function*(){var l;let a=e.getQueryData(["addon_package",t,o]);a||(a=yield n.addonsV1(void 0,void 0,void 0,t,void 0,void 0,o));const r=null==(l=null==a?void 0:a.addOnsPerCategory)?void 0:l.find((e=>{var n;return null==(n=e.addOnPackages)?void 0:n.find((e=>e.addOnPackageId===t))}));if(void 0!==r){const n=void 0!==(null==r?void 0:r.addOnPackages)?null==r?void 0:r.addOnPackages[0]:void 0;if(void 0!==n)return e.setQueryData(["addon_package",t,o],n),n}}))},21568:function(e,n,t){t.d(n,{x:function(){return R}});var o=t(8051),l=t(12263),a=t(20399),r=t(82795),d=t(63847),i=t(75435),c=t(80360),u=t(30510),s=t(24972),m=t(21386),v=t(91696),g=t(41347),p=t(40387),f=t(30686),I=t(99301),y=t(39545),h=t(43834),k=t(31646),E=Object.defineProperty,A=Object.defineProperties,O=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,x=(e,n,t)=>n in e?E(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,w=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const R=({bookingData:e,noHeader:n,pricesIncludeVAT:t})=>{var E,R,B,S;const D=(0,s.sJ)(m.g),T=(0,p.H)(),$=(0,o.useContext)(i.z),G=(0,s.Zl)(v.C),H=(0,a.useQueryClient)(),M=(0,g.g)(),U=(0,l.Fg)(),N=(0,h.Z)(),F=(0,k.Z)(),{data:L}=(0,I.E)(),{data:Z}=(0,f.H)(null==e?void 0:e.bookingCode),j=(0,y.$)(),_=(0,o.useMemo)((()=>new Intl.DateTimeFormat(D,{day:"2-digit",weekday:"short",month:"long"})),[]),z=[...null!=(R=null==(E=null==e?void 0:e.optionalAddOns)?void 0:E.filter((e=>!e.internalRoomBookingId)))?R:[],...null!=(S=null==(B=null==e?void 0:e.optionalAddOnPackages)?void 0:B.filter((e=>!e.internalRoomId)))?S:[]];if(0===z.length)return null;const W=e=>w(void 0,null,(function*(){var n,t,l,a;let d;if(d=null==(n=null==Z?void 0:Z.optionalAddons)?void 0:n.find((n=>n.addOnId===e)),!d){const n=yield(0,u.b8)(H,M.APIClient,e,null==L?void 0:L.channelId);d={addOnId:null==n?void 0:n.addOnId,mainImageUrl:null==(l=null==(t=null==n?void 0:n.images)?void 0:t[0])?void 0:l.url,imageIds:null==(a=null==n?void 0:n.images)?void 0:a.map((e=>e.id)),description:null==n?void 0:n.description,name:null==n?void 0:n.name}}if(G((e=>{return n=((e,n)=>{for(var t in n||(n={}))P.call(n,t)&&x(e,t,n[t]);if(b)for(var t of b(n))C.call(n,t)&&x(e,t,n[t]);return e})({},e),A(n,O({show:!1}));var n})),$&&!$.isEditMode)N.open({contentComponent:o.createElement(r.A,null,d.description),Header:d.name,ImageUrl:d.mainImageUrl});else{const e=!d.addOnChargeUnit;F.open({Addon:d,showOnlyInfo:e,unavailable:e})}}));return o.createElement("div",null,!n&&o.createElement(r.A,{bold:!0,style:{color:U.css.sidebarColor,borderTop:"1px solid #ffffff24",paddingTop:"15px"}},T("EA4H.General.OptionalAddOns"),":"),o.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:n?0:"15px"}},z.map(((n,l)=>{if((0,c.Uc)(n)){const a=(0,u.nd)(e,n,void 0,null==L?void 0:L.currency,_,T,j,t);return o.createElement(d.Z,{small:!0,isLink:!0,underlineOnHover:!0,isSidebarText:!0,onClick:()=>W(n.addOnId),accentedBackground:l%2==0,key:JSON.stringify(n),style:{color:U.css.sidebarColor,padding:"4px 10px",cursor:"pointer"}},a)}const a=(0,u._f)(e,n,null==L?void 0:L.currency,_,T);return o.createElement(d.Z,{small:!0,isLink:!0,isSidebarText:!0,onClick:()=>{return e=n.addOnPackageId,w(void 0,null,(function*(){var n,t;let l;if(l=null==(n=null==Z?void 0:Z.optionalAddOnPackages)?void 0:n.find((n=>n.addOnPackageId===e)),!l){const n=yield(0,u.p$)(H,M.APIClient,e,null==L?void 0:L.channelId);l={addOnPackageId:null==n?void 0:n.addOnPackageId,mainImageUrl:null==n?void 0:n.images[0].url,imageIds:null==(t=null==n?void 0:n.images)?void 0:t.map((e=>e.id)),description:null==n?void 0:n.description,name:null==n?void 0:n.name}}if($&&!$.isEditMode)N.open({contentComponent:o.createElement(r.A,null,l.description),Header:l.name,ImageUrl:l.mainImageUrl});else{const e=!l.chargeUnit;F.open({Addon:l,showOnlyInfo:e,unavailable:e})}}));var e},accentedBackground:l%2==0,key:JSON.stringify(n),style:{padding:"4px 10px"}},a)}))))}},64597:function(e,n,t){t.d(n,{P:function(){return _}});var o=t(8051),l=t(12263),a=t(24972),r=t(41347),d=t(40387),i=t(32326),c=t(99301),u=t(39545),s=t(80790),m=t(82361),v=t(43834),g=t(69082),p=t(10377),f=t(47833),I=t(82795),y=t(84525),h=t(78462),k=t(71489),E=t(19195),A=t(20399),O=t(75425),b=t(21559),P=t(63847),C=t(75435),x=t(30510),w=t(17204),R=(t(57584),t(79660)),B=t(9705),S=t(59888),D=t(21386),T=t(91696),$=t(8791),G=t(87262),H=Object.defineProperty,M=Object.defineProperties,U=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,Z=(e,n,t)=>n in e?H(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,j=(e,n,t)=>new Promise(((o,l)=>{var a=e=>{try{d(t.next(e))}catch(e){l(e)}},r=e=>{try{d(t.throw(e))}catch(e){l(e)}},d=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);d((t=t.apply(e,n)).next())}));const _=({toggledRooms:e,onToggleRoom:n,marginBottom:t,noTopBorder:H,BookingData:_,RoomIndex:z,Room:W,noTopPadding:V,guestRoomInfo:Q,quantity:q})=>{var K,J,X,Y,ee,ne,te;const oe=(0,u.$)(),le=(0,a.sJ)(D.g),ae=(0,r.g)(),re=(0,a.Zl)(T.C),de=(0,A.useQueryClient)(),{data:ie}=(0,c.E)(),ce=(0,i.c)(),ue=(0,l.Fg)(),se=(0,d.H)(),me=(0,s.Z)(),ve=(0,m.Z)(),ge=(0,g.Z)(),pe=(0,v.Z)(),fe=(0,o.useContext)(C.z),{data:Ie}=(0,G.K)(),ye=!0===(null==fe?void 0:fe.isEditMode),he=(0,o.useMemo)((()=>new Intl.DateTimeFormat(le,{month:"short",day:"numeric",weekday:"short",year:"numeric"})),[le]),ke=(0,o.useMemo)((()=>new Intl.DateTimeFormat(le,{month:"short",day:"2-digit",weekday:"short"})),[]),Ee=(0,o.useMemo)((()=>new Intl.DateTimeFormat(le,{month:"long",day:"2-digit",weekday:"short"})),[]),Ae=(null==(K=_.optionalAddOns)?void 0:K.some((e=>e.internalRoomBookingId==W.internalBookingId)))||(null==(J=_.optionalAddOnPackages)?void 0:J.some((e=>e.internalRoomId==W.internalBookingId))),Oe=(0,o.useContext)($.VW),be=e=>j(void 0,null,(function*(){var n,t;if(!e)return;const l=yield(0,x.b8)(de,ae.APIClient,e,null==ie?void 0:ie.channelId);re((e=>{return n=((e,n)=>{for(var t in n||(n={}))F.call(n,t)&&Z(e,t,n[t]);if(N)for(var t of N(n))L.call(n,t)&&Z(e,t,n[t]);return e})({},e),M(n,U({show:!1}));var n})),pe.open({contentComponent:o.createElement(I.A,null,null==l?void 0:l.description),Header:null==l?void 0:l.name,ImageUrl:null==(t=null==(n=null==l?void 0:l.images)?void 0:n[0])?void 0:t.url})})),Pe=(null!=(X=_.rooms)?X:[]).length<=1,Ce=(0,o.useMemo)((()=>(0,x.vd)(_,W)),[W,_]),xe=e.includes(z),we=((0,O.Z)({start:(0,w.uq)(W.startDate),end:(0,w.uq)(W.endDate)}),q?`${q}x`:""),Re=q?`${we}: `:`${se("EA4H.General.Room")} ${z}:`,Be=null==(Y=null==_?void 0:_.ratePlanDescriptions)?void 0:Y.find((e=>{var n;return e.id===(null==(n=null==W?void 0:W.priceInfo[0])?void 0:n.ratePlanId)})),Se=(null==_?void 0:_.ratePlanDescriptions)&&(null==(ee=null==_?void 0:_.ratePlanDescriptions)?void 0:ee.length)>1;return o.createElement("div",{style:{width:"100%",borderTop:H?"none":"1px solid #ffffff24",paddingTop:V?0:"15px",marginBottom:null!=t?t:0}},o.createElement("div",{style:{display:"flex",gap:"15px",alignItems:"center",marginBottom:"20px"}},o.createElement("div",{style:{backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",width:"50px",height:"50px",backgroundImage:`url(${null==(te=null==(ne=null==Q?void 0:Q.images)?void 0:ne[0])?void 0:te.url})`}}),o.createElement("div",null,o.createElement(I.A,{bold:!0,style:{color:ue.css.sidebarColor}},Re," ",null==Q?void 0:Q.name," (",(0,x.lX)(W,se),")"),o.createElement(I.A,{small:!0,style:{color:ue.css.sidebarColor},muted:!0},(0,x.XR)(Q)),Se&&o.createElement(I.A,{small:!0,style:{color:ue.css.sidebarColor},muted:!0},null==Be?void 0:Be.name))),o.createElement(h.U,{in:xe},o.createElement(y.Q4,null,o.createElement(P.Z,{accentedBackground:!0,isSidebarText:!0,muted:!0,small:!0},se("EA4H.General.Check-In"),":"),o.createElement(P.Z,{accentedBackground:!0,isSidebarText:!0,small:!0,style:{paddingRight:"10px"}},(0,x.Qf)(W.startDate,_,he)),o.createElement(P.Z,{isSidebarText:!0,small:!0,muted:!0},se("EA4H.General.CheckOut"),":"),o.createElement(P.Z,{isSidebarText:!0,small:!0,style:{paddingRight:"10px"}},(0,x.IL)(W.startDate,W.endDate,he,se)),o.createElement(P.Z,{accentedBackground:!0,isSidebarText:!0,small:!0,muted:!0},se("EA4H.General.Guests"),":"),o.createElement(P.Z,{accentedBackground:!0,isSidebarText:!0,small:!0,style:{paddingRight:"10px"}},`${(0,x.lX)(W,se)}`),Ce.length>0&&o.createElement(o.Fragment,null,o.createElement(P.Z,{isSidebarText:!0,small:!0,muted:!0},se("EA4H.General.Includes"),":"),o.createElement(P.Z,{small:!0,style:{paddingRight:"10px"}},Ce.map((e=>{var n;return o.createElement(y.d,{onClick:()=>be(e.addonId),style:{paddingTop:0,paddingBottom:0,fontSize:ue.css.smallFontSize},as:"span",key:JSON.stringify(e)},e.timeSlotInfo?((e,n,t,o)=>{var l,a;const r=null==(l=null==_?void 0:_.ageGroupDescriptions)?void 0:l.find((e=>e.ageGroupId===o));return r&&(e=`${e} (${null!=(a=null==r?void 0:r.name)?a:r.typeOfAgeGroup}`,(0,B.B)(r.minAge)&&(0,B.B)(r.maxAge)&&(e=`${e} ${r.minAge}-${r.maxAge} ${se("EA4H.General.YearsLOWER")}`),e=`${e})`),`${e} (${Ee.format(new Date(n))}, ${`${n}`.split("T")[1].substring(0,5)}, ${t} ${se("EA4H.General.PersonsLOWER")})`})(e.displayName,e.timeSlotInfo,null!=(n=e.nrOfUnits)?n:1,e.ageGroupId):e.displayName)})))),Ae&&o.createElement(o.Fragment,null,o.createElement(P.Z,{isSidebarText:!0,accentedBackground:!0,small:!0,muted:!0},se("EA4H.General.Extras"),":"),o.createElement(P.Z,{accentedBackground:!0,small:!0,style:{paddingRight:"10px"}},(0,x.yp)(_,W,oe,null==ie?void 0:ie.currency,se,Ee).map((e=>{var n;return o.createElement(y.d,{onClick:()=>{var n;return be(null!=(n=e.addOnId)?n:e.addOnPackageId)},style:{paddingTop:0,paddingBottom:0,fontSize:ue.css.smallFontSize},as:"span",key:`${null!=(n=e.addOnId)?n:e.addOnPackageId}_${e.date}_${e.displayText}`},e.displayText)}))))),o.createElement("hr",{style:{height:ue.css.dividerBorderWidth,border:0,margin:0,marginBottom:"5px",width:"100%",background:ue.css.dividerBorderColor}}),o.createElement("div",{style:{marginBottom:"10px"}},(()=>{const e=[],n=W.priceInfo.flatMap((e=>new Date(e.endDate).getTime())),t=Math.max(...n),o=new Date(t);return W.priceInfo.forEach((n=>{var t,l,a,r,d,i;let c=new Date(n.endDate);const u=(null!=(t=null==n?void 0:n.roomPrice)?t:0)+(null!=(l=null==n?void 0:n.basketLevelDiscountAmount)?l:0),s=null!=(r=null!=(a=n.originalPrice)?a:n.roomPrice)?r:0,m=null!=(i=n.vatAmount)?i:0+(null!=(d=n.basketLevelDiscountVatAmount)?d:0);new Date(n.endDate).getTime()===o.getTime()&&(c=(0,b.Z)(new Date(n.endDate),{days:1}));const v=((e,n)=>{var t,o,l,a,r,d;const i=null!=(t=W.mandatoryAddOns)?t:[],c=null!=(o=W.mandatoryAddOnPackages)?o:[];if(!i&&!c)return{totalPrice:0,totalOriginalPrice:0,vat:0};const u=new Date(e).getTime(),s=n.getTime(),m=[...null!=(l=null==i?void 0:i.filter((e=>new Date(e.date).getTime()>=u&&new Date(e.date).getTime()<s&&!e.applyToPreviousRatePeriod)))?l:[],...null!=(a=i.filter((e=>new Date(e.date).getTime()>u&&new Date(e.date).getTime()<=s&&e.applyToPreviousRatePeriod)))?a:[],...null!=(r=c.flatMap((e=>{var n;return null==(n=e.basketAddOnPriceInfos)?void 0:n.filter((e=>new Date(e.date).getTime()>=u&&new Date(e.date).getTime()<s&&!e.applyToPreviousRatePeriod))})))?r:[],...null!=(d=c.flatMap((e=>{var n;return null==(n=e.basketAddOnPriceInfos)?void 0:n.filter((e=>new Date(e.date).getTime()>u&&new Date(e.date).getTime()<=s&&e.applyToPreviousRatePeriod))})))?d:[]],v=m.reduce(((e,n)=>{var t,o;return e+((null!=(t=null==n?void 0:n.vatAmount)?t:0)+(null!=(o=null==n?void 0:n.basketLevelDiscountVatAmount)?o:0))}),0);return{totalPrice:m.reduce(((e,n)=>{var t,o;return e+((null!=(t=null==n?void 0:n.price)?t:0)+(null!=(o=null==n?void 0:n.basketLevelDiscountAmount)?o:0))}),0),totalOriginalPrice:m.reduce(((e,n)=>{var t,o;return e+(null!=(o=null!=(t=null==n?void 0:n.originalPrice)?t:null==n?void 0:n.price)?o:0)}),0),vat:v}})(n.startDate,c),g=u+v.totalPrice,p=s+v.totalOriginalPrice,f=m+v.vat;e.push({StartDate:new Date(n.startDate),EndDate:new Date(n.endDate),Price:g,OriginalPrice:p,VAT:f})})),e})().map(((e,n)=>{let t=`${ke.format(e.StartDate)} - ${ke.format(e.EndDate)}`;return o.createElement("div",{key:n,style:{display:"flex",justifyContent:"space-between"}},o.createElement(I.A,{small:!0,isSidebarText:!0},t),o.createElement(I.A,{small:!0,isSidebarText:!0},o.createElement("span",{style:{textDecoration:e.OriginalPrice!==e.Price?"line-through":"none"}},oe.format(e.OriginalPrice)," ",null==ie?void 0:ie.currency),e.Price<e.OriginalPrice&&o.createElement("span",{style:{color:ue.css.offerColorDark}}," ",oe.format(e.Price)," ",null==ie?void 0:ie.currency)))})))),o.createElement(y.ol,null,o.createElement("div",{onClick:()=>n(z),style:{cursor:"pointer",gridRow:xe&&ye?2:1,gridColumn:1,flexBasis:"100%",userSelect:"none",color:"#fff",display:"flex",gap:"5px",alignItems:"center",alignContent:"center"}},o.createElement(f.G,{style:{color:ue.css.sidebarColor,opacity:ue.css.bodyMutedOpacity,transition:"all .2s",transform:xe?"rotate(0deg)":"rotate(180deg)"},icon:k.mT}),o.createElement(I.A,{muted:!0,underline:!0,small:!0,isSidebarText:!0},se(xe?"EA4H.General.ShowLess":"EA4H.General.ShowMore"))),o.createElement(I.A,{small:!0,bold:!0,style:{gridRow:1,gridColumn:3,color:ue.css.sidebarColor,textAlign:"right"}},se("EA4H.General.Subtotal"),":"," ",o.createElement("span",{style:{whiteSpace:"nowrap",textDecoration:W.originalTotalPrice!==W.totalPrice?"line-through":"none"}},we," ",oe.format((()=>{var e;let n=_.pricesIncludeVAT;Boolean(Oe)&&(n=Boolean(null==Oe?void 0:Oe.multiPropertyInfo.amountsIncludeVAT));const t=null!=(e=W.priceInfo.map((e=>{var t,o;const l=null!=(t=null!=e.originalPrice?e.originalPrice:e.roomPrice)?t:0;return n?l:l-(null!=(o=null!=e.originalPrice?e.originalVAT:e.vatAmount)?o:0)})).reduce(((e,n)=>e+n),0))?e:0,o=(()=>{var e,n,t,o,l,a,r,d;let i=_.pricesIncludeVAT;Boolean(Oe)&&(i=Boolean(null==Oe?void 0:Oe.multiPropertyInfo.amountsIncludeVAT));const c=null==(e=_.optionalAddOns)?void 0:e.filter((e=>e.internalRoomBookingId===W.internalBookingId));return(null!=(n=null==c?void 0:c.map((e=>{var n;const t=null!=e.originalPrice?e.originalPrice:e.price;return i?t:t-(null!=(n=null!=e.originalPrice?e.originalVATAmount:e.vatAmount)?n:0)})).reduce(((e,n)=>e+n),0))?n:0)+(null!=(o=null==(t=_.optionalAddOnPackages)?void 0:t.flatMap((e=>{var n;return(null!=(n=e.basketAddOnPriceInfos)?n:[]).filter((e=>e.internalRoomBookingId===W.internalBookingId)).map((e=>{var n;const t=null!=e.originalPrice?e.originalPrice:e.price;return i?t:t-(null!=(n=null!=e.originalPrice?e.originalVATAmount:e.vatAmount)?n:0)}))})).reduce(((e,n)=>e+n),0))?o:0)+(null!=(a=null==(l=null==W?void 0:W.mandatoryAddOns)?void 0:l.map((e=>{var n;const t=null!=e.originalPrice?e.originalPrice:e.price;return i?t:t-(null!=(n=null!=e.originalPrice?e.originalVATAmount:e.vatAmount)?n:0)})).reduce(((e,n)=>e+n),0))?a:0)+(null!=(d=null==(r=null==W?void 0:W.mandatoryAddOnPackages)?void 0:r.flatMap((e=>{var n;return(null!=(n=e.basketAddOnPriceInfos)?n:[]).map((e=>{var n;const t=null!=e.originalPrice?e.originalPrice:e.price;return i?t:t-(null!=(n=null!=e.originalPrice?e.originalVATAmount:e.vatAmount)?n:0)}))})).reduce(((e,n)=>e+n),0))?d:0)})();return t+o})())," ",_.currencyCode),W.originalTotalPrice!==W.totalPrice&&o.createElement("span",{style:{whiteSpace:"nowrap",color:ue.css.offerColorDark}}," ",oe.format((()=>{var e;let n=_.pricesIncludeVAT;Boolean(Oe)&&(n=null==Oe?void 0:Oe.multiPropertyInfo.amountsIncludeVAT);const t=null!=(e=W.priceInfo.map((e=>{var t,o;return n?e.roomPrice:(null!=(t=e.roomPrice)?t:0)-(null!=(o=e.vatAmount)?o:0)})).reduce(((e,n)=>e+n),0))?e:0,o=(()=>{var e,n,t,o,l,a,r,d;let i=_.pricesIncludeVAT;Boolean(Oe)&&(i=null==Oe?void 0:Oe.multiPropertyInfo.amountsIncludeVAT);const c=null==(e=_.optionalAddOns)?void 0:e.filter((e=>e.internalRoomBookingId===W.internalBookingId));return(null!=(n=null==c?void 0:c.map((e=>{var n;return i?e.price:e.price-(null!=(n=e.vatAmount)?n:0)})).reduce(((e,n)=>e+n),0))?n:0)+(null!=(o=null==(t=_.optionalAddOnPackages)?void 0:t.flatMap((e=>{var n;return(null!=(n=e.basketAddOnPriceInfos)?n:[]).filter((e=>e.internalRoomBookingId===W.internalBookingId)).map((e=>{var n;return i?e.price:e.price-(null!=(n=e.vatAmount)?n:0)}))})).reduce(((e,n)=>e+n),0))?o:0)+(null!=(a=null==(l=null==W?void 0:W.mandatoryAddOns)?void 0:l.map((e=>{var n;return i?e.price:e.price-(null!=(n=e.vatAmount)?n:0)})).reduce(((e,n)=>e+n),0))?a:0)+(null!=(d=null==(r=null==W?void 0:W.mandatoryAddOnPackages)?void 0:r.flatMap((e=>{var n;return(null!=(n=e.basketAddOnPriceInfos)?n:[]).map((e=>{var n;return i?e.price:e.price-(null!=(n=e.vatAmount)?n:0)}))})).reduce(((e,n)=>e+n),0))?d:0)})();return t+o})())," ",_.currencyCode," ")),xe&&o.createElement("div",{style:{display:"flex",gap:"15px",gridRow:1,gridColumn:1}},ye&&o.createElement("div",{onClick:()=>{ye&&me.open({room:W})},style:{gridRow:1,gridColumn:1,transition:"all .2s",transform:xe?`translateY(${ue.css.bodyLineHeight})`:"translateY(0px)",cursor:"pointer",color:ue.css.sidebarColor,display:"flex",gap:"5px",alignItems:"center",alignContent:"center"}},o.createElement(f.G,{icon:E.E8}),o.createElement(I.A,{underline:!0,small:!0,style:{color:ue.css.sidebarColor}},se("EA4H.General.Edit"))),ye&&o.createElement("div",{onClick:()=>{(0,R._)(_.rooms)&&ve.open({question:`${se("EA4H.General.Remove")} ${Q.name}?`,smallSize:!0,confirmFunction:()=>j(void 0,null,(function*(){ce.removeRoomsFromBasket.mutate({request:{roomToRemoveInfos:[{internalBookingId:W.internalBookingId,roomType:S.nW.Accommodation}],channelId:null==ie?void 0:ie.channelId}},{onSuccess:e=>{var n,t;const o=e;(null!=(n=o.internalRoomIdsToUpdate)?n:[]).length>0&&ge.open({removedAddOns:[],removedAddOnPackages:[],internalRoomBookingId:o.internalRoomIdsToUpdate[0],affectedInternalRoomIds:null!=(t=o.internalRoomIdsToUpdate)?t:[]})}})}))})},style:{gridRow:1,gridColumn:2,justifySelf:"end",opacity:Pe?.5:1,transition:"all .2s",transform:xe?`translateY(${ue.css.bodyLineHeight})`:"translateY(0px)",userSelect:"none",cursor:Pe?"default":"pointer",color:ue.css.sidebarColor,display:"flex",gap:"5px",alignItems:"center",alignContent:"center"}},o.createElement(f.G,{icon:p.Vu}),o.createElement(I.A,{underline:!0,small:!0,style:{color:ue.css.sidebarColor}},se("EA4H.General.Remove"))))))}},40065:function(e,n,t){t.d(n,{Y:function(){return d}});var o=t(8051),l=t(12263),a=t(41237),r=t(82795);const d=({color:e,uppercase:n,children:t,rightLineOnly:d})=>{const i=(0,l.Fg)();return o.createElement(a.es,{twoColumns:d},!d&&o.createElement("hr",{style:{margin:"0",height:i.css.dividerBorderWidth,border:0,width:"100%",background:i.css.dividerBorderColor}}),o.createElement(r.A,{bold:!0,muted:!0,style:{display:"inline-block",whiteSpace:"nowrap",paddingLeft:d?0:"15px",paddingRight:"15px",color:e,textTransform:n?"uppercase":"unset"}},t),o.createElement("hr",{style:{margin:"0",height:i.css.dividerBorderWidth,border:0,width:"100%",background:i.css.dividerBorderColor}}))}},54177:function(e,n,t){t.d(n,{F:function(){return a},Q:function(){return l}});var o=t(8051);const l=(0,o.createContext)(void 0),a=({children:e,addOnInfo:n,images:t})=>o.createElement(l.Provider,{value:{addOnInfo:n,images:t}},e)},36245:function(e,n,t){t.d(n,{U:function(){return f}});var o=t(8051),l=t(12263),a=t(47833),r=t(61459),d=t(63711),i=t(41237),c=t(82795),u=t(46601),s=t(54177),m=t(17204),v=t(81515),g=t(40387),p=t(43834);const f=({skeleton:e})=>{var n,t,f;const I=(0,o.useContext)(s.Q),y=(0,l.Fg)(),h=(0,g.H)(),k=(0,p.Z)(),E=()=>{k.open({contentComponent:o.createElement(c.A,null,null==I?void 0:I.addOnInfo.description),Header:null==I?void 0:I.addOnInfo.name,ImageUrl:(null==I?void 0:I.images)&&(null==I?void 0:I.images[0])?null==I?void 0:I.images[0].url:void 0})};return e?o.createElement(v.R,null):o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement("div",{style:{cursor:"pointer"},onClick:E},o.createElement(i.ll,null,null==(n=null==I?void 0:I.addOnInfo)?void 0:n.name),o.createElement(u.cJ,{style:{marginTop:"10px"},maxLines:3,dangerouslySetInnerHTML:{__html:null!=(f=(0,m.ju)(null==(t=null==I?void 0:I.addOnInfo)?void 0:t.description))?f:""}}),o.createElement("div",null,o.createElement(d.z,{style:{fontWeight:y.css.bodyBoldFontWeight,fontFamily:y.css.bodyFontFamily,fontSize:y.css.smallFontSize,lineHeight:y.css.bodyLineHeight,alignSelf:"start",color:y.css.cardLinkColor},variant:"text",onClick:E},h("EA4H.General.MoreInformation"),o.createElement(a.G,{style:{fontSize:"14px",marginLeft:"5px"},icon:r.yO})))))}},81515:function(e,n,t){t.d(n,{R:function(){return r}});var o=t(8051),l=t(41237),a=t(7402);const r=()=>o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement("div",{style:{cursor:"pointer"}},o.createElement("div",{style:{display:"flex",flexDirection:"column",rowGap:"5px"}},o.createElement(a.c,{width:"max-content"},o.createElement(l.ll,null,"some addon name")),o.createElement(a.c,{style:{marginTop:"10px"},width:"max-content"},"some addon description"),o.createElement(a.c,{width:"max-content"},"More information"))))},8114:function(e,n,t){t.d(n,{b:function(){return s}});var o=t(8051),l=t(93806),a=t(12263),r=t(54177),d=t(95955),i=t(36245),c=t(60258),u=t(4386);const s=({images:e,addonInfo:n,noMarginBottom:t,skeleton:s})=>{const m=(0,a.Fg)(),v=(0,l.useMediaQuery)({query:m.mediaQueries.verySmall});return o.createElement(r.F,{addOnInfo:n,images:e},o.createElement(c.S,{"data-testid":"addon_plate_large",noMarginBottom:t},o.createElement(d.N,{minHeight:"255px",images:null!=e?e:[]},o.createElement(u.K,{justify:"space-between",p:v?20:25},o.createElement(i.U,{skeleton:s})))))}},60258:function(e,n,t){t.d(n,{S:function(){return l}});var o=t(12263);const l=o.ZP.div`
  position: relative;
  margin-bottom: 25px;

  ${({noMarginBottom:e})=>e&&o.iv`
    margin-bottom: 0;
  `}
`}}]);