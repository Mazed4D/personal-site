/*! For license information please see 747.e81836b9f597146df78e.bundle.js.LICENSE.txt */
"use strict";(this.webpackChunkBV=this.webpackChunkBV||[]).push([[747],{49976:function(e,n,t){t.d(n,{F:function(){return a}});var l=t(20399),o=t(41347);const a=()=>{const e=(0,o.g)();return(0,l.useQuery)(["available_countries"],(()=>e.APIClient.localizationCountriesV1(void 0,e.channelId)),{staleTime:1/0})}},66747:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ln}});var l=t(8051),o=t(69083),a=t(93806),r=t(28613),i=t(75435),c=t(12263),d=t(62347),s=t(4386),u=t(39641),m=t(71566),p=t(82795),v=t(59888),g=t(24972),E=t(21386),y=t(9088),h=t(35262),C=t(40387);const b=(e,n)=>{let t=e.filter((e=>!e.isChild)),l=e.filter((e=>e.isChild));return`${t.length} ${t.length>1?n("EA4H.General.Adults"):n("EA4H.General.Adult")} ${l.length>0?`${l.length} ${l.length>1?n("EA4H.General.Children"):n("EA4H.General.Child")}`:""}`};var k=t(17204);const A=(e,n,t)=>{let l=(0,k.UR)(e,n);return`${l} ${t(l>1?"EA4H.General.Nights":"EA4H.General.Night")}`};var f=t(79660);var P=e=>{var n,t,o,a,r,k;const P=(0,g.sJ)(h.u),I=(0,g.sJ)(E.g),x=(0,g.sJ)(y.Q),B=(0,c.Fg)(),H=(0,C.H)();let w=(0,l.useContext)(i.z),D=null==(n=null==w?void 0:w.activeBooking)?void 0:n.bookingData,O=null==(t=null==w?void 0:w.originalBooking)?void 0:t.bookingData;const R=Boolean(D.isConferenceBooking),G=(null==(o=null==D?void 0:D.bookingRequestInformation)?void 0:o.bookingRequestType)===v.hu.Quote;if(!D)return null;let T=new Intl.DateTimeFormat(I,{month:"short",day:"2-digit",weekday:"short"});return l.createElement(s.K,{style:{color:B.css.frameworkHeaderColor},align:"center",sx:{padding:"0 30px 40px"}},l.createElement(m.Q,{style:{color:"inherit"}},G?H("EA4H.Confirmation.BookingQuote"):`${H("EA4H.General.Booking")} ${w.activeBooking.bookingCode}`),l.createElement(u.Z,{align:"center",position:"center",spacing:20},l.createElement(u.Z,{align:"center",position:"center",spacing:10},l.createElement(d.aP,null),l.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.createElement(p.A,{style:{color:"inherit"},muted:!0},H("EA4H.General.Arrival")),l.createElement(p.A,{style:{color:"inherit"}},T.format(new Date(D.startDate))))),l.createElement(u.Z,{align:"center",position:"center",spacing:10},l.createElement(d.bS,null),l.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.createElement(p.A,{muted:!0,style:{color:"inherit"}},H("EA4H.General.Departure")),l.createElement(p.A,{style:{color:"inherit"}},T.format(new Date(D.endDate))))),l.createElement(u.Z,{align:"center",position:"center",spacing:10},l.createElement(d.xF,null),l.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.createElement(p.A,{muted:!0,style:{color:"inherit"}},H(R?"EA4H.General.Participants":"EA4H.General.Guests")),l.createElement(p.A,{style:{color:"inherit"}},R?`${null==(r=null==(a=null==D?void 0:D.conferenceRooms)?void 0:a.find((e=>e.status!==v.Ms.Removed)))?void 0:r.nrParticipants} ${H("EA4H.General.PersonsLOWER")}`:b(null!=(k=D.guests)?k:[],H)))),(0,f._)(D.rooms)&&l.createElement(u.Z,{align:"center",position:"center",spacing:10},l.createElement(d._P,null),l.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.createElement(p.A,{muted:!0,style:{color:"inherit"}},H("EA4H.General.Nights")),l.createElement(p.A,{style:{color:"inherit"}},A(D.startDate,D.endDate,H)))),l.createElement(u.Z,{align:"center",position:"center",onClick:()=>{var e;return null==(e=document.getElementById("completed_payments"))?void 0:e.scrollIntoView({behavior:"smooth"})},style:{cursor:"pointer"},spacing:10},l.createElement(d.MD,null),l.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.createElement(p.A,{muted:!0,style:{color:"inherit"}},H(G?"EA4H.General.TotalPrice":"EA4H.General.LeftToPay")),l.createElement(p.A,{style:{color:"inherit"}},((e,n,t)=>void 0!==n&&void 0!==t?e.format(t-n):e.format(t))(x,O.alreadyPayed,D.totalPrice)," ",null==P?void 0:P.currency)))))},I=t(20399),x=t(41347),B=t(63711),H=t(17921),w=t(11890),D=t(47833);const O=c.ZP.div`
  display: flex;
  margin: -5px -20px;

  @media ${({theme:e})=>e.mediaQueries.verySmall} {
    margin: -10px 0;
    text-align: center;
  }

  & > * {
    flex: 1;
    padding: 0 20px;

    @media ${({theme:e})=>e.mediaQueries.verySmall} {
      padding: 10px 0
    }
  }
  
  & > * + * {
    border-left: 1px solid rgba(0,0,0,.1)
  }
`,R=c.ZP.div`
  display: grid;
  grid-template-columns: repeat(auto-fill,minmax(250px,1fr));
  column-gap: 20px;
  grid-row-gap: 20px;
`,G=c.ZP.div`
color: ${({theme:e})=>e.css.cardColor};
  background-color: ${({theme:e})=>e.css.cardBackground};// #f0f0f0;
  border-radius: 0;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    background-color: ${({theme:e})=>e.css.darkAccentColor};
    width: 4px;
    border-radius: 0;
  }

  @media (min-width: 751px) {
    display: flex;
    align-items: center;
    padding: 20px 25px 20px 29px;
    margin-bottom: 50px;
  }

  @media (max-width: 750px) {
    padding: 20px 20px 20px 24px;
    margin-bottom: 40px;
  }

  & > div:nth-child(1) {
    flex-grow: 1
  }

  & > div:nth-child(2) {
    display: flex;
    @media (max-width: 750px) {
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 10px;
    }

    @media (min-width: 751px) {
      display: flex;
    }
  }
`,T=c.ZP.div`
  cursor: pointer;
  display: flex;
  align-items: center;
  background: ${({theme:e})=>e.css.cardBackground};

  &:hover {
    background: ${({theme:e})=>e.css.cardInnerBackground};
  }

  border: 1px solid #f0f0f0;
  color: #000;
  height: 55px;
`,S=c.ZP.div`
  height: 55px;
  background: ${({theme:e})=>e.css.buttonBackground};

  @media (min-width: 751px) {
    width: 50px;
  }

  @media (max-width: 750px) {
    width: 40px;
  }
`;var N=t(9453),M=t(99301),j=t(59154),F=t(88718),_=t(82361),$=t(66656),V=t(41237),U=t(39411),z=t(95120);var Z=({onRoomClicked:e,room:n,roomIndex:t,dateFormatter:o})=>{const a=(0,l.useContext)(i.z),r=(0,C.H)(),d=(0,c.Fg)();let m=a.activeBooking.bookingData;return l.createElement(l.Fragment,null,l.createElement(T,{onClick:e},l.createElement(u.Z,{position:"left",align:"center"},l.createElement(S,null,l.createElement(U.M,{sx:{height:"100%"}},l.createElement(D.G,{icon:w._t,style:{fontSize:24}}))),l.createElement(s.K,{spacing:0},l.createElement(p.A,{bold:!0,muted:!0,small:!0},r("EA4H.General.Room")," ",t),l.createElement(u.Z,{position:"center",align:"center",spacing:1},l.createElement(p.A,{small:!0},n.roomName),l.createElement(D.G,{icon:z.Z$,color:d.css.bodyColor}),l.createElement(p.A,{small:!0},`${o.format(new Date(n.startDate))} - ${o.format(new Date(n.endDate))}, ${A(n.startDate,n.endDate,r)}`),l.createElement(D.G,{icon:z.Z$,color:d.css.bodyColor}),l.createElement(p.A,{small:!0},b(m.guests,r)))))))},Q=t(61282);var Y=({onRoomSelected:e,rooms:n})=>{const t=(0,g.sJ)(E.g),o=(0,$.o)(),a=(0,C.H)();let r=new Intl.DateTimeFormat(t,{month:"short",day:"2-digit",weekday:"short"});return l.createElement(Q.Z,{onCloseClicked:o.closeAll,modalName:"SelectBasketRoom"},l.createElement(l.Fragment,null,l.createElement(V.Dx,null,a("EA4H.General.ChooseRoom")),l.createElement(s.K,{justify:"flex-start",spacing:3},n.map(((n,t)=>l.createElement(Z,{roomIndex:t+1,room:n,dateFormatter:r,onRoomClicked:()=>e(n)}))))))},L=t(56898),W=Object.defineProperty,q=Object.defineProperties,J=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,ne=(e,n,t)=>n in e?W(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const te="select_rooms";var le=()=>{const e=(0,$.o)();return{open:({rooms:n,onRoomSelected:t})=>{var o;e.openModal((o=((e,n)=>{for(var t in n||(n={}))X.call(n,t)&&ne(e,t,n[t]);if(K)for(var t of K(n))ee.call(n,t)&&ne(e,t,n[t]);return e})({modalId:te,children:l.createElement(Y,{onRoomSelected:t,rooms:n}),centered:!1},L.$),q(o,J({onClick:()=>e.closeModal(te)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(te)}catch(e){}}),[])}},oe=t(43269),ae=t(17235),re=t(40065),ie=t(78628),ce=t(82422),de=t(65800),se=t(18214),ue=t(25140);function me(e,n){if(void 0===e)return"";let t;switch(e){case v.m2.Unknown:t=n("EA4H.General.Unknown");break;case v.m2.Cash:t=n("EA4H.General.Cash");break;case v.m2.Check:t=n("EA4H.General.Check");break;case v.m2.CreditCard:t=n("EA4H.General.CreditCard");break;case v.m2.GiftCertificate:t=n("EA4H.General.GiftCard");break;case v.m2.BankTransfer:t=n("EA4H.General.BankTransfer");break;case v.m2.BankDeposit:t=n("EA4H.General.BankDeposit");break;case v.m2.Invoice:t=n("EA4H.General.Invoice");break;case v.m2.DownPayment:t=n("EA4H.General.DownPayment");break;case v.m2.ExternalInvoiceDownPayment:t=n("EA4H.General.ExternalInvoiceDownPayment");break;case v.m2.Refunded:t=n("EA4H.General.Refunded")}return null!=t?t:""}const pe=({type:e})=>{var n,t;let o=window.location.protocol+"//"+window.location.hostname,a=(e=>{switch(e){case v.Oo.Visa:return{url:"/Content/img/payment/visa.png"};case v.Oo.AmericanExpress:return{url:"/Content/img/payment/americanexpress.png"};case v.Oo.Discover:return{url:"/Content/img/payment/discover.png"};case v.Oo.Handelsbanken:return{url:"/Content/img/payment/handelsbanken.png",width:"89px"};case v.Oo.ChinaUnionPay:return{url:"/Content/img/payment/unionpay.png"};case v.Oo.Dankort:return{url:"/Content/img/payment/dankort.png"};case v.Oo.DinersClub:return{url:"/Content/img/payment/dinersclub.png"};case v.Oo.JCB:return{url:"/Content/img/payment/jcb.png"};case v.Oo.MasterCard:return{url:"/Content/img/payment/mastercard.png"};case v.Oo.Nordea:return{url:"/Content/img/payment/nordea.png",width:"89px"};case v.Oo.SEB:return{url:"/Content/img/payment/seb.png"};case v.Oo.Swedbank:return{url:"/Content/img/payment/swedbank.png",width:"89px"};case v.Oo.Swish:case v.Oo.Trustly:return{url:"/Content/img/payment/swish.png",width:"89px"}}})(e),r=o+(null==a?void 0:a.url);return l.createElement("span",{style:{width:null!=(n=null==a?void 0:a.width)?n:"48px",height:"36px",backgroundSize:`${null!=(t=null==a?void 0:a.width)?t:"48px"} 108px`,backgroundImage:`url(${r})`}})},ve=({name:e})=>{return l.createElement(ue.Y,{styles:{label:{width:"100%",cursor:"pointer"}},value:e,label:l.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},l.createElement(p.A,null,(n=e,n===v.Oo.Visa?"VISA":n===v.Oo.MasterCard?"MasterCard":n===v.Oo.AmericanExpress?"American Express":n===v.Oo.DinersClub?"Diners club":n===v.Oo.Discover?"Discover":n===v.Oo.JCB?"JCB":n===v.Oo.ChinaUnionPay?"China UnionPay":n===v.Oo.Swish?"Swish":n===v.Oo.Dankort?"Dankort":n===v.Oo.Vipps?"Vipps":n===v.Oo.MobilePay?"Mobilepay":n===v.Oo.SEB?"SEB":n===v.Oo.Handelsbanken?"Handelsbanken":n===v.Oo.Swedbank?"Swedbank":n===v.Oo.Nordea?"Nordea":void 0)),l.createElement(pe,{type:e}))});var n},ge=(0,g.cn)({key:"confirmChangesSelectedCCState",default:void 0}),Ee=({ccTypes:e,isSelected:n,amountToPay:t})=>{const o=(0,C.H)(),{data:a}=(0,M.E)(),[r,i]=(0,g.FV)(ge);return l.createElement(de.U.Item,{value:"cc"},l.createElement(de.U.Control,null,l.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},l.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},n&&l.createElement(D.G,{color:"green",style:{height:"25px"},icon:se.LE}),l.createElement(p.A,{large:!0},o("EA4H.General.CreditCard"))),l.createElement("div",{style:{display:"flex",gap:"6px"}},e.map((e=>l.createElement(pe,{type:e})))))),l.createElement(de.U.Panel,null,l.createElement("div",{style:{display:"flex",placeContent:"space-between"}},l.createElement(p.A,{bold:!0},o("EA4H.Online.ChooseYourCreditCard"),":"),l.createElement(p.A,{bold:!0},o("EA4H.Online.AmountToPay"),": ",t," ",null==a?void 0:a.currency)),l.createElement(ue.Y.Group,{id:"cc_radio_group",value:r,onChange:e=>i(e),style:{width:"50%"},withAsterisk:!0},e.map((e=>l.createElement(ve,{name:e}))))))},ye=({isSelected:e,amountToPay:n})=>{const t=(0,C.H)(),{data:o}=(0,M.E)();let a=window.location.protocol+"//"+window.location.hostname+"/Content/img/payment/paypal.png";return l.createElement(de.U.Item,{value:"paypal"},l.createElement(de.U.Control,null,l.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},l.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e&&l.createElement(D.G,{color:"green",style:{height:"25px"},icon:se.LE}),l.createElement(p.A,{large:!0},"Paypal")),l.createElement("div",{style:{display:"flex",gap:"6px"}},l.createElement("span",{style:{width:"78px",height:"36px",backgroundSize:"78px 108px",backgroundImage:`url(${a})`}})))),l.createElement(de.U.Panel,null,l.createElement(p.A,{bold:!0},t("EA4H.Online.AmountToPay"),": ",n," ",null==o?void 0:o.currency),l.createElement(ue.Y.Group,{name:"favoriteFramework",styles:{root:{gap:"0"}},style:{width:"50%"},withAsterisk:!0})))},he=({name:e,amountToPay:n,isSelected:t,logoUrl:o})=>{const a=(0,C.H)();let r=window.location.protocol+"//"+window.location.hostname+o;const{data:i}=(0,M.E)();return l.createElement(de.U.Item,{value:e},l.createElement(de.U.Control,null,l.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},l.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},t&&l.createElement(D.G,{color:"green",style:{height:"25px"},icon:se.LE}),l.createElement(p.A,{large:!0},e)),l.createElement("img",{src:r,width:"70"}))),l.createElement(de.U.Panel,null,l.createElement(p.A,{bold:!0},a("EA4H.Online.AmountToPay"),": ",n," ",null==i?void 0:i.currency)))},Ce=({paymentMethods:e,amount:n})=>{var t;const[o,a]=(0,l.useState)(e.dibsEasyIsDefaultChoice?"DIBS":e.nexiIsDefaultChoice?"NEXI":e.makeCommerceIsDefaultChoice?"MakeCommerce":e.onlineCreditCardIsDefaultChoice?"cc":e.payPalIsDefaultChoice?"paypal":null);return l.createElement(de.U,{value:o,onChange:a},e.onlineCreditCard&&l.createElement(Ee,{amountToPay:n,ccTypes:null!=(t=e.onlineCreditCard.availableCreditCardChoicesExcludeBankTransfers)?t:[],isSelected:"cc"===o}),e.paypalModel&&l.createElement(ye,{amountToPay:n,isSelected:"paypal"===o}),e.dibsEasy&&l.createElement(he,{name:"DIBS",logoUrl:"/Content/img/payment/dibs.png",isSelected:"DIBS"===o,amountToPay:n}),e.nexi&&l.createElement(he,{name:"NEXI",logoUrl:"/Content/img/payment/Nexi_logo.png",isSelected:"NEXI"===o,amountToPay:n}),e.makeCommerce&&l.createElement(he,{name:"MakeCommerce",logoUrl:"/Content/img/payment/makecommerce_logo.png",isSelected:"MakeCommerce"===o,amountToPay:n}))},be=({historyItem:e,children:n})=>{const t=new Date(e.date);return l.createElement("div",null,l.createElement(p.A,null,n),l.createElement("div",null,t.toLocaleDateString()," ",t.toLocaleTimeString()))};var ke=t(85326),Ae=t(64868),fe=(e,n,t)=>new Promise(((l,o)=>{var a=e=>{try{i(t.next(e))}catch(e){o(e)}},r=e=>{try{i(t.throw(e))}catch(e){o(e)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,r);i((t=t.apply(e,n)).next())}));var Pe=()=>{var e,n,t,o,a;const r=(0,g.sJ)(ge),[c,d]=(0,l.useState)(void 0),[s,u]=(0,l.useState)(void 0),[m,E]=(0,l.useState)(void 0),[b,A]=(0,l.useState)(void 0),[f,P]=(0,l.useState)(void 0),[I,H]=(0,l.useState)(!0),w=(0,$.o)(),O=(0,g.sJ)(y.Q),R=(0,g.sJ)(h.u),G=(0,F.Z)({isEditReservation:!0}),T=(0,C.H)(),S=(0,l.useContext)(i.z),N=S.activeBooking.bookingData,M=S.originalBooking.bookingData,j=(0,x.g)();(0,l.useEffect)((()=>{_()}),[]);const _=()=>fe(void 0,null,(function*(){try{let e=window.location.protocol+"//"+window.location.hostname;yield Promise.all([j.APIClient.basketsOnlinePaymentMethodsV1(e,null==R?void 0:R.channelId),j.APIClient.basketsCheckoutConditionsV1(null==R?void 0:R.channelId)]).then((e=>{var n,t;const l=e[0],o=e[1];u(l),l&&l.fullPaymentAmount&&A(O.format(l.fullPaymentAmount)),o&&E(o),null!==(null==(n=null==l?void 0:l.klarnaCheckoutModel)?void 0:n.html)&&void 0!==(null==(t=null==l?void 0:l.klarnaCheckoutModel)?void 0:t.html)&&P(l.klarnaCheckoutModel.html)}))}finally{H(!1)}}));let V=T("EA4H.General.SecurePaymentOptions");(null==s?void 0:s.klarnaCheckout)&&s.klarnaCheckoutModel&&(V=T("EA4H.Online.KlarnaPageInfoText"));const z=s&&(void 0!==N.alreadyPayed?N.totalPrice-M.alreadyPayed:N.totalPrice)>0&&s.fullPaymentHasToBePaidAtTheTimeOfBooking&&((null==(e=s.klarnaCheckoutModel)?void 0:e.html)||!s.klarnaCheckout&&(null!=(n=s.fullPaymentAmount)?n:0)>0);let Z=null;return z&&(f?Z=l.createElement("div",null,l.createElement(oe.Z,{html:f})):!(null==s?void 0:s.klarnaCheckout)&&void 0!==(null==s?void 0:s.fullPaymentAmount)&&s.fullPaymentAmount>0&&(Z=l.createElement(Ce,{paymentMethods:s,amount:null!=b?b:0}))),l.createElement(Q.Z,{onCloseClicked:()=>w.closeAll(),modalName:"ConfirmChanges",footer:l.createElement(ae.mz,null,!Boolean(f)&&l.createElement(B.z,{onClick:()=>fe(void 0,null,(function*(){let e=(0,k.R$)(N),n=!1;if(void 0!==c&&(n=c),d(n),e||!n)return;let t={channelId:null==R?void 0:R.channelId,checkoutUrl:window.location.href,creditCardType:r};const l=yield j.APIClient.bookingsCommitV1(t);if(void 0!==l){if(l.status===v.fz.NoChangesMade){let e=yield j.APIClient.bookingsBookingV1(N.bookingCode,void 0,void 0,null==R?void 0:R.channelId);return S.RedoSearch(e.bookingData),void w.closeAll()}void 0!==l.redirectUrl&&(window.location.href=l.redirectUrl),w.closeAll()}})),deactivated:!c,inFooter:!0},T("EA4H.General.ConfirmChanges")))},I&&l.createElement(U.M,null,l.createElement(ke.a,null)),s&&l.createElement(l.Fragment,null,l.createElement("div",{style:{display:"flex",gap:"20px"}},l.createElement("div",{style:{width:"100%",border:"1px solid #00000024",padding:"15px"}},l.createElement(p.A,{bold:!0},T("EA4H.General.CompletedPayments")),l.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"5px",marginTop:"5px"}},null==(t=N.paymentHistory)?void 0:t.map((e=>{let n=(0,Ae.n)(T("EA4H.EditReservation.Paid{0}with{1}"),O.format(e.amount),me(e.transactionType,T));return l.createElement(be,{historyItem:e},n)}))),(null!=(a=null==(o=N.paymentHistory)?void 0:o.length)?a:0)<1&&l.createElement(p.A,{small:!0,bold:!0},T("EA4H.Manage.Reservations.ThereAreNoPaymentTransactionForThisReservationYet"))),l.createElement("div",{style:{width:"50%",border:"1px solid #00000024",padding:"15px"}},l.createElement(p.A,{bold:!0},T("EA4H.General.PaymentSummary")),l.createElement("div",null,l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(p.A,null,T("EA4H.General.Total")),l.createElement(p.A,null,O.format(N.totalPrice)," ",N.currencyCode)),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(p.A,null,T("EA4H.General.AlreadyPaid"),":"),l.createElement(p.A,null,O.format(void 0!==M.alreadyPayed?M.alreadyPayed:0)," ",N.currencyCode)),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(p.A,{bold:!0},T("EA4H.General.BalanceDue"),":"),l.createElement(p.A,null,O.format(void 0!==N.alreadyPayed?N.totalPrice-M.alreadyPayed:N.totalPrice)," ",N.currencyCode))))),z&&l.createElement("div",{style:{marginTop:"10px"}},l.createElement(re.Y,null,l.createElement(D.G,{style:{marginRight:"8px"},icon:ie.by}),V)),Z,void 0!==c&&!c&&l.createElement("div",{style:{padding:"10px",background:"#ffe6e6",color:"red",border:"1px solid red",marginBottom:"4px"}},l.createElement(p.A,{style:{color:"inherit"}},null==m?void 0:m.pleaseReadTermsAndConditionsTranslation)),l.createElement("div",{style:{margin:"20px 0px"}},l.createElement(ce.Z,{Label:l.createElement("span",{style:{textDecoration:"underline"},onClick:()=>{G.open({privacyPolicy:null==m?void 0:m.privacyPolicy,parentModalConfirmBooking:!0})},dangerouslySetInnerHTML:{__html:null==m?void 0:m.yesIHaveReadAndAcceptedTermsAndConditionsTranslation}}),onChange:()=>d((e=>!e)),checkedColor:"black",isChecked:Boolean(c)})),l.createElement(p.A,{muted:!0,small:!0},T("EA4H.EditReservation.ConfirmChangesAndGetForwardedToPaymentPartner"))))},Ie=Object.defineProperty,xe=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Oe=(e,n,t)=>n in e?Ie(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Re="confirm_changes_modal";var Ge=()=>{const e=(0,$.o)();return{open:()=>{var n;e.openModal((n=((e,n)=>{for(var t in n||(n={}))we.call(n,t)&&Oe(e,t,n[t]);if(He)for(var t of He(n))De.call(n,t)&&Oe(e,t,n[t]);return e})({modalId:Re,children:l.createElement(Pe,null),centered:!1},L.$),xe(n,Be({onClick:()=>e.closeModal(Re)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(Re)}catch(e){}}),[])}},Te=t(74169),Se=t(45851),Ne=t(64209);var Me=e=>{var n,t;const o=(0,l.useContext)(i.z),a=(0,g.sJ)(y.Q),r=Qe(),d=(0,x.g)(),s=(0,c.Fg)(),u=(0,C.H)(),[m,E]=(0,l.useState)(!0),[h,b]=(0,l.useState)(v.jQ.Personal),[k,A]=(0,l.useState)(null!=(n=u("EA4H.General.Personal"))?n:""),f=null==o?void 0:o.activeBooking.bookingData,P=(0,l.useRef)(null);if(!f)return null;const I=()=>{return e=void 0,n=null,t=function*(){let e=m;o.activeBooking.cancellationData&&null===o.activeBooking.cancellationData.allowStoreCreditVoucherMessage&&(e=!1);const n={bookingCode:f.bookingCode,storeCredit:e,channelId:null==d?void 0:d.channelId,reasonForCancellation:h,otherReason:k};let t=yield d.APIClient.bookingsCancelReservationV1(n);t.success&&(window.location.href="/reservation/view?channelId="+t.channelId+"&bookingGuid="+t.bookingGuid)},new Promise(((l,o)=>{var a=e=>{try{i(t.next(e))}catch(e){o(e)}},r=e=>{try{i(t.throw(e))}catch(e){o(e)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,r);i((t=t.apply(e,n)).next())}));var e,n,t};if(!f)return null;o.activeBooking.cancellationData&&!o.activeBooking.cancellationData.reservationHasBeenCancelled&&!o.activeBooking.cancellationData.notAllowCancelReservation&&!o.activeBooking.cancellationData.notPossibleToCancelOnline&&o.activeBooking.cancellationData.standaloneAddonsBooking;const H=o.activeBooking.cancellationData&&o.activeBooking.cancellationData.hotelInfo,w=o.activeBooking.cancellationData&&o.activeBooking.cancellationData.reservationHasBeenCancelled,D=o.activeBooking.cancellationData&&o.activeBooking.cancellationData.notAllowCancelReservation,O=o.activeBooking.cancellationData&&(o.activeBooking.cancellationData.notPossibleToCancelOnline||o.activeBooking.cancellationData.standaloneAddonsBooking);let R;const G=(e,n)=>{A(n),b(e)};return l.createElement(Q.Z,{modalName:"CancelBooking",onCloseClicked:()=>r.close(),footer:l.createElement(ae.mz,null,l.createElement(B.z,{inFooter:!0,onClick:e=>{e.preventDefault(),I()}},u("EA4H.General.Confirm")))},w||D||O?w?l.createElement(p.A,null,u("EA4H.Online.YourReservationHasBeenCancelled")):D?l.createElement(p.A,null,u("EA4H.Confirmation.ThisReservationIsEitherPassedReservationOrNotAllowedToCancelOnline")):O?(null!=H&&(null!=H.hotelPhoneNumber?R=null!=H.homePage?l.createElement(p.A,null,l.createElement("a",{href:H.hotelPageLink,target:"_new",style:{textDecoration:"underline",cursor:"pointer;"}},H.hotelName),"- ",u("EA4H.General.Phone")," ",H.displayPhoneNumber):l.createElement(p.A,null,H.displayPhoneNumberString):null!=H.homePage&&(R=l.createElement(l.Fragment,null,l.createElement(p.A,null,l.createElement("a",{href:H.hotelPageLink,target:"_new",style:{textDecoration:"underline",cursor:"pointer;"}},H.hotelName))))),l.createElement(l.Fragment,null,l.createElement(V.Dx,null),R)):void 0:l.createElement(l.Fragment,null,l.createElement(V.Dx,null,u("EA4H.Confirmation.PleaseConfirmYourCancellation")),l.createElement("p",null," "),l.createElement(p.A,null,u("EA4H.Confirmation.PleaseConfirmYourCancellationInfoText")),l.createElement("p",null," "),l.createElement(p.A,{bold:!0,style:{margin:"10px 0"}},u("EA4H.General.CancellationCost")),l.createElement(Te.i,{striped:!0,highlightOnHover:!0},l.createElement("tbody",null,l.createElement("tr",null,l.createElement("td",null,u("EA4H.Online.TotalPriceBeforeCancellation"),":"),l.createElement("td",null,o.activeBooking.cancellationData&&a.format(o.activeBooking.cancellationData.totalAmount))),l.createElement("tr",null,l.createElement("td",null,u("EA4H.General.AlreadyPaid"),":"),l.createElement("td",null,l.createElement("span",null,o.activeBooking.cancellationData&&a.format(o.activeBooking.cancellationData.alreadyPaidAmount)))),l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,u("EA4H.General.CancellationCost"),":")),l.createElement("td",null,l.createElement("b",null,o.activeBooking.cancellationData&&a.format(o.activeBooking.cancellationData.cancellationCostAmount)))),l.createElement("tr",null,l.createElement("td",null,u("EA4H.Online.TotalRefund"),":"),l.createElement("td",null,o.activeBooking.cancellationData&&a.format(o.activeBooking.cancellationData.totalRefundAmount))))),l.createElement("br",null),!0!==(null==(t=o.activeBooking.bookingData)?void 0:t.isConferenceBooking)&&l.createElement(l.Fragment,null,l.createElement(ue.Y.Group,{value:h,onChange:e=>{var n,t,l,o,a,r;switch(e){case v.jQ.Personal:G(e,null!=(n=u("EA4H.General.Personal"))?n:"");break;case v.jQ.CancelledTrip:G(e,null!=(t=u("EA4H.General.CancelledTrip"))?t:"");break;case v.jQ.FoundCheaperHotel:G(e,null!=(l=u("EA4H.General.FoundCheaperHotel"))?l:"");break;case v.jQ.FoundOtherHotel:G(e,null!=(o=u("EA4H.General.FoundOtherHotel"))?o:"");break;case v.jQ.NotWannaTell:G(e,null!=(a=u("EA4H.General.NotWannaTell"))?a:"");break;case v.jQ.Other:G(e,null!=(r=u("EA4H.General.Other"))?r:"")}},name:"cancellationReason",label:l.createElement(p.A,{bold:!0},u("EA4H.Confirmation.ReasonForCancellationExplanation")),mb:10},l.createElement(ue.Y,{styles:{radio:{"&:checked":{backgroundColor:s.css.buttonBackground,borderColor:s.css.buttonBackground}}},value:v.jQ.Personal,label:l.createElement(p.A,null,u("EA4H.General.Personal"))}),l.createElement(ue.Y,{styles:{radio:{"&:checked":{backgroundColor:s.css.buttonBackground,borderColor:s.css.buttonBackground}}},value:v.jQ.CancelledTrip,label:l.createElement(p.A,null,u("EA4H.General.CancelledTrip"))}),l.createElement(ue.Y,{styles:{radio:{"&:checked":{backgroundColor:s.css.buttonBackground,borderColor:s.css.buttonBackground}}},value:v.jQ.FoundCheaperHotel,label:l.createElement(p.A,null,u("EA4H.General.FoundCheaperHotel"))}),l.createElement(ue.Y,{styles:{radio:{"&:checked":{backgroundColor:s.css.buttonBackground,borderColor:s.css.buttonBackground}}},value:v.jQ.FoundOtherHotel,label:l.createElement(p.A,null,u("EA4H.General.FoundOtherHotel"))}),l.createElement(ue.Y,{styles:{radio:{"&:checked":{backgroundColor:s.css.buttonBackground,borderColor:s.css.buttonBackground}}},value:v.jQ.NotWannaTell,label:l.createElement(p.A,null,u("EA4H.General.NotWannaTell"))}),l.createElement(ue.Y,{styles:{radio:{"&:checked":{backgroundColor:s.css.buttonBackground,borderColor:s.css.buttonBackground}}},value:v.jQ.Other,label:l.createElement(p.A,null,u("EA4H.General.Other"))})),l.createElement(Se.u,{mounted:h===v.jQ.Other,transition:"fade",duration:400,timingFunction:"ease"},(e=>l.createElement(Ne.g,{id:"bv-otherReason",name:"bv-otherReason",cols:20,style:e,placeholder:u("EA4H.General.Other"),onKeyUp:e=>{var n;let t=null==(n=P.current)?void 0:n.elements.namedItem("bv-otherReason");A(null==t?void 0:t.value)},rows:2}))),l.createElement("p",null," ")),o.activeBooking.cancellationData&&null!=o.activeBooking.cancellationData.allowStoreCreditVoucherMessage&&l.createElement(l.Fragment,null,l.createElement(p.A,{bold:!0,style:{margin:"10px 0"}},u("EA4H.Online.SupportYourFavoriteHotel")),l.createElement(p.A,{dangerouslySetInnerHTML:{__html:o.activeBooking.cancellationData.allowStoreCreditVoucherMessage}}),l.createElement("p",null," "),l.createElement(Te.i,{striped:!0,highlightOnHover:!0},l.createElement("tbody",null,l.createElement("tr",null,l.createElement("td",null,l.createElement(ce.Z,{Label:`${u("EA4H.Online.CancelReservationAndRefundWithExtraAmountOfVoucher")}:`,onChange:e=>{E(!0)},isChecked:!0})),l.createElement("td",null,l.createElement("b",null,o.activeBooking.cancellationData&&a.format(o.activeBooking.cancellationData.storeCreditVoucherAmount)))),l.createElement("tr",null,l.createElement("td",null,l.createElement(ce.Z,{Label:`${u("EA4H.Online.JustCancelMyReservationAndGetRefundWithAmount")}:`,onChange:e=>{E(!1)},isChecked:!0})),l.createElement("td",null,l.createElement("b",null,o.activeBooking.cancellationData&&a.format(o.activeBooking.cancellationData.totalRefundAmount)))))))))},je=Object.defineProperty,Fe=Object.defineProperties,_e=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,ze=(e,n,t)=>n in e?je(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Ze="cancel_booking";var Qe=()=>{const e=(0,$.o)();return{open:()=>{var n;e.openModal((n=((e,n)=>{for(var t in n||(n={}))Ve.call(n,t)&&ze(e,t,n[t]);if($e)for(var t of $e(n))Ue.call(n,t)&&ze(e,t,n[t]);return e})({modalId:Ze,children:l.createElement(Me,null)},L.$),Fe(n,_e({onClick:()=>e.closeModal(Ze)}))))},close:(0,l.useCallback)((()=>{try{e.closeModal(Ze)}catch(e){}}),[])}},Ye=Object.defineProperty,Le=Object.defineProperties,We=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,Xe=(e,n,t)=>n in e?Ye(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,en=(e,n,t)=>new Promise(((l,o)=>{var a=e=>{try{i(t.next(e))}catch(e){o(e)}},r=e=>{try{i(t.throw(e))}catch(e){o(e)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,r);i((t=t.apply(e,n)).next())}));var nn=()=>{var e,n,t,o,a,r,c,d;const[s,m]=(0,l.useState)(!1),h=(0,l.useContext)(i.z),b=(0,g.sJ)(E.g),A=(0,g.sJ)(y.Q),{data:f}=(0,M.E)(),P=(0,x.g)(),{data:O}=(0,j.M)(),R=(0,C.H)(),T=(0,I.useQueryClient)(),S=null==(e=null==h?void 0:h.activeBooking)?void 0:e.bookingData,$=null==(n=null==h?void 0:h.originalBooking)?void 0:n.bookingData,V=(0,F.Z)({isEditReservation:!0}),U=(0,_.Z)(),z=le(),Z=Ge(),Q=Qe(),Y=(null==(t=null==S?void 0:S.bookingRequestInformation)||t.bookingRequestType,v.hu.Quote,(null==(o=null==S?void 0:S.bookingRequestInformation)?void 0:o.bookingRequestStatus)===v.Wy.PendingCustomerResponse);(0,l.useEffect)((()=>{s&&h.isEditMode&&m(!1)}),[h.isEditMode,s]);let L=new Intl.DateTimeFormat(b,{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),W=S.canBeEditedOnline,q=S.canBeCancelledOnline,J=S.bookingStatus===v.gn.Cancelled||S.bookingStatus===v.gn.NoShow,K=S.isConferenceBooking;const X=Boolean(null==(r=null==(a=null==h?void 0:h.activeBooking)?void 0:a.cancellationData)?void 0:r.standaloneAddonsBooking);let ee=S.isPaidWithVoucherConnectedToPackage;const ne=e=>{var n,t,l,o;e.preventDefault();const a=S.cancellationPolicyDescriptions[0].id;1===(null==(n=S.rooms)?void 0:n.length)||(null==(t=S.rooms)?void 0:t.every((e=>e.cancellationPolicyId===a)))?V.open({room:null==(l=S.rooms)?void 0:l[0]}):(null==(o=S.rooms)?void 0:o.length)&&z.open({onRoomSelected:e=>{var n;V.open({room:null==(n=S.rooms)?void 0:n.find((n=>n.internalBookingId===e.internalBookingId))})},rooms:S.rooms.map((e=>{var n,t,l,o;return l=((e,n)=>{for(var t in n||(n={}))Je.call(n,t)&&Xe(e,t,n[t]);if(qe)for(var t of qe(n))Ke.call(n,t)&&Xe(e,t,n[t]);return e})({},e),o={roomName:null!=(t=null==(n=null==O?void 0:O.rooms.find((n=>n.id===e.roomId)))?void 0:n.name)?t:"N/A"},Le(l,We(o))}))})};let te=(0,k.R$)(S);return l.createElement(N.S,{boundaryName:"EditReservation_CartAction"},l.createElement(G,null,J&&l.createElement(N.S,{boundaryName:"EditReservation_CartAction_ThisReservationHasBeenCancelled"},l.createElement("div",null,l.createElement(p.A,{isCardText:!0,bold:!0},R("EA4H.EditReservation.ThisReservationHasBeenCancelled")," ",L.format(new Date(S.bookingDate)),"."),l.createElement(H.T,{h:5}),l.createElement(B.z,{withIcon:!0,variant:"text",style:{textAlign:"start",maxWidth:"unset"},onClick:e=>ne(e)},l.createElement(D.G,{icon:w._t}),R("EA4H.GeneralTermsAndConditions")))),Y&&l.createElement("div",null,l.createElement(p.A,{isCardText:!0,bold:!0},R("EA4H.General.TheBookingProposalIsValidUntil{0}",null==(c=S.bookingRequestInformation)?void 0:c.quoteExpiryDateString))),!J&&!Y&&(K||ee)&&l.createElement("div",null,l.createElement(p.A,{isCardText:!0,bold:!0},R("EA4H.General.TheBookingProposalIsValidUntil{0}",null==(d=S.bookingRequestInformation)?void 0:d.quoteExpiryDateString))),!J&&!Y&&(K||ee)&&l.createElement("div",null,!h.isEditMode&&S.bookingDate&&l.createElement(N.S,{boundaryName:"EditReservation_CartAction_ThisBookingWasConfirmed"},l.createElement(p.A,{isCardText:!0,bold:!0},R("EA4H.General.ThisBookingWasConfirmed")," ",L.format(new Date(S.bookingDate)),".")),l.createElement(H.T,{h:5}),K&&l.createElement(N.S,{boundaryName:"EditReservation_CartAction_ThisIsAConferenceReservationContactUsToChange"},l.createElement(p.A,{isCardText:!0},R("EA4H.EditReservation.ThisIsAConferenceReservationContactUsToChange"))),ee&&l.createElement(N.S,{boundaryName:"EditReservation_CartAction_ThisReservationIsPaidWithVoucherConnectedToPackageContactUsToChange"},l.createElement(p.A,{isCardText:!0},R("EA4H.EditReservation.ThisReservationIsPaidWithVoucherConnectedToPackageContactUsToChange")))),!J&&!Y&&!K&&!ee&&l.createElement(N.S,{boundaryName:"EditReservation_CartAction_NotCancelledNotConferenceNotVoucher"},l.createElement("div",null,l.createElement(p.A,{large:!0,isCardText:!0,bold:!0},!h.isEditMode&&S.bookingDate&&`${R("EA4H.General.ThisBookingWasConfirmed")} ${L.format(new Date(S.bookingDate))}.`,h.isEditMode&&`${R("EA4H.General.YouAreCurrentlyChangingYourBooking")}`),l.createElement(H.T,{h:5}),l.createElement(B.z,{withIcon:!0,variant:"text",style:{textAlign:"start",maxWidth:"unset"},onClick:e=>ne(e)},l.createElement(D.G,{icon:w._t}),R("EA4H.General.ViewEditAndCancellationTermsForYourBooking")),l.createElement(B.z,{withIcon:!0,variant:"text",style:{marginTop:"6px"},onClick:e=>{var n;e.preventDefault(),null==(n=document.getElementById("completed_payments"))||n.scrollIntoView({behavior:"smooth"})}},l.createElement(D.G,{icon:w._t}),(0,Ae.n)(R("EA4H.General.YouHave{0}LeftToPay"),A.format(void 0!==S.alreadyPayed?S.totalPrice-$.alreadyPayed:S.totalPrice))))),l.createElement(u.Z,{spacing:10,noWrap:!0,style:{flexGrow:W?1:"initial"}},Y&&l.createElement("div",{style:{display:"flex",width:"100%",gap:"10px"}},l.createElement(B.z,{inverted:!0,onClick:()=>{}},R("EA4H.Confirmation.DeclineQuote")),l.createElement(B.z,{isLoading:s,onClick:()=>{}},R("EA4H.Confirmation.AcceptQuote"))),!h.isEditMode&&!Y&&l.createElement(N.S,{boundaryName:"EditReservation_CartAction_NotEditMode"},l.createElement("div",{style:{display:"flex",width:"100%",gap:"10px"}},q&&l.createElement(B.z,{inverted:!0,onClick:()=>Q.open()},R("EA4H.General.CancelBooking")),W&&!X&&l.createElement(B.z,{isLoading:s,onClick:e=>en(void 0,null,(function*(){if(e.preventDefault(),s)return;m(!0),yield P.APIClient.basketsEditV1Post({bookingCode:S.bookingCode,channelId:P.channelId});let n=yield P.APIClient.basketsBasketV1(!0,null==f?void 0:f.channelId);T.setQueryData(["basket",null==f?void 0:f.channelId],n),m(!1)}))},R("EA4H.General.ChangeBooking")))),h.isEditMode&&!Y&&l.createElement(N.S,{boundaryName:"EditReservation_CartAction_IsEditMode"},l.createElement("div",{style:{display:"flex",width:"100%",gap:"10px"}},l.createElement(B.z,{inverted:!0,onClick:e=>{e.preventDefault(),U.open({smallSize:!0,question:`${R("EA4H.General.AreYouSureYouWantToUndoAllYourChanges")}?`,confirmFunction:()=>en(void 0,null,(function*(){if((yield P.APIClient.basketsEditV1Delete({channelId:P.channelId})).success){let e=yield P.APIClient.bookingsBookingV1(S.bookingCode,void 0,void 0,P.channelId);yield T.invalidateQueries("basket"),h.RedoSearch(e.bookingData)}}))})}},R("EA4H.General.UndoAllChanges")),W&&l.createElement(B.z,{onClick:e=>{e.preventDefault(),te||Z.open()}},R("EA4H.General.ConfirmChanges")))))))},tn=t(7402),ln=t(71216),on=t(72),an=t(46601),rn=t(98960),cn=t(30639),dn=Object.defineProperty,sn=Object.defineProperties,un=Object.getOwnPropertyDescriptors,mn=Object.getOwnPropertySymbols,pn=Object.prototype.hasOwnProperty,vn=Object.prototype.propertyIsEnumerable,gn=(e,n,t)=>n in e?dn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var En=({availableUpgrades:e,roomContents:n})=>{var t,o;const a=(0,g.sJ)(y.Q),r=(0,g.sJ)(h.u),c=(0,rn.Z)(),d=le(),s=(0,l.useContext)(i.z),{data:u}=(0,j.M)(),v=(0,C.H)(),E=null==(t=null==s?void 0:s.activeBooking)?void 0:t.bookingData;if(!E)return null;let b={diff:void 0,room:{}};e.forEach((e=>{let t=e.currentPrice,l=Number.MAX_VALUE,o=e.currentRoomRate.priceInfo[0].ratePlanId,a=e.currentRoomRate.packageId,r=e.currentRoomRate.paymentPolicyId,i=e.currentRoomRate.cancellationPolicyId;const c=(0,cn.BW)(e.currentRoomRate,E.guests);e.upgrades.forEach((e=>{var d,s;if(null==(s=null==(d=e.rateAlternatives)?void 0:d.filter((e=>e.rateplanId===o||null!==a&&e.packageId===a)))||s.forEach((e=>{var n,o;let a=null==(n=null==e?void 0:e.ratesPerRoomConfig)?void 0:n.find((e=>{var n,t,l,o,a,d,s,u,m;return(null==(n=e.roomConfig)?void 0:n.adults)===c.adults&&(null!=(o=null==(l=null==(t=e.roomConfig)?void 0:t.childAges)?void 0:l.length)?o:0)===(null!=(d=null==(a=c.childAges)?void 0:a.length)?d:0)&&((null==(s=e.roomConfig)?void 0:s.sharerAge)===c.sharerAge||null===(null==(u=e.roomConfig)?void 0:u.sharerAge)&&void 0===c.sharerAge||void 0===(null==(m=e.roomConfig)?void 0:m.sharerAge)&&null===c.sharerAge)&&r===e.paymentPolicyId&&i===e.cancellationPolicyId}));a&&!a.isLocked&&null!==a.totalPrice&&Math.round(null==(o=a.totalPrice)?void 0:o.priceInclVAT)>=t&&a.totalPrice.priceInclVAT<l&&(l=a.totalPrice.priceInclVAT)})),l===Number.MAX_VALUE)return;let u=l-t;u<0&&(u=0),b={diff:u,room:n.find((n=>n.id===e.roomId))}}))}));const k=e=>{c.open({targetRoomToUpdate:e,upSell:!0})},A=e=>{var n,t,l;e.preventDefault(),1===(null==(n=E.rooms)?void 0:n.length)?k(E.rooms[0]):(null==(t=E.rooms)?void 0:t.length)&&d.open({rooms:null==(l=E.rooms)?void 0:l.map((e=>{var n,t,l,o;return l=((e,n)=>{for(var t in n||(n={}))pn.call(n,t)&&gn(e,t,n[t]);if(mn)for(var t of mn(n))vn.call(n,t)&&gn(e,t,n[t]);return e})({},e),o={roomName:null!=(t=null==(n=null==u?void 0:u.rooms.find((n=>n.id===e.roomId)))?void 0:n.name)?t:"N/A"},sn(l,un(o))})),onRoomSelected:k})},f=void 0!==(null==(o=null==b?void 0:b.room)?void 0:o.images)&&b.room.images.length>0?`${b.room.images[0].uri}?maxwidth=500&amp;maxheight=500&amp;scale=downscaleonly`:void 0;return l.createElement(ln.VU,{onClick:e=>A(e),backgroundUrl:f},l.createElement(an.Ds,null),l.createElement("div",{style:{display:"flex",padding:"25px",flexDirection:"column",width:"100%",color:"#fff",zIndex:1}},l.createElement("div",{style:{marginBottom:"10px"}},l.createElement(m.Q,{style:{color:"inherit"}},v("EA4H.General.UpgradeYourRoom")),l.createElement(p.A,{bold:!0,as:"span",style:{color:"#fff"}},v("EA4H.General.From")," ",void 0!==b?a.format(Math.round(b.diff)):""," ",null==r?void 0:r.currency)),l.createElement(B.z,{onClick:e=>A(e),style:{maxWidth:"unset"}},v("EA4H.General.ViewRoomTypes"))))};var yn=({availableOptionalAddons:e,availableOptionalAddonPackages:n})=>{var t;const o=(0,l.useContext)(r.c),a=(0,l.useContext)(i.z),c=(0,C.H)(),d=null==(t=null==a?void 0:a.activeBooking)?void 0:t.bookingData;if(!d)return l.createElement(tn.c,{style:{width:"100%",height:"1000px"}});let s=(0,k.R$)(d);return(0!==n.length&&void 0!==n.find((e=>null!==e.connectedAddOns&&(null==e?void 0:e.connectedAddOns.length)>0))||0!==e.length&&void 0!==e.find((e=>null!==e.addOnPriceInfo&&(null==e?void 0:e.addOnPriceInfo.length)>0)))&&!(()=>{var n,t;let l=null!=(t=null==(n=d.optionalAddOns)?void 0:n.filter((e=>e.optionalAddOnChargeUnit===v.nO.OptionalOnePerRoom&&e.status!==v.Ms.Removed)))?t:[];if(0===l.length)return!1;if(null==e?void 0:e.find((e=>e.addOnChargeUnit!==v.nO.OptionalOnePerRoom&&null!=e.addOnPriceInfo&&e.addOnPriceInfo.length>0)))return!1;let o=!0;return null==e||e.forEach((e=>{var n,t,a;const r=null!=(n=l.filter((n=>n.addOnId===e.addOnId&&null!==n.internalRoomBookingId&&void 0!==n.internalRoomBookingId)).map((e=>e.internalRoomBookingId)))?n:[];(null!=(a=null==(t=e.addOnPriceInfo)?void 0:t.filter((e=>null!==e.internalBookingRoomId&&void 0!==e.internalBookingRoomId)).map((e=>e.internalBookingRoomId)))?a:[]).some((e=>!r.includes(e)))&&(o=!1)})),o})()?l.createElement("div",{style:{marginBottom:"50px"}},l.createElement(N.S,{boundaryName:"EditReservation_UpsellSection"},l.createElement(re.Y,null,c("EA4H.General.GreatAdditionsForYourStay")),s&&l.createElement("div",{style:{textAlign:"center",color:"darkred"}},l.createElement("code",{style:{color:"darkred"}},c("EA4H.EditReservation.AddOnSectionDisabledBecauseOfTimeGapInBooking"))),!s&&l.createElement(ln.zM,null,(()=>{var e,n,t;let a=d.rooms.map((e=>({internalRoomBookingId:e.internalBookingId,currentPrice:e.totalPrice,upgrades:[],currentRoomRate:e}))),r=null!=(n=null==(e=o.searchResults)?void 0:e.filter((e=>void 0!==e.result.roomContent)).flatMap((e=>e.result.roomContent.map((e=>e)))))?n:[];const i=null==(t=o.searchResults)?void 0:t.flatMap((e=>{var n;return null!=(n=e.result.roomsResult)?n:[]})),c=[...new Set(null==i?void 0:i.map((e=>e.roomId)))],s=[];if(c.forEach((e=>{var n,t;let l=null==i?void 0:i.filter((n=>n.roomId===e));if(null===l||0===(null==l?void 0:l.length))return;const o=null==r?void 0:r.find((n=>n.id===e)),c=null!=(n=null==o?void 0:o.upsellRank)?n:0,u=null!=(t=null==o?void 0:o.rank)?t:0;null==l||l.forEach((n=>{var t,l,o,i,m,p;for(let g of null!=(l=null==(t=d.rooms)?void 0:t.filter((n=>n.roomId!==e&&n.totalPrice&&n.status!==v.Ms.Removed)))?l:[]){const e=null==r?void 0:r.find((e=>e.id===g.roomId)),t=null!=(o=null==e?void 0:e.upsellRank)?o:0,l=null!=(i=null==e?void 0:e.rank)?i:0;if(t>0&&c>t)return;if(0===t&&u>l)return;const v=(0,cn.BW)(g,d.guests),E=g.priceInfo[0].ratePlanId,y=g.packageId;null==(p=null==(m=n.rateAlternatives)?void 0:m.filter((e=>e.rateplanId===E||null!==y&&e.packageId===y)))||p.forEach((e=>{var t,l,o,r;let i=null==(t=null==e?void 0:e.ratesPerRoomConfig)?void 0:t.find((e=>{var n,t,l,o,a,r,i,c,d;return(null==(n=e.roomConfig)?void 0:n.adults)===v.adults&&(null!=(o=null==(l=null==(t=e.roomConfig)?void 0:t.childAges)?void 0:l.length)?o:0)===(null!=(r=null==(a=v.childAges)?void 0:a.length)?r:0)&&((null==(i=e.roomConfig)?void 0:i.sharerAge)===v.sharerAge||null===(null==(c=e.roomConfig)?void 0:c.sharerAge)&&void 0===v.sharerAge||void 0===(null==(d=e.roomConfig)?void 0:d.sharerAge)&&null===v.sharerAge)&&g.paymentPolicyId===e.paymentPolicyId&&g.cancellationPolicyId===e.cancellationPolicyId}));if(i&&!i.isLocked&&null!==i.totalPrice&&Math.round(null==(l=i.totalPrice)?void 0:l.priceInclVAT)>=Math.round(g.totalPrice)){s.includes(g.internalBookingId)||s.push(g.internalBookingId);const e=null!=(r=null==(o=a.find((e=>e.internalRoomBookingId===(null==g?void 0:g.internalBookingId))))?void 0:o.upgrades)?r:[];(null==e?void 0:e.includes(n))||e.push(n)}else;}))}}))})),s.length>0)return l.createElement(En,{availableUpgrades:a,roomContents:r})})(),e.map((e=>l.createElement(on.v,{presentationType:v.Rq.Tiles,key:e.addOnId,Addon:e}))),n.map((e=>l.createElement(on.v,{presentationType:v.Rq.Tiles,key:e.addOnPackageId,Addon:e})))))):null},hn=t(69444),Cn=(t(33781),t(20291)),bn=t(65665),kn=t(85676),An=t(23680),fn=Object.defineProperty,Pn=Object.getOwnPropertySymbols,In=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable,Bn=(e,n,t)=>n in e?fn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Hn=(e,n)=>{for(var t in n||(n={}))In.call(n,t)&&Bn(e,t,n[t]);if(Pn)for(var t of Pn(n))xn.call(n,t)&&Bn(e,t,n[t]);return e};var wn=({availableCountries:e})=>{var n,t,o,a,r,d,m,p,v,E,y,b,A,f;const{activeBooking:P}=(0,l.useContext)(i.z),[I,B]=(0,l.useState)(null==(n=null==P?void 0:P.bookingCustomer)?void 0:n.isCorpCustomer),[H,w]=(0,l.useState)(!1),D=(0,g.sJ)(h.u),O=(0,x.g)(),R=(0,C.H)(),G=(0,c.Fg)(),T=null==P?void 0:P.bookingData,S=P.bookingCustomer,N=(0,An.c)({initialValues:{firstName:null!=(t=null==S?void 0:S.firstName)?t:"",lastName:null!=(o=null==S?void 0:S.lastName)?o:"",email:null!=(a=null==S?void 0:S.email)?a:"",company:null!=(r=null==S?void 0:S.company)?r:"",department:null!=(d=null==S?void 0:S.department)?d:"",orgNumber:null!=(m=null==S?void 0:S.organizationNumber)?m:"",streetAddress:null!=(p=null==S?void 0:S.streetAddress)?p:"",coAddress:null!=(v=null==S?void 0:S.coAddress)?v:"",city:null!=(E=null==S?void 0:S.city)?E:"",postalCode:null!=(y=null==S?void 0:S.postalCode)?y:"",phoneCountryCode:null!=(b=null==S?void 0:S.phoneCountryCode)?b:"",phoneNumber:null!=(A=null==S?void 0:S.phoneNumber)?A:"",country:null!=(f=null==S?void 0:S.countryCode)?f:""},validate:{email:e=>/^\S+@\S+$/.test(e)?null:R("EA4H.General.Error.MustBeAnEmail")}}),M=e=>{return n=void 0,t=null,l=function*(){var n,t,l,o,a,r,i,c,d,s,u,m;e.preventDefault();const p=N.values.firstName,v=N.values.lastName,g=N.values.email,E=N.values.company,y=N.values.department,h=N.values.orgNumber,C=N.values.streetAddress,b=N.values.coAddress,A=N.values.city,f=N.values.postalCode,x=N.values.phoneCountryCode,B=N.values.phoneNumber,H=N.values.country;if((0,k.uv)(p,null!=(n=null==S?void 0:S.firstName)?n:"")&&(0,k.uv)(v,null!=(t=null==S?void 0:S.lastName)?t:"")&&(0,k.uv)(E,null!=(l=null==S?void 0:S.company)?l:"")&&(0,k.uv)(y,null!=(o=null==S?void 0:S.department)?o:"")&&(0,k.uv)(h,null!=(a=null==S?void 0:S.organizationNumber)?a:"")&&(0,k.uv)(b,null!=(r=null==S?void 0:S.coAddress)?r:"")&&(0,k.uv)(A,null!=(i=null==S?void 0:S.city)?i:"")&&(0,k.uv)(f,null!=(c=null==S?void 0:S.postalCode)?c:"")&&(0,k.uv)(x,null!=(d=null==S?void 0:S.phoneCountryCode)?d:"")&&(0,k.uv)(B,null!=(s=null==S?void 0:S.phoneNumber)?s:"")&&(0,k.uv)(H,null!=(u=null==S?void 0:S.countryCode)?u:"")&&(0,k.uv)(C,null!=(m=null==S?void 0:S.streetAddress)?m:""))return;w(!0);const R={firstName:p,lastName:v,email:g,company:E,coAddress:b,city:A,countryCode:H,department:y,streetAddress:C,isCorpCustomer:I,organizationNumber:h,postalCode:f,phoneCountryCode:x,phoneNumber:B,customerId:P.bookingCustomer.customerId};yield O.APIClient.basketsUpdateBasketV1({bookingCode:T.bookingCode,customer:R,channelId:null==D?void 0:D.channelId}),w(!1)},new Promise(((e,o)=>{var a=e=>{try{i(l.next(e))}catch(e){o(e)}},r=e=>{try{i(l.throw(e))}catch(e){o(e)}},i=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);i((l=l.apply(n,t)).next())}));var n,t,l};return l.createElement(l.Fragment,null,l.createElement(ce.Z,{boldLabel:!0,id:"is_corp_customer",Label:R("EA4H.General.IAmACorporateCustomer"),onChange:e=>{B(e.currentTarget.checked)},checkedColor:"black",isChecked:I}),l.createElement(V.GX,{style:{marginTop:10}},l.createElement(s.K,{spacing:0},l.createElement(u.Z,{position:"center",align:"center",spacing:0,grow:!0},l.createElement(V.II,Hn({inputContainer:!0,disabled:H,onBlur:M,placeholder:R("EA4H.General.FirstName")},N.getInputProps("firstName"))),l.createElement(V.II,Hn({inputContainer:!0,disabled:H,onBlur:M,placeholder:R("EA4H.General.LastName")},N.getInputProps("lastName"))),l.createElement(V.II,Hn({inputContainer:!0,disabled:H,onBlur:M,placeholder:R("EA4H.General.Email")},N.getInputProps("email")))),I&&l.createElement(u.Z,{position:"center",align:"center",spacing:0,grow:!0},l.createElement(V.II,Hn({inputContainer:!0,disabled:H,onBlur:M,placeholder:R("EA4H.General.Corporation")},N.getInputProps("company"))),l.createElement(V.II,Hn({inputContainer:!0,disabled:H,onBlur:M,placeholder:`${R("EA4H.General.DepartmentReference")} ${R("EA4H.General.OptionalLOWER")}`},N.getInputProps("department"))),l.createElement(V.II,Hn({inputContainer:!0,disabled:H,onBlur:M,placeholder:`${R("EA4H.General.OrganizationNumber")} ${R("EA4H.General.OptionalLOWER")}`},N.getInputProps("orgNumber")))),l.createElement(u.Z,{position:"center",align:"center",spacing:0,grow:!0},l.createElement(V.Ph,Hn({onBlur:M},N.getInputProps("country")),l.createElement("option",{value:""},`${R("EA4H.General.ChooseCountry")} *`),e&&e.length>0&&(null==e?void 0:e.map((e=>l.createElement("option",{style:{fontFamily:G.css.bodyFontFamily},key:`country-${e.code}`,value:e.code},e.name))))),l.createElement(V.II,Hn({inputContainer:!0,onBlur:M,disabled:H,placeholder:R("EA4H.General.City")},N.getInputProps("city"))),l.createElement(V.II,Hn({inputContainer:!0,onBlur:M,disabled:H,placeholder:R("EA4H.General.PostalCode")},N.getInputProps("postalCode")))),l.createElement(u.Z,{position:"center",align:"center",spacing:0,grow:!0},l.createElement(V.II,Hn({inputContainer:!0,onBlur:M,disabled:H,placeholder:R("EA4H.General.StreetAddress")},N.getInputProps("streetAddress"))),l.createElement(V.II,Hn({inputContainer:!0,onBlur:M,disabled:H,placeholder:R("EA4H.General.CoAddress")},N.getInputProps("coAddress")))),l.createElement(u.Z,{position:"center",align:"center",spacing:0,grow:!0},l.createElement(V.II,Hn({inputContainer:!0,onBlur:M,disabled:H,placeholder:R("EA4H.General.CountryCode")},N.getInputProps("phoneCountryCode"))),l.createElement(V.II,Hn({inputContainer:!0,onBlur:M,disabled:H,placeholder:R("EA4H.General.PhoneNumber")},N.getInputProps("phoneNumber")))))))};var Dn=({bookingCustomer:e,availableCountries:n})=>{var t;const o=(0,C.H)();return l.createElement(V.s_,null,l.createElement(p.A,{bold:!0},e.firstName," ",e.lastName),l.createElement(u.Z,{position:"left",align:"center",spacing:3},l.createElement(p.A,{small:!0},e.streetAddress),"•",l.createElement(p.A,{small:!0},e.postalCode," ",e.city),"•",l.createElement(p.A,{small:!0},null==(t=n.find((n=>n.code===e.countryCode)))?void 0:t.name)),l.createElement(u.Z,{position:"left",align:"center",spacing:3},l.createElement(p.A,{small:!0},o("EA4H.General.Email"),": ",e.email),void 0!==e.phoneCountryCode&&void 0!==e.phoneNumber&&""!==e.phoneCountryCode&&""!==e.phoneNumber&&l.createElement(l.Fragment,null,"•",l.createElement(p.A,{small:!0},o("EA4H.General.Phone"),": ",e.phoneCountryCode," ",e.phoneNumber))))},On=t(49976);var Rn=e=>{const{activeBooking:n,isEditMode:t}=(0,l.useContext)(i.z),o=(0,C.H)(),{isLoading:a,data:r}=(0,On.F)();return a?null:l.createElement(kn.W,{pr:0,pl:0},l.createElement(re.Y,null,o("EA4H.General.ResponsibleForBooking")),t?l.createElement(wn,{availableCountries:r.countries}):l.createElement(Dn,{availableCountries:r.countries,bookingCustomer:n.bookingCustomer}))};var Gn=e=>{var n;let t=(0,l.useContext)(i.z),o=null==(n=null==t?void 0:t.activeBooking)?void 0:n.bookingData;const a=(0,g.sJ)(h.u),r=(0,I.useQueryClient)(),c=(0,C.H)(),d=(0,x.g)();if(!o)return null;const s=e=>{return n=void 0,t=null,l=function*(){yield d.APIClient.basketsUpdateBasketV1({bookingCode:o.bookingCode,specialRequest:e,channelId:null==a?void 0:a.channelId}),yield r.invalidateQueries("basket")},new Promise(((e,o)=>{var a=e=>{try{i(l.next(e))}catch(e){o(e)}},r=e=>{try{i(l.throw(e))}catch(e){o(e)}},i=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,r);i((l=l.apply(n,t)).next())}));var n,t,l};return l.createElement(kn.W,{p:0,mt:30},l.createElement(re.Y,null,c("EA4H.EditReservation.MessageAndSpecialRequest")),t.isEditMode?l.createElement(V.Kx,{rows:2,cols:20,style:{resize:"none"},placeholder:c("EA4H.General.TypeYourRequest"),onBlur:e=>s(e.target.value),defaultValue:o.specialRequest}):l.createElement(V.s_,null,o.specialRequest&&o.specialRequest.length>0?o.specialRequest:c("EA4H.General.YouHaveNotAddedAnyMessage")))};var Tn=e=>{var n,t,o,a;let r=(0,l.useContext)(i.z);const c=(0,C.H)(),d=(0,g.sJ)(y.Q),s=(0,g.sJ)(h.u);let u=null==(n=null==r?void 0:r.activeBooking)?void 0:n.bookingData,m=null==(t=null==r?void 0:r.originalBooking)?void 0:t.bookingData;return u?l.createElement(kn.W,{id:"completed_payments",p:0,mt:30,mb:r.isEditMode?50:0},l.createElement(re.Y,null,c("EA4H.General.Payment")),r.isEditMode?l.createElement(V.s_,null,l.createElement(O,null,void 0!==u.previousBookingTotalPrice&&l.createElement("div",null,l.createElement(p.A,{muted:!0,small:!0},c("EA4H.General.PreviousAmount")),l.createElement(p.A,{bold:!0},d.format(u.previousBookingTotalPrice)," ",null==s?void 0:s.currency)),l.createElement("div",null,l.createElement(p.A,{muted:!0,small:!0},c("EA4H.General.NewAmount")),l.createElement(p.A,{bold:!0},d.format(u.totalPrice)," ",null==s?void 0:s.currency)),l.createElement("div",null,l.createElement(p.A,{muted:!0,small:!0},c("EA4H.General.BalanceDue")),l.createElement(p.A,{bold:!0},d.format(void 0!==u.alreadyPayed?u.totalPrice-m.alreadyPayed:u.totalPrice)," ",null==s?void 0:s.currency)))):l.createElement(R,null,l.createElement(V.s_,null,l.createElement(p.A,{bold:!0,style:{marginBottom:"10px"}},c("EA4H.General.CompletedPayments")),null==(o=u.paymentHistory)?void 0:o.map(((e,n)=>{const t=new Date(e.date),o=(0,Ae.n)(c("EA4H.General.PaidAmountText"),d.format(e.amount),me(e.transactionType,c));return l.createElement("div",{key:`paymentHistory_${n}`},l.createElement(l.Fragment,{key:t.getTime()},l.createElement(p.A,{bold:!0},o),l.createElement("div",null,t.toLocaleDateString()," ",t.toLocaleTimeString())))})),0===(null==(a=u.paymentHistory)?void 0:a.length)&&l.createElement(p.A,{bold:!0},c("EA4H.General.NoTransactions"))),l.createElement(V.s_,null,l.createElement(p.A,{bold:!0,style:{marginBottom:"10px"}},c("EA4H.General.PaymentSummary")),l.createElement("table",{style:{border:0,width:"100%"}},l.createElement("tbody",null,l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,c("EA4H.General.Total"))),l.createElement("td",{style:{textAlign:"right"}},d.format(u.totalPrice)," ",null==s?void 0:s.currency)),void 0!==u.alreadyPayed&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,c("EA4H.General.AlreadyPaid"))),l.createElement("td",{style:{textAlign:"right"}},d.format(void 0!==m.alreadyPayed?m.alreadyPayed:0)," ",null==s?void 0:s.currency)),l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,c("EA4H.General.BalanceDue"))),l.createElement("td",{style:{textAlign:"right"}},l.createElement("b",null,d.format(void 0!==u.alreadyPayed?u.totalPrice-m.alreadyPayed:u.totalPrice)," ",null==s?void 0:s.currency)))))))):null};var Sn=e=>{var n;const t=(0,l.useContext)(i.z),o=(0,g.sJ)(h.u),a=(0,x.g)(),r=(0,C.H)(),c=(0,I.useQueryClient)(),d=Ge(),s=(0,_.Z)(),m=null==(n=null==t?void 0:t.activeBooking)?void 0:n.bookingData,p=(0,k.R$)(m),v=m.canBeEditedOnline;return l.createElement(N.S,{boundaryName:"EditReservation_Footer"},l.createElement(u.Z,{mt:0,position:"apart"},l.createElement(B.z,{inverted:!0,style:{width:"max-content"},onClick:e=>{e.preventDefault(),s.open({question:`${r("EA4H.General.AreYouSureYouWantToUndoAllYourChanges")}?`,smallSize:!0,confirmFunction:()=>{return e=void 0,n=null,l=function*(){if((yield a.APIClient.basketsEditV1Delete({channelId:null==o?void 0:o.channelId})).success){let e=yield a.APIClient.bookingsBookingV1(m.bookingCode,void 0,void 0,null==o?void 0:o.channelId);yield c.invalidateQueries("basket"),t.RedoSearch(e.bookingData)}},new Promise(((t,o)=>{var a=e=>{try{i(l.next(e))}catch(e){o(e)}},r=e=>{try{i(l.throw(e))}catch(e){o(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,r);i((l=l.apply(e,n)).next())}));var e,n,l}})}},r("EA4H.General.UndoAllChanges")),v&&l.createElement(B.z,{style:{width:"max-content"},onClick:()=>{p||d.open()}},r("EA4H.General.ConfirmChanges"))))},Nn=t(87262),Mn=t(68611),jn=(e,n,t)=>new Promise(((l,o)=>{var a=e=>{try{i(t.next(e))}catch(e){o(e)}},r=e=>{try{i(t.throw(e))}catch(e){o(e)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,r);i((t=t.apply(e,n)).next())}));var Fn=e=>{var n,t,c;let{bookingCode:d}=(0,Cn.UO)();d=null!=(n=e.bookingCode)?n:d;const{data:s}=(0,Nn.K)(),{data:u}=(0,Mn.v)({bookingCode:d}),[m,p]=(0,l.useState)(),[g,E]=(0,l.useState)([]),[y,h]=(0,l.useState)([]),C=(0,x.g)(),{data:b}=(0,M.E)(),k=(0,a.useMediaQuery)({query:"(max-width: 1199px)"}),A=Boolean(null==s?void 0:s.booking);(0,l.useEffect)((()=>{var e;(null==(e=null==u?void 0:u.bookingData)?void 0:e.canBeEditedOnline)&&(C.APIClient.bookingsAvailableAddonsV1(u.bookingCode,!0,A,void 0,+C.languageId,C.channelId).then((e=>{E(e.optionalAddons),h(e.optionalAddOnPackages)})),Promise.all([...u.bookingData.rooms.map((e=>{var n,t,l;return C.APIClient.accommodationSearchV1({startDate:e.startDate,endDate:e.endDate,bookingCode:u.bookingData.bookingCode,roomConfigs:[(0,cn.BW)(e,null==(n=u.bookingData)?void 0:n.guests)],filter:{ratePlanId:void 0,includeRooms:!0,includePackages:void 0!==e.packageId,roomContent:v.zI.Full,packageContent:v.L2.Full,internalRoomId:null!=(t=e.internalBookingId)?t:void 0,campaignId:null!=(l=e.campaignId)?l:void 0},channelId:C.channelId})}))]).then((e=>jn(void 0,null,(function*(){p(e.map(((e,n)=>{var t,l;let o=null==(l=null==(t=u.bookingData)?void 0:t.rooms)?void 0:l[n];return{internalRoomBookingId:o?o.internalBookingId:"unknown",result:e}})))})))))}),[d,C.languageCulture]);return l.createElement(N.S,{boundaryName:"EditReservationOuter"},l.createElement(i.z.Provider,{value:{nrOfDecimals:null!=(t=null==b?void 0:b.nrDecimals)?t:0,activeBooking:A?null==s?void 0:s.booking:u,originalBooking:u,isEditMode:A,RedoSearch:e=>{var n;const t=null!=e?e:A?null==(n=null==s?void 0:s.booking)?void 0:n.bookingData:null==u?void 0:u.bookingData;Promise.all([...t.rooms.map((e=>{var n,l;return C.APIClient.accommodationSearchV1({startDate:e.startDate,endDate:e.endDate,bookingCode:t.bookingCode,roomConfigs:[(0,cn.BW)(e,t.guests)],filter:{ratePlanId:void 0,includeRooms:!0,includePackages:void 0!==e.packageId,roomContent:v.zI.Full,packageContent:v.L2.Full,internalRoomId:null!=(n=e.internalBookingId)?n:void 0,campaignId:null!=(l=e.campaignId)?l:void 0},channelId:C.channelId})}))]).then((e=>jn(void 0,null,(function*(){p(e.map(((e,n)=>{let l=t.rooms?t.rooms[n]:void 0;return{internalRoomBookingId:l?l.internalBookingId:"unknown",result:e}})))}))))}}},l.createElement(hn.$,{modalProps:{zIndex:99999}},l.createElement(r.c.Provider,{value:{searchResults:m}},l.createElement(l.Suspense,{fallback:null},l.createElement(P,null),l.createElement(nn,null)),l.createElement("div",{style:{display:"flex",gap:"40px",flexDirection:k?"column":"row"}},l.createElement(l.Suspense,{fallback:l.createElement(o._G,null,l.createElement(tn.c,{style:{height:"550px",minWidth:"360px",width:"100%"}})," ")},l.createElement(o._G,null,l.createElement(bn.C,{noCancelButton:!0,bookingData:A?null==(c=null==s?void 0:s.booking)?void 0:c.bookingData:null==u?void 0:u.bookingData}))),l.createElement(l.Suspense,{fallback:null},l.createElement(o.Z1,{style:{width:"100%"}},l.createElement(yn,{availableOptionalAddonPackages:y,availableOptionalAddons:g}),l.createElement(Rn,null),l.createElement(Gn,null),l.createElement(Tn,null),A?l.createElement(Sn,null):null)))))))},_n=t(82981),$n=t(63814),Vn=Object.defineProperty,Un=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,Zn=Object.prototype.propertyIsEnumerable,Qn=(e,n,t)=>n in e?Vn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Yn=(e,n)=>{for(var t in n||(n={}))zn.call(n,t)&&Qn(e,t,n[t]);if(Un)for(var t of Un(n))Zn.call(n,t)&&Qn(e,t,n[t]);return e};var Ln=({noWrapper:e})=>{const n=(0,_n.K)(),t=(0,x.g)(),a=n.get("channelId"),r=Yn({},t);return Boolean(a)&&(r.channelId=a),l.createElement($n.a,Yn({},r),e&&l.createElement(Fn,null),!e&&l.createElement(o.Rt,{id:"content_div",noSideBar:!0},l.createElement(l.Suspense,{fallback:null},l.createElement(o.Z1,{noBackground:!0,noPadding:!0,style:{paddingTop:"50px",paddingBottom:"50px"}},l.createElement(Fn,null)))))}}}]);